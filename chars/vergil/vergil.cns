;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 5000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 100    ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0    ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 255  ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 49;58    ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale           = 0.5       ;キャラの横の大きさ（絶対値・float）
yscale           = 0.5      ;キャラの縦の大きさ（絶対値・float）
ground.back      = 23    ;地上にいる時の「後方の物理的な幅」
ground.front     = 15     ;地上にいる時の「前方の物理的な幅」
air.back         = 24      ;空中にいる時の「後方の物理的な幅」
air.front        = 25      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = -5,-90  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -5,-60  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2       ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -1.7        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 4.6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -4.5,-3.8   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-11.5      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -3       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -4.5,-9.5  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 4.5,-9.5     ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .65   ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
;ジャンプ開始
[Statedef 40]
type    = S
physics = S
anim = 40+var(10)
ctrl = 0
velset = 0,0

[State 40, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP


[State 40, 1]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 40, 1]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = Random = [0,200]
sysvar(1) = 0

[State 40, 2]
type = VarSet
Trigger1 = var(59) = 0
Trigger1 = command = "holdfwd"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType != L || P2BodyDist X >= 30
Trigger2 = Random <= 333 || EnemyNear,StateType = L
sysvar(1) = 1

[State 40, 3]
type = VarSet
Trigger1 = var(59) = 0
Trigger1 = command = "holdback"
Trigger2 = var(59)
Trigger2 = EnemyNear,StateType != L
Trigger2 = EnemyNear,MoveType != H
Trigger2 = BackEdgeBodyDist>60
Trigger2 = Random <= 200
sysvar(1) = -1


[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 40, 4];ハイジャンプ判定
type = VarSet
triggerall = Time = 0
triggerall = var(59) = 0
trigger1 = (PrevStateNo = 100 || PrevStateNo = 101) && sysvar(1) = 1
trigger2 = Command = "longjump"
trigger3 = Command = "longjump" && Command = "holdfwd"
trigger4 = Command = "longjump" && Command = "holdback"
var(3) = 1

[State 40, 4]
type = VarSet
triggerall = var(59) = 1
triggerall = Time = 0
trigger1 = PrevStateNo = 100 || PrevStateNo = 101
trigger2 = Random = [0,300]
var(3) = 1


[State 40, 4];小ジャンプ判定
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 5]
type = VarSet
triggerall = var(59) = 0
trigger1 = command != "holdup"
var(4) = 1

[State 40, 5]
type = VarSet
triggerall = var(59)
trigger1 = Random = [0,50]
var(4) = 1

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(3)
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(3)
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 40, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(4)
y = ifelse(Var(3) && !SysVar(1), const(velocity.jump.y)*1.15, const(velocity.jump.y))

[State 40, 9]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(4)
y = ifelse(Var(3) && !SysVar(1), const(velocity.jump.y)*1.15*.75, const(velocity.jump.y)*.75)

[State 40, 5]
type = PlaySnd
trigger1 = time = 1
value = 41, 0
volume = 255

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ
[Statedef 50]
type    = A
physics = N

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10040
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 40
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10041
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 41
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10042
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 42
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10050
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 50
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10051
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 51
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10052
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 52
elem = animelemno(0)

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !Var(4)
value = ifelse((vel x)=0, 41+var(10), ifelse((vel x)>0, 42+var(10), 43+var(10)))

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Var(4)
value = ifelse((vel x)=0, 51+var(10), ifelse((vel x)>0, 52+var(10), 53+var(10)))


[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, AfterImage]
type = AfterImage
triggerall = !var(16)
trigger1 = Time = 0
trigger1 = Var(3)
time = 20
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
length = 9
trans = add1
TimeGap  = 2
FrameGap = 4


[State 50, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170+var(10)
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10170
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 170
elem = animelemno(0)

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S

[State 180, ステート変更]
type = ChangeState
trigger1 = prevstateno = 3507
value = 182

[State 180, ステート変更]
type = ChangeState
trigger1 = 1
value = 183;ifelse(random%2=0,181,183)


;---------------------------------------------------------------------------

;勝利ポーズ１
[Statedef 181]
type = S
ctrl = 0
anim = 182+var(10)
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10182
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 182
elem = animelemno(0)

[State 181, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 181, セリフ]
type = PlaySnd
trigger1 = AnimElem = 2
value = 181,ifelse(var(13),0,3)

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;勝利ポーズ２
[Statedef 183]
type = S
ctrl = 0
anim = 183+var(10)
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10183
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 183
elem = animelemno(0)

[State 181, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 181, セリフ]
type = PlaySnd
trigger1 = AnimElem = 2
value = 181,ifelse(var(13),0,4)

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;勝利ポーズ（絶刀後）
[Statedef 182]
type = S
ctrl = 0
anim = 3507
velset = 0,0

[State 182, 大きさ]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 182, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;イントロ
[Statedef 191]
type = S
ctrl = 0
velset = 0,0
anim = 0

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 191, 1]
type = Changestate
trigger1 = p2name = "dante"
trigger1 = p2stateno = 193
value = 193

[State 191, 1]
type = Changestate
trigger1 = p2name = "dante"
trigger1 = p2stateno = 194
value = 194

[State 191, 1]
type = Changestate
trigger1 = time > 1
value = 192

;---------------------------------------------------------------------------
; Introduction
[Statedef 192]
type = S
ctrl = 0
velset = 0,0
anim = 191

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0


[State 100, 1]
type = playsnd
trigger1 = anim = 191
trigger1 = animelemtime(1)=30
value = 181,ifelse(random%2=0,3,5)

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 193]
type = S
ctrl = 0
velset = 0,0
anim = 0

[State 191, 1]
type = Width
trigger1 = 1
edge = 43,43

[State 191, 1]
type = posadd
trigger1 = time = 0
x = 117

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 191, 1]
type = Turn
trigger1 =p2dist X < 0
trigger1 = time = 0
persistent = 0

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 0
trigger1 = time = 25
value = 300

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 4
anim = 301
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 10
anim = 302
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 4
value = 300, 2
channel = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 21
value = 300, 1

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 3 || animelem = 4
x = 5

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = time = 4 || time = 6
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 10
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 11
x = 6

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 12
x = 3


[State 191, 1]
type = ChangeAnim
trigger1 = anim = 300
trigger1 = animelemtime(17) = 1
value = 900

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 900
trigger1 = animelemtime(5) = 1
value = 901

[State 210, 1]
type = PlaySnd
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
value = 1300, 4

[State 300, エフェクト]
type = Explod
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
anim = f3
postype = p1
pos = 50,-50
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 191, 1]
type = Changeanim
trigger1 = anim = 901
trigger1 = animelemtime(5) = 1
value = 1200

[State 1200, セリフ]
type = PlaySnd
trigger1 = anim = 1200
trigger1 = AnimElem = 7
channel = 0
value = 1200,1

[State 1200, 効果音]
type = PlaySnd
trigger1 = anim = 1200
trigger1 = AnimElem = 8
value = 190,2

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, 速度]
type = veladd
trigger1 = anim = 1200
trigger1 = animelemtime(1) >= 5
trigger1 = animelemtime(9) < 5
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = anim = 1200
trigger1 = animelem = 4
x = 1

[State 1200, 速度]
type = velset
trigger1 = anim = 1200
trigger1 = animelemTime(8) = 2
x = 20

[State 1200, 速度]
type = velset
trigger1 = anim = 1200
trigger1 = FrontEdgeBodyDist < 40
x = 0

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = anim = 1200
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = anim = 1200
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 191, 1]
type = Turn
triggerall = anim = 1200
trigger1 = animtime = 0

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 1200
trigger1 = animtime = 0
value = 195

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 195
value = 700,0
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 20
trigger1 = anim = 195
value = 800,0
channel = 0

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 195
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 194]
type = S
ctrl = 0
velset = 0,0
anim = 0

[State 191, 1]
type = Width
trigger1 = 1
edge = 43,43

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 0
trigger1 = time = 25
value = 300

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 4
anim = 301
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, エフェクト]
type = Explod
trigger1 = anim = 300
trigger1 = animelem = 10
anim = 302
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 4
value = 300, 2
channel = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = anim = 300
trigger1 = animelem = 21
value = 300, 1

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 3 || animelem = 4
x = 5

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = time = 4 || time = 6
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 10
x = 3

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 11
x = 6

[State 300, 移動]
type = PosAdd
trigger1 = anim = 300
trigger1 = animelem = 12
x = 3


[State 191, 1]
type = ChangeAnim
trigger1 = anim = 300
trigger1 = animelemtime(17) = 1
value = 900

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 900
trigger1 = animelemtime(5) = 1
value = 901

[State 210, 1]
type = PlaySnd
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
value = 1300, 4

[State 300, エフェクト]
type = Explod
trigger1 = anim = 900
trigger1 = animelemtime(4) = 1
anim = f3
postype = p1
pos = 50,-50
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, 移動]
type = velset
trigger1 = anim = 901
trigger1 = animelemtime(1) = 1
x = -5

[State 300, 移動]
type = velmul
trigger1 = anim = 901 || anim = 192
x = 0.82

[State 191, 1]
type = Changeanim
trigger1 = anim = 901
trigger1 = animelemtime(5) = 1
value = 192

[State 950, 効果音]
type = PlaySnd
trigger1 = anim = 192
trigger1 = animelem = 4
value = 1400, 0
channel = 2

[State 950, 効果音]
type = StopSnd
trigger1 = anim = 192
trigger1 = animelem = 30
channel = 2

[State 950, エフェクト]
type = Explod
trigger1 = anim = 192
trigger1 = animelem = 10
anim = 952
ID = 952
scale = 0.6,0.6
postype = p1
pos = -25,10
sprpriority = 5
ownpal = 1
bindtime = -1
removetime = 42


[State 950, エフェクト]
type = Explod
trigger1 = anim = 192
trigger1 = animelem = 29
anim = 953
ID = 953
scale = 0.6,0.6
postype = p1
pos = -25,10
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1
persistent = 0

[State 951, 効果音]
type = PlaySnd
trigger1 = anim = 192
trigger1 = animelem = 33
value = 5, 1

[State 951, エフェクト]
type = Explod
trigger1 = anim = 192
trigger1 = animelem = 34
anim = 1206
ID = 1206
scale = 0.5,0.5
postype = p1
pos = -7,-67
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 191, 1]
type = ChangeAnim
trigger1 = anim = 192
trigger1 = animtime = 0
value = 195

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 195
value = 700,0
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 20
trigger1 = anim = 195
value = 800,0
channel = 0

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 195
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 2

[state 50, 1]
type = changeanim
trigger1 = time = 0
value = ifelse(random%2=0,195+var(10),182+var(10))

[State 195, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10182
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 182
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10195
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 195
elem = animelemno(0)

[State 195, コントロール]
type = CtrlSet
trigger1 = animelem = 24 
trigger1 = anim = 182 || anim = 10182
trigger2 = animelem = 33
trigger2 = anim = 195 || anim = 10195
value = 1     

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 8
trigger1 = anim = 195 || anim = 10195
trigger1 = var(13) = 0
value = 181,4
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 195 || anim = 10195
trigger1 = var(13) = 1
value = 700,0
channel = 0

[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 20
trigger1 = anim = 195 || anim = 10195
trigger1 = var(13) = 1
value = 800,0
channel = 0


[State 195, セリフ]
type = PlaySnd
trigger1 = AnimElem = 1
trigger1 = anim = 182 || anim = 10182
value = 190,0
channel = 0

[State 195, 効果音]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = anim = 182 || anim = 10182
value = 20,0

[State 195, 効果音]
type = PlaySnd
trigger1 = AnimElem = 12
trigger1 = anim = 182 || anim = 10182
value = 5,4

[State 195, 効果音]
type = PlaySnd
trigger1 = AnimElem = 22
trigger1 = anim = 182 || anim = 10182
value = 190,2

[State 195, スタポ]
type = Varadd
trigger1 = animelem =24
trigger1 = anim = 182 || anim = 10182
persistent = 1
v = 58
value = 3500

[State 195, スタポ]
type = Varadd
trigger1 = animelem =33
trigger1 = anim = 195 || anim = 10195
persistent = 1
v = 58
value = 3500

[State 330, ゲージ]
type = PowerAdd
trigger1 = animelem =24
trigger1 = anim = 182 || anim = 10182
trigger2 = animelem =33
trigger2 = anim = 195 || anim = 10195
value = 200

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラン
[Statedef 100]
type    = S
physics = S
anim = 100+var(10)
sprpriority = 1


[State 100, 移動]
type = VelSet
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)

[state 100, アニメ変更];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10100
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 100
elem = animelemno(0)

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoturn

[State 100, ステート変更]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 効果音]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = 100,0
channel = 20


[State 100, ステート変更]
type = ChangeState
triggerall = var(59) = 0
triggerall = AnimElemTime(2) >= 1
trigger1 = command != "holdfwd"
value = 101
ctrl = 1

[State 100, ステート変更]
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(2) >= 1
trigger1 = P2BodyDist X <= 45 && Random <= 700
trigger2 = P2MoveType = A && Random <= 500 && P2BodyDist X <= 70
trigger3 = roundstate != 2
value = 101
ctrl = 1

;---------------------------------------------------------------------------
;ラン停止
[Statedef 101]
type = S
physics = N
ctrl = 1
anim = 101+var(10)

[State 101, ステート変更]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "holdup"
value = 40

[State 101, 効果音止め]
type = StopSnd
trigger1 = time = 0
channel = 20

[State 101, 摩擦]
type = VelMul
trigger1 = 1
x = .5

[State 101, 止まる]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 101, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
; 通常攻撃技
;===========================================================================
;立ち弱パンチ（闇魔刀コンボ１）
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 200+var(10)
poweradd = 20
sprpriority = 2
facep2 = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 200
elem = animelemno(0)

[State 200, 変数リセット]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 200, アニメ変更]
type = ChangeAnim
trigger1 = time = 0
trigger1 = prevstateno = 300
value = 310
ignorehitpause = 1
persistent = 0

[State 200, アニメ変更]
type = ChangeAnim
trigger1 = time = 0
trigger1 = anim != 310
value = 200
ignorehitpause = 1
persistent = 0


[State 200, 効果音]
type = PlaySnd
trigger1 = Time = 1
value = 5, 5

[State 200, 移動]
type = PosAdd
trigger1 = animelem = 2 || animelem = 4
x = 3

[State 200, 移動]
type = PosAdd
trigger1 = animelem = 3
x = 6

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA 
hitflag = MA
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 23, 0
pausetime = 2,2
guard.pausetime = 4,4
sparkno = 2
guard.sparkno = S8000
sparkxy = -20, -62
hitsound = 5, 1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 12
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1.4,-3
airguard.velocity = -3,-.8


[State 200, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.06


[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59) = 0
trigger1 = var(7) = 1
trigger1 = Time > 6
value = 201
ctrl = 0

[State 201, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 201, 追加入力]
type = VarSet
trigger1 = command = "x"
trigger1 = time > 1
v = 7                   
value = 1

[State 200, ステート変更]
type = ChangeState
triggerall = var(59)
trigger1 = Time > 6
trigger1 = movecontact
value = 201
ctrl = 0

;---------------------------------------------------------------------------
;鞘当て2段目（闇魔刀コンボ２）
[Statedef 201]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
poweradd = 20
sprpriority = 2
facep2 = 1

[State 201, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 201, アニメ変更]
type = ChangeAnim
trigger1 = time = 0
trigger1 = anim = 310
value = 320
ignorehitpause = 1
persistent = 0

[State 201, アニメ変更]
type = ChangeAnim
trigger1 = time = 0
trigger1 = anim = 200
value = 201
ignorehitpause = 1
persistent = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10201
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 201
elem = animelemno(0)

[State 201, 効果音]
type = PlaySnd
trigger1 = time = 6
value = 5, 5

[State 201, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 20, 1

[State 201, 効果音]
type = PlaySnd
trigger1 = animelem = 4
value = 20, 2

[State 201, 移動]
type = velset
trigger1 = time = 7
x = 5

[State 201, 移動]
type = velmul
trigger1 = time = 21
x = 0.3


[State 201, エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 321
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 201, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA 
hitflag = MA
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 35, 0
pausetime = 2,2
guard.pausetime = 4,4
sparkno = 2
guard.sparkno = S8000
sparkxy = -20, -76
hitsound = 5, 1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 12
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1.4,-3
airguard.velocity = -3,-.8

[State 201, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 201, 追加入力]
type = VarSet
trigger1 = command = "a+b"
trigger1 = time > 7
trigger1 = var(10) = 0
v = 7                   
value = 1

[State 201, 追加入力]
type = VarSet
trigger1 = command = "y"
trigger1 = time > 7
v = 7                   
value = 2

[State 201, 追加入力]
type = VarSet
trigger1 = command = "down_y"
trigger1 = time > 7
v = 7                   
value = 3

[State 201, ステート変更]
type = ChangeState
triggerall = var(59) = 0
trigger1 = var(7) >= 1
trigger1 = Time > 14
value = ifelse(var(7)=2,210,ifelse(var(7)=1,330,410))
ctrl = 0

[State 201, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.06

[State 201, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;立ち強パンチ（闇魔刀コンボ３）
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210+var(10)
sprpriority = -1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10210
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 210
elem = animelemno(0)

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, ぶつかり]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0 

[State 210, セリフ]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 3
channel = 0

[State 210, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 5, 0

[State 210, 効果音]
type = PlaySnd
trigger1 = animelem = 26
value = 5, 1

[State 210, エフェクト]
type = Explod
trigger1 = animelem = 11
anim = 211
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 210, エフェクト]
type = Explod
trigger1 = animelem = 5
anim = 332
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 210, エフェクト]
type = Explod
trigger1 = animelem = 26
anim = 1206
ID = 1206
scale = 0.5,0.5
postype = p1
pos = -12,-77
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 210, ヒット定義]
type = HitDef
trigger1 = var(15) >= 2
attr = S, NA
animtype  = diagup
damage= 100
priority  = 7, Hit
hitflag = MA
guardflag = M
pausetime = 12,12
sparkno = 12
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,11
guardsound = S6,0
ground.type = high
ground.slidetime = 15
ground.hittime  = 15
guard.ctrltime = 15
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5

[State 210, ヒット定義]
type = HitDef
trigger1 = var(15) <= 1
attr = S, NA
animtype  = hard
damage= 60
priority  = 7, Hit
hitflag = MA
guardflag = M
pausetime = 12,12
sparkno = 12
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,11
guardsound = S6,0
ground.type = high
ground.slidetime = 15
ground.hittime  = 15
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0

[State 210, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(1300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 210, コントロール]
type = CtrlSet
triggerall = var(59) = 0 
trigger1 = animelem = 16
value = 1

[State 210, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = animelemtime(16) >= 0
trigger1 = enemynear,movetype = A
value = 1

[State 210, コントロール]
type = statetypeSet
trigger1 = animelemtime(16) >= 0
movetype = I


[State 210, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animtime = -10
v = 58
value = ceil(3500*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 210, ゲージ]
type = PowerAdd
trigger1 = animtime = -10
value = 350

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち弱キック(ベオコンボ１)
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, セリフ]
type = PlaySnd
trigger1 = Time = 3
value = 230, 0
channel = 0

[State 230,  エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 233
scale = 0.5,0.5
postype = p1
pos = 35,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 200, 軸移動]
type = PosAdd
trigger1 = animelem = 4
x = 20

[State 230, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 50
priority  = 4, Hit
hitflag = MA
guardflag = MA
pausetime = 6,6
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -4
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1

[State 230, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(800*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.02

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 201, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 201, 追加入力]
type = VarSet
trigger1 = command = "a"
trigger1 = time > 7
v = 7                   
value = 1

[State 230, ステート変更]
type = ChangeState
triggerall = var(59) = 0
trigger1 = var(7) >= 1
trigger1 = Time > 15
value = 231
ctrl = 0

[State 230, ステート変更]
type = ChangeState
triggerall = var(59)
trigger1 = Time > 15
value = 231
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 231]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 231
sprpriority = 2

[State 231, セリフ]
type = PlaySnd
trigger1 = Time = 2
value = 230, 1
channel = 0

[State 231, エフェクト]
type = Explod
trigger1 = animelem = 5
anim = 233
scale = 0.5,0.5
postype = p1
pos = 2,-5
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 231, 移動]
type = PosAdd
trigger1 = AnimElemTime(4) = 0
trigger2 = AnimElemTime(4) = 1
x = 15

[State 231, 移動]
type = PosAdd
trigger1 = animelem = 5
x = 15

[State 231, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 35
priority  = 4, Hit
hitflag = MA
guardflag = MA
pausetime = 8,8
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 28
guard.ctrltime = 20
ground.velocity = -4
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1

[State 231, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(800*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.02

[State 201, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 201, 追加入力]
type = VarSet
trigger1 = command = "x"
trigger1 = movehit
v = 7                   
value = 1

[State 201, ステート変更]
type = ChangeState
triggerall = var(59) = 0
trigger1 = var(7) = 1
trigger1 = Time > 20
value = 200
ctrl = 0

[State 231, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強キック(ベオコンボ３)
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 232
sprpriority = 2


[State 240, セリフ]
type = PlaySnd
trigger1 = Time = 7
value = 230, 2
channel = 0

[State 240, 汎用変数]
type = VarSet
trigger1 = 1
v = 13
value = AnimElemNo(0)

[State 240, エフェクト]
type = Explod
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
trigger2 = animelem = 12 || animelem = 13 || animelem = 14 || animelem = 15 || animelem = 16
anim = 228+var(13)
scale = 0.5,0.5
postype = p1
pos = -15,25
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1


[State 240, 移動]
type = velset
trigger1 = AnimElemTime(7) = 2
x = 8
y = -4

[State 240, 移動]
type = StateTypeSet
trigger1 = animelemtime(7) = 2
physics = N

[State 240, 移動]
type = veladd
trigger1 = time = [20,40]
y = 0.6

[State 240, 移動]
type = velmul
trigger1 = time = [20,40]
x = 0.9

[State 240, 移動]
type = StateTypeSet
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
physics = S

[State 240, 移動]
type = velset
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
Y = 0

[State 240, ヒット定義]
type = HitDef
trigger1 = animelem = 8 || animelem = 9
attr = S, NA
animtype  = hard
damage    = 55
priority  = 4, Hit
hitflag = MAF
guardflag = H
pausetime = 5,5
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,2
guardsound = S6,0
ground.type = high
ground.slidetime = 10
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -4
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0

[State 240, ヒット定義]
type = HitDef
trigger1 = animelem = 13 || animelem = 14
attr = S, NA
animtype  = back
damage    = 55
priority  = 4, Hit
hitflag = MAF
guardflag = H
pausetime = 8,8
sparkno = 3
guard.sparkno = S8000
sparkxy = -25,-62
hitsound = S1,2
guardsound = S6,0
ground.type = high
ground.slidetime = 10
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -7
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5

[State 240, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 8 || animelem = 9
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 240, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 13 || animelem = 14
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))


[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;フォースエッジコンボ１
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 300
sprpriority = -1

[State 300, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 300, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 300, ぶつかり]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0  ;この場合キャラの幅を一時的に前に１５ピクセル伸ばす事になる。
             
[State 300, エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 301
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 300, エフェクト]
type = Explod
trigger1 = animelem = 10
anim = 302
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1


[State 300, エフェクト]
type = Explod
trigger1 = movehit
trigger1 = animelem = 5 || animelem = 11
anim = F11
postype = p2
pos = -10,-70
sprpriority = 6
removetime = 10
removeongethit = 1
IgnoreHitPause = 1

[State 300, 効果音]
type = PlaySnd
trigger1 = animelem = 4
value = 300, 2
channel = 1

;[State 300, セリフ]
;type = PlaySnd
;trigger1 = animelem = 6
;value = 0, ifelse(var(13)=1,0,2)
;channel = 0

[State 300, 効果音]
type = PlaySnd
trigger1 = animelem = 21
value = 300, 1


;[State 300, 効果音]
;type = PlaySnd
;trigger1 = animelem = 11
;value = 300, 0
;channel = 1

[State 300, 移動]
type = PosAdd
trigger1 = animelem = 3 || animelem = 4
x = 10

[State 300, 移動]
type = PosAdd
trigger1 = time = 4 || time = 6
x = 6

[State 300, 移動]
type = PosAdd
trigger1 = animelem = 10
x = 7

[State 300, 移動]
type = PosAdd
trigger1 = animelem = 11
x = 12

[State 300, 移動]
type = PosAdd
trigger1 = animelem = 12
x = 6


[State 300, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage= 20
priority  = 4, Hit
hitflag = MA
guardflag = MA
pausetime = 2,2
sparkno = 3
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,10
guardsound = S6,0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 15
guard.ctrltime = 15
ground.velocity = -2.5
guard.velocity = -5
air.velocity = -2.5,-4
airguard.velocity = -6,-1

[State 300, ヒット定義]
type = HitDef
trigger1 = AnimElem = 11 || AnimElem = 12
attr = S, NA
animtype  = Medium
damage= 20
priority  = 4, Hit
hitflag = MA
guardflag = MA
pausetime = 2,2
sparkno = 3
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,10
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
guard.slidetime = 15
ground.hittime  = 25
guard.ctrltime = 23
ground.velocity = -3
guard.velocity = -6
air.velocity = -3,-4
airguard.velocity = -6,-1
persistent=0

[State 300, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 3
persistent=0
v = 58
value = ceil(600*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 300, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 11 || animelem = 12
persistent=0
v = 58
value = ceil(600*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.06


[State 300, 追加入力]
type = VarSet
trigger1 = command = "x"
trigger1 = time > 25
v = 7                   
value = 1

[State 300, ステート変更]
type = ChangeState
trigger1 = var(7) = 1
trigger1 = Time = [35,51]
value = 200
ctrl = 0

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フォースエッジコンボ４
[Statedef 330]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
anim = 330
sprpriority = 2

[State 330, エフェクト]
type = Explod
trigger1 = animelem = 6
anim = 332
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 330, エフェクト]
type = Explod
trigger1 = animelem = 19
anim = 333
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = -1
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 330, ヘルパー]
type = Helper
trigger1 = animelem = 7
helpertype = normal
name = "efe1"
ID = 334
postype = p1
pos = 0,0
facing = 0
stateno = 334
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
IgnoreHitPause = 1

[State 330, エフェクト]
type = Explod
trigger1 = animelem = 41
anim = 1206
ID = 1206
scale = 0.5,0.5
postype = p1
pos = -12,-77
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 330, セリフ]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 3


[State 330, 効果音]
type = PlaySnd
trigger1 = animelem = 5
value = 5, 0


[State 330, セリフ]
type = PlaySnd
trigger1 = animelem = 19
value = 0, 5
channel = 0

[State 330, 効果音]
type = PlaySnd
trigger1 = animelem = 19
value = 300, 0

[State 330, 効果音]
type = PlaySnd
trigger1 = animelem = 29
value = 300, 1

[State 330, 効果音]
type = PlaySnd
trigger1 = animelem = 41
value = 5, 1

[State 330, 移動]
type = posadd
trigger1 = time = 35 || time = 41
x = 4

[State 330, 移動]
type = posadd
trigger1 = time = 36 || time = 37 || time = 38 || time = 39|| time = 40
x = 7

[State 330, ヒット定義]
type = HitDef
trigger1 = animelem = 5 || animelem = 6
attr = S, SA
animtype  = Medium
damage= 60
priority  = 5, Hit
hitflag = MA
guardflag = MA
pausetime = 5,5
sparkno = 3
guard.sparkno = S8000
sparkxy = -10, -60
hitsound = S1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 7
guard.slidetime = 16
ground.hittime  = 40
guard.ctrltime = 16
ground.velocity = -3
guard.velocity = -3
air.velocity = -2,-4
airguard.velocity = -7,-2
persistent=0



[State 330, ヒット定義]
type = HitDef
trigger1 = AnimElem = 19 || animelem = 20
attr = S, SA
animtype  = back
damage= 95
priority  = 5, Hit
hitflag = MA
guardflag = HA
pausetime = 5,5
sparkno = 3
guard.sparkno = S8000
sparkxy = -10, -72
hitsound = S1,11
guardsound = S6,0
ground.type = Low
ground.slidetime = 16
guard.slidetime = 16
ground.hittime  = 25
guard.ctrltime = 20
ground.velocity = -7,-3
guard.velocity = -8
air.velocity = -6,-3
airguard.velocity = -7,-2
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
persistent=0

[State 330, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 5 || animelem = 6
persistent=0
v = 58
value = ceil(1100*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 330, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 19 || animelem = 20
persistent=0
v = 58
value = ceil(1200*(1+(var(15)*0.1)-(var(14)*0.1)))


[State 330, コントロール]
type = CtrlSet
triggerall = var(59) = 0
trigger1 = animelem = 32
value = 1

[State 210, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = animelemtime(32) >= 0
trigger1 = enemynear,movetype = A
value = 1

[State 330, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animtime = -10
v = 58
value = ceil(3500*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 330, ゲージ]
type = PowerAdd
trigger1 = animtime = -10
value = 350

[State 330, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;エフェクトヘルパー
[Statedef 334]
type    = S
movetype= I
anim = 334
physics = S
juggle  = 4
ctrl = 0
sprpriority = 2

[State 334, 色]
type = PalFX
trigger1 = 1
time = 6
mul = 150,150,150

[State 334, 消える]
type = DestroySelf
trigger1 = animtime = 0
;===========================================================================
---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400+var(10)
sprpriority = 2
facep2 = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10400
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 400
elem = animelemno(0)

[State 400, 効果音]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random%2 = 1
value = 0, 0

[State 400, 効果音]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 400, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 20
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 8,9
sparkno = 1
sparkxy = -10,-42
hitsound   = 5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(500*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.06

[State 400, コントロール]
type = CtrlSet
trigger1 = Time = 5
value = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）

;---------------------------------------------------------------------------
;しゃがみ強パンチ(抜刀切り上げ)
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 10
ctrl = 0
anim = 410+var(10)
sprpriority = 2

[State 410, 変数]
type = Varset
trigger1 = enemynear,life >= 300 && P2bodydist X = [0,80]
trigger1 = power > 2000
trigger1 = time = 0
trigger1 = random%10 = [0,9]
trigger1 = var(59)
var(55) = 1 
persistent=0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10410
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 410
elem = animelemno(0)

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10413
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 420
elem = animelemno(0)

[state 50, 1];弾き後
type = changeanim
trigger1 = prevstateno = 901
trigger1 = anim = 410+var(10)
trigger1 = time = 0
value = 420+var(10)
elem = animelemno(0)

[State 410, セリフ]
type = PlaySnd
trigger1 = Time = 5
value = 0, 0
channel = 0

[State 410, ステートタイプ]
type = StateTypeSet
trigger1 = animelemtime(4) = 0
statetype = S

[State 410, 効果音]
type = PlaySnd
trigger1 = Time = 5
value = 5, 0

[State 410, 移動]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 410, エフェクト]
type = Explod
trigger1 = animelem = 3
anim = 414
scale = 0.5,0.6
postype = p1
pos = -20,-5
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 410, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = up
damage= 40
priority  = 5, Hit
hitflag = MA
guardflag = MA
pausetime = 5,5
sparkno = 11
guard.sparkno = S8000
sparkxy = -10, -60
hitsound = S1,11
guardsound = S6,0
ground.type = High
ground.slidetime = 16
guard.slidetime = 16
ground.hittime  = 16
guard.ctrltime = 16
ground.velocity = -1,-10
guard.velocity = -4
air.velocity = -1.5,-8
airguard.velocity = -7,-1
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
getpower = 10
givepower = 35, 35               
persistent = 0
yaccel = .5

[State 410, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(700*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.18

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 411
ctrl = 1

[State 410, エフェクト]
type = Explod
trigger1 = animelemtime(16) = 0
anim = 418
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 410, ステート変更];追加入力
type = ChangeState
triggerall = var(59) = 0
trigger1 = Command = "y"
trigger1 = AnimTime > -20
trigger2 = PrevStateNo = 901
trigger2 = AnimTime > -15
value = 412


;---------------------------------------------------------------------------
;納刀
[Statedef 411]
type    = s
movetype= I
physics = C
juggle  = 0
ctrl = 0
anim = 411+var(10)
sprpriority = 2
movehitpersist = 1

[State 330, コントロール]
type = CtrlSet
triggerall = var(59) = 0
trigger1 = time = 0
value = 1

[State 210, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = time > 0
trigger1 = enemynear,movetype = A
value = 1

[State 410, エフェクト]
type = Explod
trigger1 = animelemtime(1) = 0
anim = 419
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1
ID = 419

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10411
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 411
elem = animelemno(0)

[State 411, 効果音]
type = PlaySnd
trigger1 = Time = 35
value = 5, 1

[State 330, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1206
ID = 1206
scale = 0.5,0.5
postype = p1
pos = -12,-77
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 411, ゲージ]
type = PowerAdd
trigger1 = movehit
trigger1 = AnimTime = -5
value = 200

[State 411, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animtime = -5
v = 58
value = ceil(2800*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 411, スタポ]
type = Varadd
triggerall = enemynear,movetype = H
triggerall = movehit
trigger1 = AnimTime = 0
persistent=0
v = 58
value = enemy,GethitVar(hitcount)*400

[State 411, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;切り下ろし
[Statedef 412]
type    = S
movetype= A
physics = C
juggle  = 6
poweradd= 10
ctrl = 0
anim = 412+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10412
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 412
elem = animelemno(0)

[State 412, セリフ]
type = PlaySnd
trigger1 = animelem = 8
value = 0, 5
channel = 0

[State 412, 効果音]
type = PlaySnd
trigger1 = animelem = 8
value = 5, 3

[State 412, 移動]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 412, エフェクト]
type = Explod
trigger1 = time = 12
anim = 415
scale = 0.5,0.5
postype = p1
pos = -15,-5
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 412, エフェクト]
type = Explod
trigger1 = time = 14
anim = 416
scale = 0.5,0.5
postype = p1
pos = 40,0
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1


[State 412, エフェクト]
type = Explod
trigger1 = time = 18
anim = 417
scale = 0.5-(time*0.01),0.5-(time*0.01)
postype = p1
pos = 40,0
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 412, 移動]
type = Velset
trigger1 = time = 8
x = 15

[State 412, 移動]
type = Velset
trigger1 = time = 13
x = 0

[State 412, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = back
damage= 80
priority  = 5, Hit
hitflag = MAF
guardflag = MA
pausetime = 10,10
sparkno = 11
guard.sparkno = S8000
sparkxy = -10, -100
hitsound = S1,12
guardsound = S6,0
ground.type = High
ground.slidetime = 16
guard.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -9,-2
guard.velocity = -8
air.velocity = -8,-3
airguard.velocity = -7,-1
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 10
givepower = 35, 35  

[State 412, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 412, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 413
ctrl = 1

;---------------------------------------------------------------------------
;納刀
[Statedef 413]
type    = s
movetype= I
physics = C
juggle  = 0
ctrl = 0
anim = 413+var(10)
sprpriority = 2
movehitpersist = 1

[State 330, コントロール]
type = CtrlSet
triggerall = var(59) = 0
trigger1 = time = 0
value = 1

[State 210, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = time > 0
trigger1 = enemynear,movetype = A
value = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10413
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 413
elem = animelemno(0)

[State 413, 効果音]
type = PlaySnd
trigger1 = animelem = 14
value = 5, 1

[State 330, エフェクト]
type = Explod
trigger1 = animelem = 17
anim = 1206
ID = 1206
scale = 0.5,0.5
postype = p1
pos = -12,-77
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 413, ゲージ]
type = PowerAdd
trigger1 = movehit
trigger1 = animelem = 17
value = 350

[State 413, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 17
v = 58
value = ceil(2500*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 413, スタポ]
type = Varadd
triggerall = enemynear,movetype = H
triggerall = movehit
trigger1 = AnimTime = 0
persistent=0
v = 58
value = enemy,GethitVar(hitcount)*400

[State 413, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 430+var(10)
sprpriority = 2

[State 300, 追加入力]
type = VarSet
trigger1 = time = 0
v = 7                   
value = 0

[State 300, 追加入力]
type = VarSet
trigger1 = command = "x" || command = "a"
trigger1 = time > 1
v = 7                   
value = 1

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10430
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 430
elem = animelemno(0)

[State 430, セリフ]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random = [0,499]
value = 0, 2

[State 430, 効果音]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 3300, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 431
ID = 431
scale = 0.5,0.5
postype = p1
pos = 25,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 430, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 20
animtype  = Light
hitflag = MA
guardflag = L
pausetime = 6,6
sparkno = 0
guard.sparkno = S8000
sparkxy = -10,-8
hitsound = 5, 1
guardsound = S6,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -4
air.velocity = -2,-3

[State 430, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(500*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.06

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強キック
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10440
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 440
elem = animelemno(0)

[State 440, セリフ]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random = [0,600]
value = 0, 0

[State 440, 効果音]
type = PlaySnd
trigger1 = Time = 4
value = 2, 1

[State 3300, エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 441
ID = 441
scale = 0.5,0.5
postype = p1
pos = 15,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 440, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
animtype  = mid
hitflag = MA
guardflag = L
pausetime = 12,12
sparkno = 1
guard.sparkno = S8000
sparkxy = -5,-10
hitsound = 5, 1
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -4
air.velocity = -1.2,-3

[State 440, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(700*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
;ジャンプ弱パンチ(空中連斬１段目)
[Statedef 600]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
anim = 610+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10610
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 610
elem = animelemno(0)

[State 600,摩擦]
type = VelMul
trigger1 = time = 0
x = .15
y = .15

[State 600, セリフ]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = random = [0,500]
value = 0, 0
channel = 0

[State 600, 効果音]
type = PlaySnd
trigger1 = animelem = 2
value = 5, 0

[State 600,エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 613
ID = 613
pos = -10, -27
postype = p1
facing = 1
vfacing = 1
bindtime = 10
scale = 0.5, 0.5
sprpriority = 4
ownpal = 0
removeongethit = 1

[State 600,エフェクト]
type = Explod
trigger1 = animelem = 7
anim = 614
ID = 614
pos = -20, -30
postype = p1
facing = 1
vfacing = 1
bindtime = 11
scale = 0.4, 0.5
sprpriority = 3
ownpal = 0
removeongethit = 1

[State 600,エフェクト]
type = null;Explod
trigger1 = animelem = 7
anim = 614
ID = 614
pos = -20, -85
postype = p1
facing = 1
vfacing = -1
bindtime = 11
scale = 0.4, 0.45
sprpriority = 2
ownpal = 0
removeongethit = 1



[State 600, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 20
guardflag = HA
priority = 4
pausetime = 4,2
sparkno = 1
guard.sparkno = S8000
sparkxy = -50,-55
hitsound   = S1,10
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 20
ground.velocity = -5
air.velocity = -4,-2
air.cornerpush.veloff = -7
ground.cornerpush.veloff = -7
numhits = 2
ground.hittime = 20
air.hittime = 20
fall.recovertime = 30

[State 600, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(800*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.06

[State 600, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.2

[State 600, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
physics = A


[State 600, 追加入力]
type = ChangeState
trigger1 = Command = "y"
trigger1 = Time > 18
trigger1 = Pos Y <= -25
value = 610
;---------------------------------------------------------------------------
;ジャンプ強パンチ(空中連斬２段目)
[Statedef 610]
type    = A
movetype= A
physics = N
juggle  = 70
poweradd= 65
ctrl = 0
anim = 611+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10610
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 610
elem = animelemno(0)

[State 610,摩擦]
type = VelMul
trigger1 = time = 0
x = .15
y = .15

[State 610,摩擦]
type = Velset
trigger1 = time = 8
x = 6

[State 610,摩擦]
type = VelMul
trigger1 = time = 10
x = .15

[State 610, 効果音]
type = PlaySnd
trigger1 = animelem = 2
value = 5, 3
channel = 0

[State 610, セリフ]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 5

[State 610,エフェクト]
type = Explod
trigger1 = animelem = 5
anim = 614
ID = 614
pos = -50, -60
postype = p1
facing = 1
vfacing = 1
bindtime = 11
scale = 0.5, 0.5
sprpriority = 4
ownpal = 0
removeongethit = 1


[State 610, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 45
guardflag = HA
priority = 4
pausetime = 4,2
sparkno = 1
guard.sparkno = S8000
sparkxy = -50,-55
hitsound   = S1,12
guardsound = S6,0
animtype = DiagUp
fall = 1
fall.recover=0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8,-4
air.velocity = -8,-4

[State 610, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(1300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 610, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 8
physics = A
;---------------------------------------------------------------------------
;ジャンプ弱キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = 630+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10630
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 630
elem = animelemno(0)

[State 630, 大きさ]
type = AngleDraw
trigger1 = 1
scale = 0.94,0.94

[State 630, 大きさ]
type = AngleDraw
trigger1 = animelem = 7
scale = 1.06,1.06

[State 630, セリフ]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random%2 = 1
value = 0, 2

[State 630, 効果音]
type = PlaySnd
trigger1 = Time = 1
value = 2, 2

[State 630, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 26
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 1
guard.sparkno = S8000
sparkxy = -5,-35
hitsound   = 5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -4
air.velocity = -2,-3

[State 630, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(500*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.06

;---------------------------------------------------------------------------
;ジャンプ強キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 640+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10640
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 640
elem = animelemno(0)

[State 640, 効果音]
type = PlaySnd
trigger1 = time = 4
value = 2, 3
channel = 1

[State 640, 効果音]
type = PlaySnd
trigger1 = Time = 2 && Random <= 500
value = 0, 1
channel = 0

[State 640, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage    = 70
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-40
hitsound   = S1,13
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,-4

[State 640, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(600*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.02

;---------------------------------------------------------------------------
;ダウン回避
[Statedef 702]
type = S
movetype = I
physics = N
poweradd= 0
ctrl = 0
anim = 702+var(10)
sprpriority = 2
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10702
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 702
elem = animelemno(0)

[state 702, 移動]
type = posset
trigger1 = time = 0
y = 0

[State 702, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 702, ぶつかり]
type = playerpush
trigger1 = 1
value = 0

[State 702, セリフ]
type = PlaySnd
trigger1 = Time = 1
value = 700, ifelse(random < 700,0,ifelse(random <850 ,1,2))


[State 702, 移動]
type = Velset
trigger1 = AnimElemTime(2) > 0
x = -1

[State 702, 摩擦]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = 0.8


[State 702, 残像]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 0,0,0
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[state 702, 残像]
type = afterimagetime
trigger1 = animtime = 0
time = 0


[State 702, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;===========================================================================
;エアトリック地上
[Statedef 2000]
type = S
movetype = A
physics = N
anim = 2000+var(10)
ctrl = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2000
elem = animelemno(0)

[State 2000, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2000, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2000, エフェクト]
type = Explod
trigger1 = animelem = 3
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 2000, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.90

[State 2000, 変数]
type = VarSet
trigger1 = time = 0
var(5) = ifelse(P2BodyDist X >= 190, 1, 0)

[State 2000, 移動]
type = PosAdd
triggerall = var(5) = 1
trigger1 = animtime = 0
x = 150

[State 2000, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = 1
x = enemynear,pos x-40
y = 0

[State 2000, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = -1
x = enemynear,pos x+40
y = 0


[State 2000, statetypeset]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 2000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2003
ctrl = 0

;===========================================================================
;エアトリック地上
[Statedef 2001]
type = S
movetype = I
physics = N
anim = 2000+var(10)
ctrl = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2000
elem = animelemno(0)

[State 2001, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2001, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2001, エフェクト]
type = Explod
trigger1 = animelem = 3
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 2001, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.90


[State 2001, 移動]
type = PosAdd
trigger1 = animtime = 0
x = 80

[State 2001, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2003
ctrl = 0
;===========================================================================
;エアトリック空中
[Statedef 2010]
type = A
movetype = I
physics = A
anim = 2040+var(10)
ctrl = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12040
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2040
elem = animelemno(0)

[State 2010, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2010, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2010, エフェクト]
type = Explod
trigger1 = time = 5
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 2010, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.75

[State 2010, 摩擦]
type = velmul
trigger1 = 1
y = 0.3

[State 2010, 変数]
type = VarSet
trigger1 = time = 0
var(5) = ifelse(P2BodyDist X >= 190, 1, 0)

[State 2010, 移動]
type = PosAdd
triggerall = var(5) = 1
trigger1 = animtime = 0
x = 150


[State 2010, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = 1
x = enemynear,pos x-40


[State 2010, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = -1
x = enemynear,pos x+40

[State 2010, 移動]
type = posset
trigger1 = animtime = 0
y = 0


[State 2010, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2003
ctrl = 0

;===========================================================================
;===========================================================================
;トリックアップ地上
[Statedef 2020]
type = S
movetype = I
physics = N
anim = 2000+var(10)
ctrl = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2000
elem = animelemno(0)

[State 2020, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2020, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2020, エフェクト]
type = Explod
trigger1 = animelem = 3
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 2020, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.90

[State 2020, 変数]
type = VarSet
trigger1 = time = 0
var(5) = ifelse(P2BodyDist X >= 140, 1, 0)

[State 2020, 変数]
type = VarSet
trigger1 = time = 0
var(16) = 1


[State 2020, 移動]
type = PosAdd
triggerall = var(5) = 1
trigger1 = animtime = 0
x = 100


[State 2020, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = -1
x = enemynear,pos x+40

[State 2020, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = 1
x = enemynear,pos x-40

[State 2020, 移動]
type = PosAdd
trigger1 = animtime = 0
y = -130

[State 610, StateTypeSet]
type = StateTypeSet
trigger1 = animtime = 0
statetype = A

[State 2020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2013
ctrl = 0

;===========================================================================
;トリックアップ空中
[Statedef 2030]
type = A
movetype = I
physics = A
anim = 2040+var(10)
ctrl = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12040
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2040
elem = animelemno(0)

[State 2030, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2030, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2030, エフェクト]
type = Explod
trigger1 = time = 5
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 2030, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.75

[State 2030, 摩擦]
type = velmul
trigger1 = 1
y = 0.3

[State 2030, 変数]
type = VarSet
trigger1 = time = 0
var(5) = ifelse(P2BodyDist X >= 140, 1, 0)

[State 2030, 移動]
type = PosAdd
triggerall = var(5) = 1
trigger1 = animtime = 0
x = 100

[State 2030, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = 1
x = enemynear,pos x-40

[State 2030, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animtime = 0
Trigger1 = Facing = -1
x = enemynear,pos x+40

[State 2030, 移動]
type = PosAdd
trigger1 = animtime = 0
y = -100

[State 2030, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2013
ctrl = 0

;===========================================================================
;トリックダウン地上
[Statedef 2040]
type = S
movetype = A
physics = N
anim = 2000+var(10)
ctrl = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2000
elem = animelemno(0)

[State 2040, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2040, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2040, エフェクト]
type = Explod
trigger1 = animelem = 3
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 2040, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.90

[State 2040, 移動]
type = posadd
trigger1 = animtime = 0
x = -100

[State 2040, statetypeset]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 2040, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2003
ctrl = 0

;===========================================================================
;トリックダウン空中
[Statedef 2050]
type = A
movetype = I
physics = A
anim = 2040+var(10)
ctrl = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12040
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2040
elem = animelemno(0)

[State 2050, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2050, 効果音]
type = PlaySnd
trigger1 = animelem = 3
value = 2000, 0

[State 2050, エフェクト]
type = Explod
trigger1 = time = 5
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removeongethit = 1

[State 2050, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.75

[State 2050, 摩擦]
type = velmul
trigger1 = 1
y = 0.3

[State 2050, 移動]
type = PosAdd
trigger1 = animtime = 0
x = -100

[State 2050, 移動]
type = posset
trigger1 = animtime = 0
y = 0

[State 2050, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2003
ctrl = 0
;===========================================================================
;ワープ後地上
[Statedef 2003]
type    = S
physics = S
ctrl = 0
anim = 2010+var(10)
velset = 0,0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 12010
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 2010
elem = animelemno(0)

[State 2003, 効果音]
type = playsnd
trigger1 = prevstateno = [2600,2610]
trigger1 = Time = 0
value = 47, 0

[State 2003, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2003, コントロール]
type = CtrlSet
triggerall = var(59) = 0 
trigger1 = animtime = -3
value = 1

[State 2003, コントロール]
type = CtrlSet
triggerall = var(59)
trigger1 = animtime = -3
trigger1 = p2movetype != H
value = 1

[State 2003, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;ワープ後空中
[Statedef 2013]
type    = A
physics = A
ctrl = 0
anim = 2030

[State 2013, コントロール]
type = CtrlSet
trigger1 = time = 4
value = 1

[State 2013, 速度]
type = Velset
trigger1 = time = 0
x = 2
y = -3

[State 2013, 変数]
type = VarSet
trigger1 = time = 0
var(16) = 1

[State 2013, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0
value = 52
ctrl = 1

;===========================================================================
; 投げ技
;===========================================================================
;投げ
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10800
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 800
elem = animelemno(0)

[State 800, 声]
type = PlaySnd
trigger1 = AnimElem = 1
value = 700,0
channel = 0

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, NT ;立ち通常投げ（Standing, Normal Throw）
hitflag = M-  ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkno = -1  ;-1だからヒットスパークは表示しない
p1sprpriority = 1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 801
p2stateno = 820
guard.dist = 0 ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ：成功（掴む）
[Statedef 801]
type    = S
movetype= A
physics = N
anim = 801+var(10)
poweradd = 60

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10801
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 801
elem = animelemno(0)

[State 800, 声]
type = PlaySnd
trigger1 = AnimElem = 1
value = 800,1

[State 800, 声]
type = PlaySnd
trigger1 = time = 52
value = 800,0
channel = 0



[State 3001, 1]
type = Width
trigger1 = animelem = 3
edge = 75,0

[State -3, 3];腰
type = targetbind
trigger1 = animelem = 3
pos = 55,-40

[State -3, 3];
type = targetstate
trigger1 = animelem = 3
value = 820


[State -3, 3];
type = targetstate
trigger1 = time = 95
value = 821

[State -3, 3];
type = targetlifeadd
trigger1 = time = 95
value = -90

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 800

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 801

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 802

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 803

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 804

[State 4100,1];
type = Helper
trigger1 = Animelem = 4
name = "sippu"
postype = p2
pos = -5,-50
sprpriority = 2
stateno = 802
helpertype = normal
keyctrl = 0
ownpal = 1
ID = 805

[State 1200, スタポ]
type = Varadd
trigger1 = animelem = 8
persistent=0
v = 58
value = ceil(800*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
;烈風幻影剣(ヘルパー)
[Statedef 802]
type     = S
movetype = I
physics  = N
ctrl     = 0
sprpriority = 5

[State 200, 1]
type = Trans
trigger1 = 1
trans = add


[State 200, 1]
type = VarSet
trigger1 = 1
var(13) = AnimElemNo(0)

[State 200, 1]
type = VarSet
trigger1 = IsHelper(800)
var(55) = 0

[State 200, 1]
type = VarSet
trigger1 = IsHelper(801)
var(55) = 1

[State 200, 1]
type = VarSet
trigger1 = IsHelper(802)
var(55) = 2

[State 200, 1]
type = VarSet
trigger1 = IsHelper(803)
var(55) = 3

[State 200, 1]
type = VarSet
trigger1 = IsHelper(804)
var(55) = 4

[State 200, 1]
type = VarSet
trigger1 = IsHelper(805)
var(55) = 5


[State 0]
type = SprPriority
trigger1 = IsHelper(800)
trigger1 = animelem = 1
trigger2 = IsHelper(801)
trigger2 = animelem = 1 || animelem = 16
trigger3 = IsHelper(802)
trigger3 = animelem = 1 || animelem = 13
trigger4 = IsHelper(803)
trigger4 = animelem = 10
trigger5 = IsHelper(804)
trigger5 = animelem = 6
trigger6 = IsHelper(805)
trigger6 = animelem = 4
value = -5

[State 0]
type = SprPriority
trigger1 = IsHelper(800)
trigger1 = animelem = 10
trigger2 = IsHelper(801)
trigger2 = animelem = 7
trigger3 = IsHelper(802)
trigger3 = animelem = 4
trigger4 = IsHelper(803)
trigger4 = animelem = 1
trigger5 = IsHelper(804)
trigger5 = animelem = 1 || animelem = 16
trigger6 = IsHelper(805)
trigger6 = animelem = 1 || animelem = 13
value = 5

[State 0]
type = changeanim
trigger1 = IsHelper(800)
trigger1 = time = 0
value = 810
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(801)
trigger1 = time = 0
value = 811
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(802)
trigger1 = time = 0
value = 812
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(803)
trigger1 = time = 0
value = 813
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(804)
trigger1 = time = 0
value = 814
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(805)
trigger1 = time = 0
value = 815
persistent = 1

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 1
value = 8000, 0

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 78
value = 8000, 1

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 80
value = 8000, 2

[State 1000, エフェクト]
type = Explod
trigger1 = time = 80
anim = 8512
scale = 0.5,0.5
postype = p1
pos = 0,0
ownpal = 1

[State 440, 速度]
type = Velset
trigger1 = IsHelper(800)
trigger1 = time = 60
x = -3

[State 440, 速度]
type = Velset
trigger1 = IsHelper(801)
trigger1 = time = 60
x = -2.5
y = -1

[State 440, 速度]
type = Velset
trigger1 = IsHelper(802)
trigger1 = time = 60
x = 1.5
y = -1.5

[State 440, 速度]
type = Velset
trigger1 = IsHelper(803)
trigger1 = time = 60
x = 3

[State 440, 速度]
type = Velset
trigger1 = IsHelper(804)
trigger1 = time = 60
x = 2.5
y = 1

[State 440, 速度]
type = Velset
trigger1 = IsHelper(805)
trigger1 = time = 60
x = -1.5
y = 1.5


[State 440, 速度]
type = Velset
trigger1 = IsHelper(800)
trigger1 = time = 75
x = 15

[State 440, 速度]
type = Velset
trigger1 = IsHelper(801)
trigger1 = time = 75
x = 12
y = 4

[State 440, 速度]
type = Velset
trigger1 = IsHelper(802)
trigger1 = time = 75
x = -9
y = 6

[State 440, 速度]
type = Velset
trigger1 = IsHelper(803)
trigger1 = time = 75
x = -15

[State 440, 速度]
type = Velset
trigger1 = IsHelper(804)
trigger1 = time = 75
x = -12
y = -4

[State 440, 速度]
type = Velset
trigger1 = IsHelper(805)
trigger1 = time = 75
x = 9
y = -6


[State 200, 消滅]
type = DestroySelf
trigger1 = time > 100


;===================================================================
;カンフースルー：相手側１（掴まれて放り投げられるまで）
[Statedef 820]
type    = S
movetype= H
physics = N
juggle  = 4
poweradd = 0
velset = 0,0
ctrl = 0
sprpriority = -1

[State 821, 4]
type = changeanim2
trigger1 = time = 0
value = 820

[State 821, 相手ステートに戻す]
type = SelfState
trigger1 = time > 200
value = 5100

;---------------------------------------------------------------------------
;カンフースルー：相手側２（放り投げられた）
[Statedef 821]
type    = A
movetype= H
physics = N
velset = -2.8,-4
poweradd = 40

[State 821, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .4 ;現在のＹ軸方向の移動速度を「0.4ポイント」ずつ増やしていく

[State 821, 4]
type = changeanim2
trigger1 = time = 0
value = 822

[State 821, ステート変更]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive      ;生きている時
triggerall = CanRecover ;空中受け身が可能な時
trigger1 = Command = "recovery"
value = 5200

[State 821, 相手ステートに戻す]
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 821, 相手ステートに戻す]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;===========================================================================
;弾き
[Statedef 900]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 900+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10900
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 900
elem = animelemno(0)

[State 900, 追加入力]
type = VarSet
trigger1 = 1
v = 7                   
value = 0

[State 900, 残像]
type = AfterImage
trigger1 = time = 0
time = 5
framegap = 4

[State 900, セリフ]
type = PlaySnd
trigger1 = Time = 5
channel = 0
value = 700, 0


[State 900, リバサ定義]
type = ReversalDef
trigger1 = 1
reversal.attr = SA,AA
numhits = 0
pausetime = 5,5
sparkno = 3
sparkxy = 50,-45
hitsound = S1300,4
p1stateno = 901
p2stateno = ifelse(p2statetype = A,903,902)

[State 900, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弾き成功Ｐ１
[Statedef 901]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 901+var(10)
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10901
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 901
elem = animelemno(0)

[State 901, スタポ]
type = Varadd
trigger1 = time = 0
v = 58
value = 1500


[State 901, 追加入力]
type = VarSet
trigger1 = command = "QCB_x"
v = 7                   
value = 1

[State 901, 追加入力]
type = VarSet
trigger1 = command = "DTsissou"
v = 7                   
value = 2

[State 901, 追加入力]
type = VarSet
trigger1 = command = "down_y"
v = 7                   
value = 3

[State 901, ステート変更]
type = ChangeState
trigger1 = var(7) = 3
trigger1 = Time = 11
value = 410
ctrl = 0

[State 901, ステート変更]
type = ChangeState
trigger1 = var(7) = 1
trigger1 = Time = 11
value = 1200
ctrl = 0

[State 901, ステート変更]
type = ChangeState
trigger1 = var(7) = 2
trigger1 = Time = 11
value = 3200
ctrl = 0

[State 901, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弾き成功Ｐ２地上
[Statedef 902]
type    = S
movetype= H
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
sprpriority = 2

[State 902, アニメ変更]
type = Changeanim
triggerall = Time = 0 && SelfAnimExist(5910)
trigger1 = Time = 0
value = 5910

[State 902, アニメ変更]
type = Changeanim
trigger1 = Time = 0 && anim != 5940 && anim != 5910
value = 5002

[State 902, アニメ変更]
type = Changeanim
trigger1 = animTime = 0
trigger1 = anim = 5002
value = 5007

[State 105, 自分のステートへ]
type = SelfState
trigger1 = Time >= 33
value = 0
ctrl = 1

;===========================================================================
;弾き成功空中Ｐ２
[Statedef 903]
type = A
movetype = A
physics = N

[State 903, 速度]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 903, アニメ変更]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 903, ステート変更]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 904

;===========================================================================
;弾き成功空中Ｐ２
[Statedef 904]
type = A
movetype = A
physics = N
velset = 0,0

[State 904, 速度]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-2,2)
y = -4

[State 904, 速度]
type = VelAdd
trigger1 = Time >= 2
y = .4

[State 904, アニメ変更]
type = ChangeAnim
trigger1 = Time = 5
value = 5040

[State 904, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 905

;===========================================================================
;弾き成功空中Ｐ２（着地）
[Statedef 905]
type = S
movetype = I
physics = S
velset = 0,0

[State 905, 移動]
type = posset
trigger1 = Time = 0
y = 0

[State 905, 自分のステートへ]
type = SelfState
trigger1 = Time = 0
value = 52

[State 905, 自分のステートへ]
type = ChangeState
trigger1 = Time = 0
value = 52

;---------------------------------------------------------------------------
;飛び道具かき消し
[Statedef 950]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 950+var(10)
sprpriority = 2

[state 950, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10950
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 950
elem = animelemno(0)


[State 950, ヒット定義]
type = hitdef
trigger1 = 1
attr = S, NA
animtype = back
damage   = 20,0
priority  = 4, Hit
hitflag = MAF
guardflag = MA
pausetime = 0,10
sparkno = 11
guard.sparkno = S8000
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -4,-4
guard.velocity = -6
air.velocity = -4,-4
fall.recover=0
fall = 1
persistent=0

[State 7006, ヘルパー]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "953"
ID = 953
pos = 0, 0
postype = p1
facing = 1
stateno = 953
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.5
size.yscale = 0.5



[State 950, エフェクト]
type = Explod
trigger1 = animelem = 4
anim = 952
ID = 952
scale = 0.6,0.6
postype = p1
pos = -25,10
sprpriority = 5
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1
IgnoreHitPause = 1
persistent = 0

[State 950, 効果音]
type = PlaySnd
trigger1 = animelem = 4
value = 1400, 0
channel = 2


[State 900, ステート変更]
type = ChangeState
triggerall = var(59) = 0
trigger1 = Animelem = 14
trigger1 = Command != "hold_x"
value = 951
ctrl = 0

[State 900, ステート変更]
type = ChangeState
triggerall = var(59)
trigger1 = Animelem = 14
trigger1 = !(enemynear,NumProj >= 1)
trigger1 = !(enemynear,HitDefAttr = SCA, AP)
trigger2 = !(roundstate = 2)
value = 951
ctrl = 0

;---------------------------------------------------------------------------
;飛び道具かき消し終了
[Statedef 951]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 951+var(10)
sprpriority = 2

[state 951, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10951
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 951
elem = animelemno(0)

[State 950, エフェクト]
type = Explod
trigger1 = time = 0
anim = 953
ID = 953
scale = 0.6,0.6
postype = p1
pos = -25,10
sprpriority = 5
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1
persistent = 0

[State 951, 効果音]
type = PlaySnd
trigger1 = animelem = 5
value = 5, 1

[State 951, エフェクト]
type = Explod
trigger1 = animelem = 6
anim = 1206
ID = 1206
scale = 0.5,0.5
postype = p1
pos = -7,-67
sprpriority = 6
ownpal = 1
bindtime = -1
removeongethit = 1
IgnoreHitPause = 1

[State 951, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 953]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 954
ctrl = 0
sprpriority = -1

[State 1401]
type = NotHitBy
trigger1 = 1
value = , AAT
time = 9999

[State 953, ヒット定義]
type = hitdef
trigger1 = 1
attr = S, NA
hitflag = P
p1stateno = 954

[State 953, ヒット定義]
type = HitOverride
trigger1 = 1
attr = SCA,AP
slot = 1
stateno = 954
time = 9999

[State 7041, 消す]
type = DestroySelf
trigger1 = root,stateno != 950
;---------------------------------------------------------------------------
[Statedef 954]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 954
ctrl = 0
sprpriority = -1

[State 1401]
type = NotHitBy
trigger1 = 1
value = , AAT
time = 9999

[State 953, ヒット定義]
type = hitdef
trigger1 = 1
attr = S, NA
hitflag = P
p1stateno = 954

[State 953, ヒット定義]
type = HitOverride
trigger1 = 1
attr = SCA,AP
slot = 1
stateno = 954
time = 9999

[State 951, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 953
ctrl = 0

[State 7041, 消す]
type = DestroySelf
trigger1 = root,stateno != 950
;===========================================================================
; 必殺技
;===========================================================================
;次元斬
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000+var(10)
ctrl = 0
sprpriority = 2

[State 1000, 変数]
type = Varset
trigger1 = Time = 0
v = 9                   
value = 0

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11000
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1000
elem = animelemno(0)

[State 1000, セリフ]
type = PlaySnd
trigger1 = Time = 1
value = 0, 3

[State 1000, 効果音]
type = PlaySnd
trigger1 = Time = 15
channel = 0
value = 1000, 0

[State 1000, 移動]
type = velset
trigger1 = AnimElem = 3
x = -10

[State 1000, 移動]
type = velset
trigger1 = AnimElem = 4
x = -20

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 5
x = -15

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 6
x = -10

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 7
x = -8

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 9
x = -4

[State 1010, 速度]
type = velset
trigger1 = AnimElem = 11
x = 0

[State 1010, 幅]
type = Width
trigger1 = 1
value = 50,30

[State 1000, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 7000
scale = 0.5,0.5
postype = p1
pos = -40,-50
sprpriority = 4
;supermove = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = Helper
trigger1 = time = 13
helpertype = normal
name = "zigeneffect"
ID = 7005
pos = 10,-20
postype = p1
facing = 1
stateno = 7005
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.25+var(7)*0.25
size.yscale = 0.5+var(7)*0.1

[State 1000, 変数]
type = VarSet
trigger1 = Time = 0
v = 8                   
value = 0

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "x"
trigger2 = Time >= 36
trigger2 = command = "x"
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "a"
trigger2 = Time >= 36
trigger2 = command = "a"
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "y"
trigger2 = Time >= 36
trigger2 = command = "y"
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
trigger1 = command = "b"
trigger2 = Time >= 36
trigger2 = command = "b"
v = 7                   
value = 4

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = p2bodydist X = [0,100]
trigger2 = Time >= 36
trigger2 = p2bodydist X = [0,100]
v = 7                   
value = 1

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time >= 36
trigger1 = p2bodydist X = [100,150]
v = 7                   
value = 2

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time >= 36
trigger1 = p2bodydist X = [150,200]
v = 7                   
value = 3

[State 1000, 変数]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = p2bodydist X >= 100
trigger2 = Time >= 36
trigger2 = p2bodydist X >= 200
v = 7                   
value = 4



[State 1000, ヘルパー]
type = Helper
trigger1 = time = 30
helpertype = normal
name = "zigen1"
ID = 7003
pos = 20+var(7)*60, -20
postype = p1
facing = 1
stateno = 7003
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, 追加入力]
type = VarSet
triggerall = var(59) = 0 
trigger1 = time >= 36
trigger1 = Command = "x" ||Command = "y" ||Command = "a" ||Command = "b" 
v = 8                   
value = 1

[State 1000, 追加入力]
type = VarSet
triggerall = var(59) 
trigger1 = time >= 36
trigger1 = var(7) 
v = 8                   
value = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(8) = 1
value = 1001

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(8) = 0
value = 1002
ctrl = 0
;---------------------------------------------------------------------------
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1001+var(10)
ctrl = 0
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11001
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1001
elem = animelemno(0)

[State 1001, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 7000
scale = 0.5,0.5
postype = p1
pos = -40,-50
sprpriority = 4
;supermove = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1001, 変数]
type = Varadd
trigger1 = Time = 0
v = 9                   
value = 1

[State 1001, 変数]
type = VarSet
trigger1 = Time = 0
v = 8                   
value = 0

[State 1001, 追加入力]
type = VarSet
trigger1 = var(59) = 0
trigger1 = Command = "x" ||Command = "y" ||Command = "a" ||Command = "b" 
trigger2 = p2bodydist X >= 0 && var(59)
v = 8                   
value = 1

[State 1001, 追加入力]
type = VarSet
triggerall = var(59) = 0
trigger1 = command = "x"
trigger1 = time > 5
v = 7                   
value = 1

[State 1001, 追加入力]
type = VarSet
triggerall = var(59) = 0
trigger1 = command = "a"
trigger1 = time > 5
v = 7                   
value = 2

[State 1001, 追加入力]
type = VarSet
triggerall = var(59) = 0
trigger1 = command = "y"
trigger1 = time > 5
v = 7                   
value = 3

[State 1001, 追加入力]
type = VarSet
triggerall = var(59) = 0
trigger1 = command = "b"
trigger1 = time > 5
v = 7                   
value = 4

[State 1001, 追加入力]
type = VarSet
triggerall = var(59)
trigger1 = p2bodydist X = [0,150]
trigger1 = time > 5
v = 7                   
value = ifelse((p2bodydist X = [0,100]),1,2)

[State 1001, 追加入力]
type = VarSet
triggerall = var(59)
trigger1 = p2bodydist X > 150
trigger1 = time > 5
v = 7  
value = ifelse((p2bodydist X = [151,200]),3,4)

[State 1001, ヘルパー]
type = Helper
trigger1 = time = 5
trigger1 = var(9) < 2
helpertype = normal
name = "zigen1"
ID = 7003
pos = 20+var(7)*60, -20
random = 0, 20
postype = p1
facing = 1
stateno = 7003
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1001, ヘルパー]
type = Helper
trigger1 = time = 5
trigger1 = var(9) >= 2
helpertype = normal
name = "zigen1"
ID = 7006
pos = 20+var(7)*60, -20
random = 0, 20
postype = p1
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1001, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(8) = 1
trigger1 = var(9) <= 1
value = 1001

[State 1001, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = var(8) = 0 || var(9) >= 2
value = 1002
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 1002]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1002+var(10)
ctrl = 0
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11002
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1002
elem = animelemno(0)

[State 1002, 変数]
type = VarSet
trigger1 = Time = 0
v = 9                   
value = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
:次元斬発生ヘルパー
[Statedef 7003]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 7003
ctrl = 0
sprpriority = -1

[State 7003, 振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2BodyDist X < 0

[State 7003, エフェクト]
type = Explod
trigger1 = time = 0
anim = 7002
scale = 0.45,0.45
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 7003, ヘルパー];判定
type = Helper
trigger1 = animelem = 16
helpertype = normal
name = "zigen2"
ID = 7004
pos = 0, 8
postype = p1
facing = 1
stateno = 7004
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 7003, 効果音]
type = PlaySnd
trigger1 = animelem = 12
value = 1000, 2
channel = 0

[State 7003, 消す]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;判定
[Statedef 7004]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 7004
ctrl = 0
sprpriority = 5

[State 7004, ヒット定義]
type = hitdef
trigger1 = time = 0
attr = S, SP
animtype = medium
damage   = 50,3
priority  = 4, Hit
hitflag = MAFP
guardflag = MA
pausetime = 0,10
sparkno = 11
guard.sparkno = S8000
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -6
guard.velocity = -4
air.velocity = -3,-2.5
persistent=0

[State -2, damage]
type = AttackMulSet
trigger1 = roundstate = 2
value = 1-root,fVar(10)

[State 7004, スタポ]
type = Helper
triggerall = enemynear,movetype = H
triggerall = movehit = 1
trigger1 = enemy,GethitVar(hitcount) >= 1
id = 7041
name = "time"
pos = 0,-200
postype = back
stateno = 7041
helpertype = normal
bindtime = -1
keyctrl = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 7004, 消す]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;次元斬エフェクト
[Statedef 7005]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 7001
ctrl = 0
sprpriority = 5

[State 7005, パレット効果]
type=palfx
trigger1= time = 1
time=55
sinadd=-100,-50,-100,480

[State 7005, エフェクト]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
[Statedef 7041];ヘルパー攻撃スタポ制御
type    = S
movetype= I
physics = S
anim = 7008
ctrl = 0

[State 7041, クリップボード（追加専用）]
type = DisplayToClipboard
trigger1 = 1
text = "%d,%d,%d,%f,%f"
params = var(58),var(14),var(2),fvar(0),fvar(1)


[State 7041, スタポ]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = [7004,7007]
ignorehitpause=1
persistent = 0
var(14) = 550

[State 7041, スタポ]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = 8500
ignorehitpause=1
persistent = 0
var(14) = 200

[State 7041, スタポ]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = 8511
ignorehitpause=1
persistent = 0
var(14) = 450

[State 7041, スタポ]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = 1402
ignorehitpause=1
persistent = 0
var(14) = 300

[State 7041, 補正]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = [7004,7007]
ignorehitpause=1
persistent = 0
fvar(10) = 0.05

[State 7041, 補正]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = 8500
ignorehitpause=1
persistent = 0
fvar(10) = 0.02

[State 7041, 補正]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = 8511
ignorehitpause=1
persistent = 0
fvar(10) = 0.02

[State 7041, 補正]
type = Varset
trigger1 = time = 1
trigger1 = parent,stateno = 1402
ignorehitpause=1
persistent = 0
fvar(10) = 0.05

[State 7041, スタポ]
type = Varset
trigger1 = time = 2
ignorehitpause=1
persistent = 0
var(14) = 0

[State 7041, 補正]
type = Varset
trigger1 = time = 2
ignorehitpause=1
persistent = 0
fvar(10) = 0

[State 7041, 消す]
type = DestroySelf
trigger1 = time = 10
;---------------------------------------------------------------------------
;次元斬３段目or絶刀判定発生用
[Statedef 7006]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 7003
ctrl = 0
sprpriority = -1

[State 7006, 振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2BodyDist X < 0

[State 7006, エフェクト]
type = Explod
trigger1 = time = 0
anim = 7002
scale = 0.45,0.45
postype = p1
pos = 0,0
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 7006, ヘルパー]
type = Helper
trigger1 = animelem = 16
trigger1 = root,stateno !=3002
helpertype = normal
name = "zigen2"
ID = 7007
pos = 0, 8
postype = p1
facing = 1
stateno = 7007
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 7006, ヘルパー]
type = Helper
trigger1 = root,stateno =3002
helpertype = normal
name = "zigen2"
ID = 3007
pos = 0, 8
postype = p1
facing = 1
stateno = 3007
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45
persistent=0

[State 7006, 効果音]
type = PlaySnd
trigger1 = animelem = 12
value = 1000, 2
channel = 1

[State 7006, 消す]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;判定
[Statedef 7007]
type    = S
movetype= A
physics = S
juggle  = 100
velset = 0,0
anim = 7004
ctrl = 0
sprpriority = 5

[State 7007, ヒット定義];次元斬３段目
type = hitdef
trigger1 = time = 1
trigger1 = root,stateno != [3502,3505]
trigger1 = root,stateno != [4000,4100]
attr = S, SP
animtype = diagup
damage   = 50,3
priority  = 4, Hit
sparkno = 11
sparkxy = 10,-45
hitflag = MAFP
guardflag = MA
pausetime = 5,10
sparkno = 11
guard.sparkno = S8000
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -6,-3
guard.velocity = -4
air.velocity = -3,-4
fall.recover=0
fall = 1
persistent=0

[State -2, damage]
type = AttackMulSet
trigger1 = roundstate = 2
trigger1 = root,stateno != [3502,3505]
value = 1-root,fVar(10)

[State 7007, ガード不可]
AssertSpecial
type = AssertSpecial
trigger1 = root,stateno = [3502,3505]
trigger2 = root,stateno = [4000,4100]
flag = unguardable

[State 7007, ヒット定義];絶刀
type = hitdef
triggerall = root,time <= 200
triggerall = time = 0
triggerall = p2movetype != H 
trigger1 = root,stateno = [3502,3505]
trigger2 = root,stateno = [4000,4100]
hitflag = MA
attr = S, HP
sparkno = 11
sparkxy = 10,-45
animtype = hard
damage   = 100
pausetime = 8,10
guardflag = -1
guard.sparkno = 40
ground.type = Low
ground.slidetime = 14
ground.hittime = 33
ground.velocity = -3
guard.velocity = -4
air.velocity = -3,-4
hitsound = s1,10
getpower = 0,0

[State 7007, ヒット定義];絶刀
type = hitdef
triggerall = root,stateno = [3502,3505]
trigger1 = time = 0
trigger1 = p2movetype = H
trigger2 = time = 0
trigger2 = root,time > 200
hitflag = MA
attr = S, HP
sparkno = 11
sparkxy = 10,-45
animtype = diagup
damage   = 100
pausetime = 8,10
guardflag = -1
guard.sparkno = 40
ground.type = high
ground.slidetime = 14
ground.hittime = 33
ground.velocity = -6,-3
guard.velocity = -4
air.velocity = -3,-4
hitsound = s1,10
fall = 1
fall.recover = 0
getpower = 0,0

[State 7007, ヒット定義];絶刀
type = hitdef
triggerall = root,stateno = [4000,4100]
trigger1 = time = 0
trigger1 = p2movetype = H
trigger2 = time = 0
trigger2 = root,time > 200
hitflag = MA
attr = S, HP
sparkno = 11
sparkxy = 10,-45
animtype = diagup
damage   = 100
pausetime = 8,10
guardflag = -1
guard.sparkno = 40
ground.type = high
ground.slidetime = 14
ground.hittime = 33
ground.velocity = -6,-3
guard.velocity = -4
air.velocity = -3,-4
hitsound = s1,10
fall = 1
fall.recover = 0
getpower = 0,0

[State 7007, ヘルパー]
type = Helper
triggerall = enemynear,movetype = H
triggerall = movehit
trigger1 = enemy,GethitVar(hitcount) >0
id = 7042
name = "time"
pos = 0,-200
postype = back
stateno = 7041
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 7007, 消す]
type = DestroySelf
trigger1 = time = 30

;---------------------------------------------------------------------------
[Statedef 7008]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 7008
ctrl = 0
sprpriority = 0

[State 7008, 消す]
type = DestroySelf
trigger1 = animtime = 1
;---------------------------------------------------------------------------
; ※５：端数処理（floorとか付いてる所）
;
; 　括弧で挟んで中の数値をどうするか？小数点以下の数値を
;　「四捨五入」したり「切り捨てたり」する命令。
; 　これはプログラミングでは『端数処理』と呼ばれているものの一部で、
;
; 　Ceil(**)  = 天井関数(Ceiling)
; 　　　　　　（正の値は小数点以下を四捨五入、負の値は小数点以下を切り捨てる）
;
; 　Floor(**) = 床関数
; 　　　　　　（正の値は小数点以下を切り捨て、負の値は小数点以下を四捨五入する）
;
; 　という処理を値に適用し、整数への補正を行う。
; 　もちろん「正の値」は『０よりも上の数値』、「負の値」は『０よりも下の数値』の事。
; 　例えば、正の値2.8・負の値-2.8があるとする。これにCeilかFloorを与えると、
;
; 　Ceil(2.8)   = 3
; 　Ceil(-2.8)  = -2
; 　Floor(2.8)  = 2
; 　Floor(-2.8) = -3
;
; 　となる。
;---------------------------------------------------------------------------
;スティンガー
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = -2

[State 1100, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 1100, セリフ]
type = PlaySnd
trigger1 = AnimElemTime(2) = 2
value = 1100, 0
channel = 0

[State 1100, 速度]
type = velset
trigger1 = AnimElem = 3
x = 10

[State 1100, 速度]
type = velset
trigger1 = AnimElem = 4
x = 15

[State 1100, ヒット定義]
type = HitDef
trigger1 = animelem = 3 || animelem = 4
attr = S, NA
animtype  = hard
damage= 80
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 0,10
sparkno = 3
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,10
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -7,-3
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent = 0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
id = 1100

[State 1100, ステート変更]
type = ChangeState
trigger1 = FrontEdgeBodyDist < 30
trigger1 = time > 12
trigger2 = time > 18
value = 1110
ctrl = 0

[State 1100, ステート変更]
type = ChangeState
trigger1 = movecontact
value = 1120
ctrl = 0

;---------------------------------------------------------------------------
;スティンガー終わり
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = -2

[State 1110, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[State 1110, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1110, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1110, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1


[State 1110, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1110, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1110, ヒット定義]
type = HitDef
trigger1 = animelem = 1
attr = S, NA
animtype  = diagup
damage= 60
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 5,5
sparkno = 12
guard.sparkno = S8000
sparkxy = -20, -70
hitsound = S1,10
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -7,-3
guard.velocity = -8
air.velocity = -3,-5
airguard.velocity = -6,-1
persistent=0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
nochainID = 1100

[State 1110, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 1
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))



[State 1110, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;スティンガーヒット後
[Statedef 1120]
type    = S
movetype= I
physics = S
juggle  = 6
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = -2


[State 1120, 画面を揺らす]
type = EnvShake
trigger1 = time = 0
time = 6
ampl = -4
freq = 120

[State 1120, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1101
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1102
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1120, スタポ]
type = Varadd
trigger1 = time = 1
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 1120, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1120, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300, 0

[State 1120, 効果音]
type = PlaySnd
trigger1 = animelem = 11
value = 300, 1

[State 1120, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;疾走居合い
[Statedef 1200]
type = S
movetype = A
physics = S
anim = 1200+var(10)
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[state 50, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 11200
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 1200
elem = animelemno(0)

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 7
channel = 0
value = 1200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 8
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 7 || animelem = 8 || animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヒット定義]
type = HitDef
trigger1 = 1
trigger1 = movecontact = 0
attr = S, HA
animtype  = hard
priority = 6, miss
damage    = 1,1
hitflag = MAF
guardflag = M
guard.sparkno = 6
pausetime = 0,0
guard.pausetime = 0,34
getpower = 40,40
sparkno = S904
sparkxy = -10,-70
hitsound   = -1;S0,10
guardsound = S0,28
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
p2stateno = 1222
p2facing = 1
kill = 0
ID = 1200

[State -3, 3];
type = targetlifeadd
triggerall = NumTarget(1200) >= 1
trigger1 = target(1200),stateno = 1222
trigger1 = target(1200),time = 6
ID = 1200
value = ceil(-52*(1-fVar(10)/2))

[State -3, 3];
type = targetlifeadd
triggerall = NumTarget(1200) >= 1
trigger1 = target(1200),stateno = 1223
trigger1 = target(1200),time = 2
ID = 1200
value = ceil(-52*(1-fVar(10)/2))


[State 1200, ヒット定義]
type = Hitdef
trigger1 = animelem = 12 || animelem = 13
attr = S, NA
hitflag = MAF
guardflag = MA
animtype = back
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 40
pausetime = 3,5
hitsound = S1, 11
guardsound = 1, 0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10,-2
guard.velocity = -8.5
air.velocity = -8, -3
airguard.velocity = -6.67,-1
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 10
givepower = 35, 35               
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5

[State 1200, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 12 || animelem = 13
persistent=0
v = 58
value = ceil(1500*(1+(var(15)*0.1)-(var(14)*0.1)))



[State 1200, ヘルパー]
type = Helper
trigger1 = movehit = 1
trigger1 = p2stateno = 1222
trigger1 = numhelper(1020) = 0
ID = 1020
name = "sissou"
sprpriority = 4
pos = 0,0
postype = back
stateno = 1224
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 1200, 速度]
type = veladd
trigger1 = time = [5,39]
x = 0.1

[State 1200, 速度]
type = velset
trigger1 = animelem = 4
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 2
x = 35

[State 1200, 速度]
type = veladd
trigger1 = time = [22,33]
x = 1

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
x = 0

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(13) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(14) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(15) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 14
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 22
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, 埃]
type = MakeDust
trigger1 = time = [15,50]
pos = -15, 0
pos2 = -45, 0
spacing = 4

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------
;疾走居合い相手喰らい１
[Statedef 1222]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 1222, 振り向く]
type = turn
trigger1 = p2dist X < 0

[State 1222, アニメ変更]
type = Changeanim2
trigger1 = Time = 0
value = 1222


[State 1222, ステート変更]
type = ChangeState
trigger1 = AnimTime = -5
value = 1223

;--------------------------------------
;疾走居合い相手喰らい２
[Statedef 1223]
type = A
physics = N
movetype = H
ctrl = 0

[State 1223, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052) 
value = 5050

[State 1223, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052) 
value = 5052


[State 1223, 速度]
type = velset
trigger1 = time = 0
trigger1 = p2dist x <= 0
x = 13
y = -4

[State 1223, 速度]
type = velset
trigger1 = time = 0
trigger1 = p2dist x > 0
x = -13
y = -4

[State 1223, 速度]
type = VelAdd
trigger1 = Time > 4
y = 1.2

[State 1223, 自分のステートへ]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;疾走居合いヒット時ヘルパー
[Statedef 1224]
type = S
physics = N
anim = 1223
ctrl = 0
velset = 0,0

[State 1224, ゲージ]
type = poweradd
trigger1 = time = 1
trigger2 = time = 9
trigger3 = time = 17
trigger4 = time = 25
trigger5 = time = 33
value = 32

[State 1224, ヒットカウント]
type = hitadd
triggerall = p2stateno = 1222
trigger1 = time = 12
trigger2 = time = 25
value = 1

[State 1224, 効果音]
type = playsnd
triggerall = p2stateno = 1222
trigger1 = time = 12
trigger2 = time = 25
value = S1,11

[State 1224, 効果音]
type = playsnd
triggerall = p2stateno = 1223
trigger1 = time = 48
value = S1,12

[State 1224, ヒットエフェクト]
type = Explod
trigger1 = time = 16
trigger2 = time = 32
trigger3 = time = 48
anim = F11
scale = 1,1
postype = p2
pos = 0,-80
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1224, 消す]
type = destroyself
trigger1 = Time = 50
value = 0
;---------------------------------------------------------------------------
[Statedef 1230];ガードヘルパー
type = S
physics = N
movetype = A
anim = 9741
ctrl = 0
velset = 0,0

[State 1230, ヒット定義]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
attr = S, SA
animtype  = hard
damage    = 35,20
getpower = 40,40
hitflag = M
guardflag = M
guard.sparkno = -1
pausetime = 9,3
guard.pausetime = 9,40
guard.hittime = 30
guard.ctrltime = 30
sparkno = 6
sparkxy = -10,-70
hitsound   = S0,10
guardsound = S0,28
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 1.8,-9
air.velocity = 0,0
fall = 1
fall.recover = 0
;ignorehitpause = 1

[State 1230, 消す]
type = destroyself
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;兜割り
[Statedef 1300]
type = A
movetype = A
physics = N
anim = 1300
ctrl = 0
poweradd = 70
velset = 0,0
juggle = 8

[State 1300, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,2

[State 1300, 変数];高さ
type = Varset
trigger1 = time = 0
v = 11
value = ceil(pos Y)

[State 1300, セリフ]
type = PlaySnd
trigger1 = time = 3
value = 1300,1+var(13)
channel = 0

[State 1300, 速度]
type = velset
trigger1 = time = 3
x = 0
Y = 0.5

[State 1300, 速度]
type = velset
trigger1 = animelem = 2
x = 0
Y = 9

[State 1300, 速度]
type = velset
trigger1 = animelem = 4
x = 0
Y = 16

[State 1300, 速度]
type = VelAdd
trigger1 = animelem = 3
y = .4

[State 1300, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage = 25-Ceil(var(11)/5)
animtype = Heavy
guardflag = HA
hitflag = MAF
air.animtype = back
fall.animtype = back
hitsound = s1,12
guardsound = S6,0
pausetime = 3,5
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-30
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -2.5,8
guard.velocity = -8
air.velocity = -2.5, 8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 1300, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(1000*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 1300, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1301

;---------------------------------------------------------------------------
;兜割り（着地）
[Statedef 1301]
type    = S
physics = S
movetype = A
ctrl = 0
anim = 1301
velset = 0,0

[State 1301, ヒット定義]
type = HitDef
trigger1 = animelem = 1
attr = A, SA
damage = 15-(var(11)/5)
animtype = Heavy
guardflag = HA
hitflag = MAFD
air.animtype = back
fall.animtype = back
hitsound = s1,12
guardsound = S6,0
pausetime = 3,4
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-20
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -2.5,8
guard.velocity = -8
air.velocity = -2.5, 8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
down.bounce = 1
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 1301, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(500*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 1301, StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 2
movetype = I

[State 1301, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1300,4

[State 1301, 効果音]
type = PlaySnd
trigger1 = time = 1
value = 1300,0

[State 1301, 効果音]
type = PlaySnd
trigger1 = animelem = 15
value = 5,1

[State 1301, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1301, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1302
ID = 1302
pos = 60, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 4
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.5, 0.5
sprpriority = 4
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 1301, コントロール]
type = CtrlSet
trigger1 = Animelem = 14
value = 1

[State 1301, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラウンドトリップ
[Statedef 1400]
type = S
movetype = A
physics = N
anim = 1400
ctrl = 0
velset = 0,0

[State 1400, 効果音]
type = PlaySnd
trigger1 = animelem = 18
value = 1400, 0
channel = 2

[State 1400, ヘルパー]
type = Helper
trigger1 = animelem = 23
helpertype = normal
name = "trip"
ID = 1401
postype = p1
pos = 20,-80
facing = 0
stateno = 1401
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
IgnoreHitPause = 1

[State 7000, VarSet]
type = VarSet
trigger1 = animelem = 23
var(10) = 10000

[State 1400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ラウンドトリップフォーズエッジ
[Statedef 1401]
type = A
movetype = A
physics = N
anim = 1401
ctrl = 0
sprpriority = 0

[State 210, ぶつかり]
type = Width
trigger1 = 1
value = 0,0

[State 201, ヒット定義]
type = HitDef
trigger1 = time >= 4
attr = A, SP 
hitflag = MA
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 10, 2
pausetime = 2,2
guard.pausetime = 4,4
sparkno = 2
guard.sparkno = S8000
sparkxy = -20+(random%3), -21+(random%2)
hitsound = S1, 10+(random%2)
guardsound = S6,1
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 12
guard.ctrltime = 12
ground.velocity = -5
guard.velocity = -5
air.velocity = -1.4,-3
airguard.velocity = -3,-.8
p1stateno = 1402
ID = 1401



[State 1401]
type = NotHitBy
trigger1 = 1
value = , AT
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP
slot = 1
stateno = 1404
time = 999
forceair = 0

[State 1401, 速度]
type = Velset
trigger1 = time = 0
x = 7.5
y = 2


[State 1401, 速度]
type = Veladd
trigger1 = time = [20,70]
x = -0.12

[State 1401, 速度]
type = Veladd
trigger1 = time = [15,70]
y = -0.15

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse((rootdist x=[0,10]),11,ifelse((rootdist x=[-10,0]),-11,rootdist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse((rootdist y= 100),101,rootdist y)-100


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(rootdist Y <100,-1,1))


[State 7000, VelSet]
type = Velset
trigger1 = time >= 60
x = 5*cos(fvar(0))
y = -2*sin(fvar(0))

[State 7000, Veladd]
type = Veladd
trigger1 = time >= 60
x = 0.4*cos(fvar(0))
y = -0.2*sin(fvar(0))

[State 1223, アニメ変更]
type = ChangeAnim
trigger1 = Time = 60
value = 1402

[State 1401, エフェクト]
type = helper
trigger1 = time = 0
helpertype = normal
name = "tripexplod"
ID = 1405
postype = p1
pos = 0,0
facing = 0
stateno = 1405
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
IgnoreHitPause = 1


[State 3300, 残像]
type = AfterImage
trigger1 = Time = 0
time = 999
;TimeGap  = 10
FrameGap = 5
;length = 10
PalBright = 1,1,1
PalContrast =  50,50,150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 334, 消える]
type = DestroySelf
trigger1 = time = 999
trigger2 = rootdist X = [-15,15]
trigger2 = rootdist y = [80,120]
trigger2 = time > 30


;---------------------------------------------------------------------------
;ラウンドトリップフォーズエッジヒット中
[Statedef 1402]
type = A
movetype = A
physics = N
anim = 1401
ctrl = 0
velset = 0,0

[State 210, ぶつかり]
type = Width
trigger1 = 1
value = 0,0


[State 1402, 移動]
type = Posadd
trigger1 = time >= 1
x = 0.2
y = -0.15


[State 1401]
type = NotHitBy
trigger1 = 1
value = , AT
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP
slot = 1
stateno = 1403
time = 999
forceair = 0

[State 201, ヒット定義]
type = HitDef
trigger1 = animelemtime(1) >= 0
trigger1 = time%6 = 0
attr = A, SP 
hitflag = MA
guardflag = M
animtype = Light
air.animtype = light
fall.animtype = back
priority = 3, Hit
damage = 8, 2
pausetime = 0,2
guard.pausetime = 0,4
sparkno = 2
guard.sparkno = S8000
sparkxy = -20+(random%3), -21+(random%2)
hitsound = S1, 10+(random%2)
guardsound = S6,1
ground.type = Low
air.type = Low
ground.slidetime = 10
ground.hittime  = 7
air.hittime = 7
guard.ctrltime = 10
ground.velocity = 0.5
guard.velocity = -2
air.velocity = 0.5,-1
airguard.velocity = -1,-.8
ID = 1402

[State 201, ヒット定義]
type = HitDef
trigger1 = time > 70
attr = A, SP 
hitflag = MA
guardflag = M
animtype = medium
air.animtype = medium
fall.animtype = back
priority = 3, Hit
damage = 8, 2
pausetime = 0,2
guard.pausetime = 0,4
sparkno = 2
guard.sparkno = S8000
sparkxy = -20+(random%3), -21+(random%2)
hitsound = S1, 10+(random%2)
guardsound = S6,1
ground.type = Low
air.type = Low
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 20
guard.ctrltime = 10
ground.velocity = 0.5
guard.velocity = -2
air.velocity = 0.5,-1
airguard.velocity = -1,-.8
ID = 1402

[State 0]
type = Helper
triggerall = enemynear,movetype = H
triggerall = movehit = 1
trigger1 = enemy,GethitVar(hitcount) >= 1
id = 7041
name = "time"
pos = 0,-200
postype = back
stateno = 7041
helpertype = normal
bindtime = -1
keyctrl = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999



[State 1402, ステート変更]
type = ChangeState
trigger1 = Time > 75
value = 1403
ctrl = 0

;---------------------------------------------------------------------------
;ラウンドトリップフォーズエッジヒット後
[Statedef 1403]
type = A
movetype = I
physics = N
anim = 1401
ctrl = 0
sprpriority = 0

[State 210, ぶつかり]
type = Width
trigger1 = 1
value = 0,0

[State 1401]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse((rootdist x=[0,10]),11,ifelse((rootdist x=[-10,0]),-11,rootdist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse((rootdist y= 100),101,rootdist y)-100


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(rootdist Y <100,-1,1))

[State 7000, VelSet]
type = Velset
trigger1 = time >= 0
x = -2
y = -2

[State 7000, VelSet]
type = Velset
trigger1 = time >= 15
x = 5*cos(fvar(0))
y = -2*sin(fvar(0))

[State 7000, Veladd]
type = Veladd
trigger1 = time >= 15
x = 0.4*cos(fvar(0))
y = -0.2*sin(fvar(0))

[State 334, 消える]
type = DestroySelf
trigger1 = time = 999
trigger2 = rootdist X = [-15,15]
trigger2 = rootdist y = [80,120]
trigger2 = time > 30

;---------------------------------------------------------------------------
;ラウンドトリップフォーズエッジ喰らい後
[Statedef 1404]
type = A
movetype = I
physics = N
anim = 1401
ctrl = 0
sprpriority = 0

[State 210, ぶつかり]
type = Width
trigger1 = 1
value = 0,0

[State 1401]
type = NotHitBy
trigger1 = 1
value = SCA
time = 9999

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse((rootdist x=[0,10]),11,ifelse((rootdist x=[-10,0]),-11,rootdist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse((rootdist y= 100),101,rootdist y)-100


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(rootdist Y <100,-1,1))

[State 7000, VelSet]
type = Velset
trigger1 = time >= 0
x = -3
y = -1

[State 7000, VelSet]
type = Velset
trigger1 = time >= 15
x = 5*cos(fvar(0))
y = -2*sin(fvar(0))

[State 7000, Veladd]
type = Veladd
trigger1 = time >= 15
x = 0.4*cos(fvar(0))
y = -0.2*sin(fvar(0))


[State 334, 消える]
type = DestroySelf
trigger1 = time = 999
trigger2 = rootdist X = [-15,15]
trigger2 = rootdist y = [80,120]
trigger2 = time > 30

;---------------------------------------------------------------------------
;ラウンドトリップエフェクト
[Statedef 1405]
type = A
movetype = I
physics = N
anim = 1403
ctrl = 0
sprpriority = 0

[State 1405, 親に付く]
type = BindToParent
trigger1 = NumHelper(1401) > 0
time = 99999
facing = 0
pos = 0, 0

[State 334, 消える]
type = DestroySelf
trigger1 = NumHelper(1401) = 0
;---------------------------------------------------------------------------
;流星脚
[Statedef 1500]
type = A
movetype = A
physics = N
anim = 1500
ctrl = 0
poweradd = 70
velset = 0,0
juggle = 8

[State 1500, 変数];回数制限
type = Varset
trigger1 = Time = 0
v = 9                   
value = 0

[State 1500, 追加入力]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
var(6) = ifelse(Command = "ryusei1", 0, ifelse(Command = "ryusei2", 1, 2))

[State 1500, セリフ]
type = PlaySnd
trigger1 = time = 16
value = 1500,0

[State 1500, 速度]
type = velset
trigger1 = time = 19
x = 15+var(6)*5
Y = 18

[State 1500, 幅]
type = Width
trigger1 = 1
edge = 5,0

[State 1500, エフェクト]
type = Explod
trigger1 = time = 18
anim = 1502
ID = 1502
pos = 0, 80
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = -3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 1500, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
damage = 50
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -2, -3
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 35
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 1500, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(1000*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.03

[State 1500, ステート変更]
type = ChangeState
triggerall = var(59) = 0
triggerall = movecontact
triggerall = Pos Y < -25
trigger1 = Command = "ryusei1" || Command = "ryusei2"
value = 1501

[State 1500, ステート変更]
type = ChangeState
triggerall = var(59) 
triggerall = movecontact
triggerall = Pos Y < -25
trigger1 = random < 700
value = 1501

[State 1500, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1510
;---------------------------------------------------------------------------
;エネステ流星脚
[Statedef 1501]
type = A
movetype = A
physics = N
anim = 1500
ctrl = 0
poweradd = 70
velset = 0,0
juggle = 8

[State 1501, 変数];回数制限
type = Varadd
trigger1 = Time = 0
v = 9                   
value = 1

[State 1501, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.15

[State 1501, 速度]
type = velset
trigger1 = time = 0
x = -8
Y = -12

[State 1501, 速度]
type = velset
trigger1 = time = 3
x = 0
Y = 0

[State 1501, 変数]
type = VarSet
triggerall = var(59) = 0
trigger1 = Time = 0
var(6) = ifelse(Command = "ryusei1", 0, ifelse(Command = "ryusei2", 1, 2))

[State 1501, セリフ]
type = PlaySnd
trigger1 = time = 16
value = 1500,0

[State 1501, 速度]
type = velset
trigger1 = time = 19
x = 15+var(6)*5
Y = 18


[State 1501, 幅]
type = Width
trigger1 = 1
edge = 5,0

[State 1501, ヒット定義]
type = HitDef
triggerall = var(9) < 3
trigger1 = AnimElem = 7
attr = A, SA
damage = 30
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -2, -5.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 35
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 1501, ヒット定義]
type = HitDef
triggerall = var(9) >= 3
trigger1 = AnimElem = 7
attr = A, SA
damage = 40
animtype  = diagup
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -2, -5.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 35
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 1501, スタポ]
type = Varadd
trigger1 = movehit
persistent=0
v = 58
value = ceil(400*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.03

[State 1501, エフェクト]
type = Explod
trigger1 = time = 18
anim = 1502
ID = 1502
pos = 0, 80
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = -3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 1501, ステート変更]
type = ChangeState
triggerall = var(59) = 0
triggerall = var(9) < 3
triggerall = movecontact
triggerall = Pos Y < 0
trigger1 = Command = "ryusei1" || Command = "ryusei2"
value = 1501

[State 1501, ステート変更]
type = ChangeState
triggerall = var(59)
triggerall = var(9) < 3
triggerall = movecontact
triggerall = Pos Y < 0
trigger1 = random < 700
value = 1501

[State 1501, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1510
;---------------------------------------------------------------------------
;流星脚（着地）
[Statedef 1510]
type    = S
physics = S
ctrl = 0
anim = 1510
velset = 0,0

[State 1510, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1510, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1503
ID = 1503
pos = 20, -30
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = animtime = 0
time = 0

[State 1510, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
;月輪脚（弱）
[Statedef 2500]
type = S
movetype = A
physics = S
anim = 2505
poweradd = 100
velset = 0
juggle = 10
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2500, セリフ]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,0
channel = 0

[State 2500, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,2
channel = 0

[State 2500, ステート変更]
type = ChangeState
trigger1 = AnimTime = -1
value = 2501
;---------------------------------------------------------------------------
[Statedef 2501]
type = A
movetype = A
physics = N
anim = 2501
velset = 0
juggle = 10
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2501, 音を止める]
type = stopSnd
trigger1 = AnimElem = 22
channel = 0

[State 2501, 効果音]
type = PlaySnd
trigger1 = AnimElem = 22
value = 0,7
channel = 0

[State 2501, エフェクト]
type = Explod
trigger1 = animelem = 5
anim = 2521
ID = 2521
pos = -90, -10
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1


[State 2501, エフェクト]
type = Explod
trigger1 = animelem = 23
anim = 2511
ID = 2511
pos = -90, -20
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 2501, 速度]
type = Velset
trigger1 = time = 0
y = -5

[State 2501, 速度]
type = velset
trigger1 = time = 5
x = 3.2

[State 2501, 速度]
type = velmul
trigger1 = animelem = 5
x = 0.8

[State 2501, 速度]
type = velmul
trigger1 = animelem = 13
x = 0.5

[State 2501, 速度]
type = Velset
trigger1 = animelem = 4
y = -1

[State 2501, 速度]
type = Velset
trigger1 = animelem = 22
x = 3.5
y = 9

[State 2501, 速度]
type = Velset
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
x = 0
y = 0

[State 2501, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = A, SA
damage = 9,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-55
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -1
guard.velocity = -1
air.velocity = -1,-2
air.hittime = 10
fall.recover = 0

[State 2501, ヒット定義]
type = HitDef
trigger1 = animelem = 7
attr = A, SA
damage = 9,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-80
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -1
guard.velocity = -1
air.velocity = -1,-2
air.hittime = 10
fall.recover = 0

[State 2501, ヒット定義]
type = HitDef
trigger1 = animelem = 9
attr = A, SA
damage = 9,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime = 33
air.hittime = 33
guard.ctrltime = 15
ground.velocity = -1
guard.velocity = -1
air.velocity = -1,-2
air.hittime = 10
fall.recover = 0

[State 2501, ヒット定義]
type = HitDef
trigger1 = animelem = 10
attr = A, SA
damage = 9,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime = 33
guard.ctrltime = 15
ground.velocity = -1
guard.velocity = -1
air.velocity = -1,-2
air.hittime = 30
fall.recover = 0

[State 2501, ヒット定義]
type = HitDef
trigger1 = animelem = 22
trigger2 = animelem = 23
attr = A, SA
animtype = back
damage = 40,10
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = 3
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 17
ground.hittime = 15
guard.ctrltime = 15
ground.velocity = -2,10
guard.velocity = -8
air.velocity = -2,10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
fall.yvelocity = -10
persistent=0
ID = 2506

[State 2501, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 5 
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2501, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 7
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2501, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 9
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2501, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 10
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2501, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 22 || animelem = 23
persistent=0
v = 58
value = ceil(1000*(1+(var(15)*0.1)-(var(14)*0.1)))


[State 2501, ステート変更]
type = ChangeState
trigger1 = Pos Y >= -10
trigger1 = vel Y > 0
value = 2507
;---------------------------------------------------------------------------

[Statedef 2507]
type = S
movetype = A
physics = S
anim = 2507
velset = 0,0
posset = 0,0
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2507, 効果音]
type = PlaySnd
trigger1 = time = 0
value = 1,2

[State 2507, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 2512
ID = 2512
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 2507, 移動]
type = posset
trigger1 = time = 0
y = 0

[State 2507, ステート変更]
type = ChangeState
trigger1 = AnimTime = -1
value = 0
ctrl = 1
;===========================================================================
;月輪脚（強）
[Statedef 2505]
type = S
movetype = A
physics = S
anim = 2505
poweradd = 100
velset = 0
juggle = 10
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,0
channel = 0

[State 2505, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2500,2
channel = 0

[State 2505, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2506
;---------------------------------------------------------------------------

[Statedef 2506]
type = A
movetype = A
physics = N
anim = 2506
velset = 0
juggle = 10
ctrl = 0

[State 191, 2]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2506, 音を止める]
type = stopSnd
trigger1 = AnimElem = 28
channel = 0

[State 2506, 効果音]
type = PlaySnd
trigger1 = AnimElem = 28
value = 0,7
channel = 0

[State 2506, エフェクト]
type = Explod
trigger1 = animelem = 5
anim = 2510
ID = 2510
pos = -90, -10
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 2506, エフェクト]
type = Explod
trigger1 = animelem = 29
anim = 2511
ID = 2511
pos = -90, -20
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.45, 0.45
sprpriority = 6
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 2506, 速度]
type = Velset
trigger1 = time = 0
y = -5.5

[State 2506, 速度]
type = velset
trigger1 = time = 5
x = 3.5

[State 2506, 速度]
type = velmul
trigger1 = animelem = 5
x = 0.8

[State 2506, 速度]
type = velmul
trigger1 = animelem = 19
x = 0.4

[State 2506, 速度]
type = Velset
trigger1 = animelem = 4
y = -1


[State 2506, 速度]
type = Velset
trigger1 = animelem = 28
x = 3.5
y = 9.5

[State 2506, 速度]
type = Velset
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
x = 0
y = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 13
attr = A, SA
damage = 8,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-55
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-2
air.hittime = 10
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 7
trigger2 = animelem = 10
trigger3 = animelem = 12
trigger4 = animelem = 16
attr = A, SA
damage = 8,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-80
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 5
ground.hittime = 10
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-2
air.hittime = 20
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 15
attr = A, SA
damage = 8,3
animtype = hard
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 1,1
sparkno = 2
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 20
ground.hittime = 33
air.hittime = 33
guard.ctrltime = 15
ground.velocity = -5
guard.velocity = -5
air.velocity = -1,-3
air.hittime = 30
fall.recover = 0

[State 2506, ヒット定義]
type = HitDef
trigger1 = animelem = 28
trigger2 = animelem = 29
attr = A, SA
animtype = back
damage = 45,10
priority  = 6, Hit
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = 3
guard.sparkno = S8000
sparkxy = -20,-30
hitsound = S1,1
guardsound = S6,0
ground.type = high
ground.slidetime = 17
ground.hittime = 15
guard.ctrltime = 15
ground.velocity = -2,10
guard.velocity = -8
air.velocity = -2,10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent=0
fall.yvelocity = -10
ID = 2506

[State 2506, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 5 
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2506, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 9
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2506, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 7
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2506, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 12 
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2506, スタポ]
type = Varadd
triggerall = movehit
trigger1 = animelem = 15 
persistent=0
v = 58
value = ceil(300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2506, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 28 || animelem = 29
persistent=0
v = 58
value = ceil(1000*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2506, ステート変更]
type = ChangeState
trigger1 = Pos Y >= -10
trigger1 = vel Y > 0
value = 2507
;===========================================================================
;日輪脚(弱)
[Statedef 2600]
type = S
movetype = A
anim = 2600
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 0

[State 2600,無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 7

[State 2600,StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 10
statetype = A
physics = A


[State 2600, 速度]
type = VelSet
trigger1 = Animelem = 10
x = 1.5
y = -10

[State 2600,StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 17
statetype = A
physics = N

[State 2600, 速度]
type = VelAdd
trigger1 = AnimElem = 17
trigger2 = AnimElem = 18
trigger3 = AnimElem = 19
y = 2

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElemTime(5) >= 0
attr = S, SA
animtype  = up
air.animtype  = up
damage=70
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = 6,6
sparkno = 3
guard.sparkno = S8000
sparkxy = -10, -50
hitsound   = S1,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2,-11
guard.velocity = -8
air.velocity = -2,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElemTime(5) >= 0
trigger1 = NumTarget(2506)
trigger1 = Target(2506),pos Y <-10
attr = S, SA
animtype  = up
air.animtype  = up
damage=70
priority  = 7, Hit
hitflag = MAFD
guardflag = MA
pausetime = 6,6
sparkno = 3
guard.sparkno = S8000
sparkxy = -10, -50
hitsound   = S1,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2,-11
guard.velocity = -8
air.velocity = -2,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0

[State 2600, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 9
persistent=0
v = 58
value = ceil(1000*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2600, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 10
persistent=0
v = 58
value = ceil(1300*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.03

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 7
anim = 2611
ID = 2611
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.4, 0.4
sprpriority = 6
removeongethit = 1

[State 2600, セリフ]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2600,0
channel = 0

[State 2600, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 5
value = 2003


;===========================================================================
;日輪脚(強)
[Statedef 2610]
type = S
movetype = A
physics = N
anim = 2610
ctrl = 0
velset = 0,0
sprpriority = 2
juggle = 0

[State 2610, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 8

[state 2610, StatetypeSet]
type = StatetypeSet
trigger1 = Animelem = 10
statetype = A
physics = A

[State 2610, 速度]
type = VelSet
trigger1 = Animelem = 10
x = 2
y = -7

[State 2610, 速度]
type = VelSet
trigger1 = Animelem = 17
x = 2.3
y = -8

[state 2610, StatetypeSet]
type = StatetypeSet
trigger1 = Animelem = 22
statetype = A
physics = N

[State 2610, 摩擦]
type = Velmul
trigger1 = Animelem = 23
x = 0.4
y = 0.9

[State 2610, 速度]
type = VelAdd
trigger1 = AnimElemTime(27) = 1
trigger2 = AnimElemTime(28) = 1
trigger3 = AnimElemTime(29) = 1
trigger4 = AnimElemTime(30) = 1
y = 3

[State 2610, ヒット定義]
type = HitDef
trigger1 = AnimElemTime(9) >= 0
damage = 60,5
guardflag = M
hitflag = MAF
type = HitDef
attr = A, SA
;animtype = up
animtype = hard
air.animtype = up
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-50
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
;ground.velocity = 0,-12
ground.velocity = 0,0
air.velocity = 0,-10
ground.hittime = 20
air.hittime = 20
ground.type = high
ground.slidetime = 17
airguard.velocity = -3,-1
guard.hittime = 12
guard.velocity = -4
guard.ctrltime = 20
air.fall = 1
fall = 0
yaccel = .5
persistent = 0
forcestand = 1
fall.recovertime = 30

[State 2610, ヒット定義]
type = HitDef
trigger1 = AnimElemTime(9) >= 0
trigger1 = NumTarget(2506)
trigger1 = Target(2506),pos Y <-10
damage = 60,5
guardflag = M
hitflag = MAFD
type = HitDef
attr = A, SA
;animtype = up
animtype = hard
air.animtype = up
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-50
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
;ground.velocity = 0,-12
ground.velocity = 0,0
air.velocity = 0,-10
ground.hittime = 20
air.hittime = 20
ground.type = high
ground.slidetime = 17
airguard.velocity = -3,-1
guard.hittime = 12
guard.velocity = -4
guard.ctrltime = 20
air.fall = 1
fall = 0
yaccel = .5
persistent = 0
forcestand = 1
fall.recovertime = 30

[State 2610, ヒット定義]
type = HitDef
triggerall = !movecontact
trigger1 = animelem = 10
damage = 40,5
guardflag = MA
hitflag = MAFD
type = HitDef
attr = A, SA
;animtype = up
animtype = hard
air.animtype = up
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-50
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
;ground.velocity = 0,-10
ground.velocity = 0,0
air.velocity = 0,-10
ground.hittime = 20
ground.type = high
ground.slidetime = 17
airguard.velocity = -3,-1
guard.hittime = 12
air.hittime = 20
guard.velocity = -4
guard.ctrltime = 20
air.fall = 1
fall = 0
yaccel = .5
forcestand = 1
fall.recovertime = 30



[State 2610, ヒット定義]
type = HitDef
trigger1 = animelem = 17||animelem = 18
damage = 25,5
guardflag = MA
hitflag = MAF
type = HitDef
attr = A, SA
animtype = diagup
air.animtype = up
sparkno = 3
guard.sparkno = S8000
sparkxy = -10,-50
hitsound = S1,1
guardsound = S6,0
pausetime = 5,7
ground.velocity = -2,-7.5
air.velocity = -1,-10
ground.hittime = 25
ground.type = high
ground.slidetime = 17
airguard.velocity = -6.67,-1
guard.hittime = 12
guard.velocity = -8
guard.ctrltime = 20
air.fall = 1
fall = 1
fall.recover=0
yaccel = .4
persistent=0

[State 2600, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 9
persistent=0
v = 58
value = ceil(900*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2600, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 10
persistent=0
v = 58
value = ceil(800*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 2600, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 17 || animelem = 18
persistent=0
v = 58
value = ceil(700*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 410, 補正]
type = Varadd
trigger1 = movehit
persistent=0
fv = 10
value = 0.02

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 10
anim = 2611
ID = 2611
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.4, 0.4
sprpriority = 6
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 18
anim = 2612
ID = 2612
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.4, 0.4
sprpriority = 6
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 9
anim = 2613
ID = 2613
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 10
anim = 2614
ID = 2614
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 11
anim = 2615
ID = 2615
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 2616
ID = 2616
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 13
anim = 2617
ID = 2617
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 18
anim = 2618
ID = 2618
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 19
anim = 2619
ID = 2619
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 20
anim = 2620
ID = 2620
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, エフェクト]
type = Explod
trigger1 = animelem = 21
anim = 2621
ID = 2621
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = 5
removeongethit = 1

[State 2600, 効果音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2600,0
channel = 0

[State 2600, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 5
value = 2003

;---------------------------------------------------------------------------
;挑発→円陣幻影剣
[Statedef 2900]
type = S
movetype = I
physics = S
ctrl = 0
anim = 181
velset = 0,0
sprpriority = 2
          
[State 2900, 効果音]
type = PlaySnd
trigger1 = time = 1
value = 3500,0

[State 2900, ヘルパー];トリガーバースト
type = Helper
trigger1 = time = 1
helpertype = normal
name = "TB"
ID = 7100
pos = 10, -15
postype = p1
facing = 1
stateno = 7100
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.5
size.yscale = 0.55

[State 1000, helper]
type = Helper
trigger1 = animelemtime(1) = 1
helpertype = normal
name = "TB"
ID = 7101
pos = 20,0
postype = p1
facing = 1
stateno = 7101
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.5
size.yscale = 0.5

[State 1000, helper]
type = Helper
trigger1 = animelemtime(1) = 1
helpertype = normal
name = "TB"
ID = 7102
pos = -20, 0
postype = p1
facing = 1
stateno = 7101
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.5
size.yscale = 0.5

[State 2900, ゲージ消費]
type = poweradd
trigger1 = time = 115
value = -1000

[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 1
value = 190,1
channel = 0

[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 7
value = 20,0

[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 12
value = 5,4

[State 2900, 効果音]
type = PlaySnd
trigger1 = AnimElem = 22
value = 190,2

[State 2900, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
; 超必殺技
;===========================================================================
;===========================================================================
;絶刀(1ゲージ)
[Statedef 3000]
movetype = A
physics = S
anim = 3000
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[State 1000, ゲージ消費]
type = PowerAdd
trigger1 = time = 0
value = -1000

[State 3000, 1]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = pos y < 0
statetype = A

[State 3300, 時間停止]
type = SuperPause
trigger1 = Time = 3
time = 30
movetime = 30
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3300, 残像]
type = AfterImage
triggerall = prevstateno != [3000,3999]
trigger1 = Time = 3
time = 60
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  50,50,150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, superchargehelper]
type=helper
trigger1= animelemtime(1)=1
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 3300, エフェクト]
type = null;Explod
trigger1 = time = 3
anim = 3510
ID = 3510
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 3300, エフェクト]
type = null;ModifyExplod
trigger1 = time >= 3
ID = 3510
scale = 0.5+(0.01*(time-3)), 0.5+(0.01*(time-3))

[State 3300, エフェクト]
type = null;ModifyExplod
trigger1 = time >= 7
ID = 3510
scale = 0.5+(0.05*(time-7)), 0.5+(0.05*(time-7))

[State 3300, エフェクト]
type = null;ModifyExplod
trigger1 = time >= 13
ID = 3510
scale = 0.5+(0.01*(time-13)), 0.5+(0.01*(time-13))

[State 3300, エフェクト]
type = null;ModifyExplod
trigger1 = time >= 17
ID = 3510
scale = 0.5+0.05*(time-17), 0.5+0.05*(time-17)
pos = 0, time*2
postype = p1

[State 3300, エフェクト]
type = null;ModifyExplod
trigger1 = time >= 22
ID = 3510
scale = 0.5+0.1*(time-22), 0.5+0.1*(time-22)
pos = 0, time*2
postype = p1

[State 3300, 効果音]
type = PlaySnd
trigger1 = time = 3
value = 3000,0

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 3000, 透過]
type = Trans
trigger1 = time >= 20
trans = addalpha
alpha = time-20, 128


[State 1000, エフェクト]
type = Explod
trigger1 = animtime = -15
anim = 2080
scale = 0.6,0.6
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 1200, 速度]
type = velset
trigger1 = animelemTime(6) = 0
x = 2

[State 1200, 速度]
type = velset
trigger1 = animelemTime(7) = 0
x = 4

[State 1200, 速度]
type = velset
trigger1 = animelem = 11
x = 0


[State 3000, AfterImage]
type = AfterImage
trigger1 = animtime = -25
time = 9
TimeGap  = 2
FrameGap = 1
length = 5
PalContrast =  150,50,150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 200, 1]
type = PlaySnd
trigger1 = time = 2
value = 3001,var(13)

[State 3000, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 3002
ctrl = 1


;---------------------------------------------------------------------------
[Statedef 3002]
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 3300, 移動]
type = Posadd
trigger1 = Time = 0
x = 50

[State 1000, helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "zigen1"
ID = 7006
pos = -ceil(random%50), -ceil(random%25)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time = 7
trigger2 = time = 21
trigger3 = time = 35
trigger4 = time = 49
trigger5 = time = 63
trigger6 = time = 77
trigger7 = time = 91
trigger8 = time = 105
trigger9 = time = 119
trigger10 = time = 95
helpertype = normal
name = "zigen1"
ID = 7006
pos = ceil(random%170), -ceil(random%80)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time = 14
trigger2 = time = 28
trigger3 = time = 42
trigger4 = time = 56
trigger5 = time = 70
trigger6 = time = 84
trigger7 = time = 98
trigger8 = time = 112
trigger9 = time = 126
helpertype = normal
name = "zigen1"
ID = 7006
pos = -ceil(random%100), -ceil(random%60)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 3000, ステート変更]
type = ChangeState
trigger1 = time = 180
value = 3005
ctrl = 0
;---------------------------------------------------------------------------
[Statedef 3005]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3005


[State 3300, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, 振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2BodyDist X < 0

[State 195]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 195]
type = AngleDraw
trigger1 = animtime = 0
scale = 0.94,0.94

[State 200, 1]
type = PlaySnd
trigger1 = time = 10
value = 5,0

[State 200, 1]
type = PlaySnd
trigger1 = time = 60
value = 190,2

[State 200, 1]
type = PlaySnd
trigger1 = time = 110
value = 5,1

[State 3000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;判定
[Statedef 3007]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 3004
ctrl = 0
sprpriority = 5

[State 7007, ヒット定義];次元斬３段目
type = hitdef
trigger1 = time = 1
attr = S, SP
animtype = diagup
damage   = 10,2
priority  = 4, Hit
sparkno = 11
sparkxy = 10,-45
hitflag = MAFP
guardflag = MA
pausetime = 5,5
sparkno = 11
guard.sparkno = S8000
sparkxy = 10,-45
hitsound = s1,10
guardsound = S6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
guard.ctrltime = 16
ground.velocity = -3,-3
guard.velocity = -4
air.velocity = -3,-3
fall.recover=0
fall = 1
yaccel = .4
persistent=0
p2stateno = 3010

[State 7041, スタポ]
type = Varset
triggerall = enemynear,movetype = H
triggerall = movehit
trigger1 = enemy,GethitVar(hitcount) >0
ignorehitpause=1
persistent = 0
var(14) = 40

[State 7041, 補正]
type = Varset
triggerall = enemynear,movetype = H
triggerall = movehit
trigger1 = enemy,GethitVar(hitcount) >0
ignorehitpause=1
persistent = 0
fvar(10) = 0.05

[State 7007, 消す]
type = DestroySelf
trigger1 = time = 50
;---------------------------------------------------------------------------
;やられ
[Statedef 3010]
movetype = H
physics = N
anim = 5030
ctrl = 0
velset = 0,0

[State 1223, 速度]
type = velset
trigger1 = HitShakeOver
trigger1 =  enemynear,Pos X > 0
x = -2
y = -3
persistent = 0

[State 1223, 速度]
type = velset
trigger1 = HitShakeOver
trigger1 = enemynear,Pos X <= 0
x = 2
y = -3
persistent = 0

[State 1223, 速度]
type = VelAdd
trigger1 = time > 10
y = .4

[State 5030, 4]
type = Changeanim
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5050

[State 1223, 自分のステートへ]
type = changeState
trigger1 = Vel Y > 5
trigger1 = Pos Y >= 0
value = 3011

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3011]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 3012

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 3012]
type    = L
movetype= H
physics = N

[State 0, 1]
type = DestroySelf
trigger1 = IsHelper
trigger1 = time = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 1223, 自分のステートへ]
type = SelfState
trigger1 = time = 100
value = 5120
;---------------------------------------------------------------------------
;===========================================================================
;DT疾走居合い
[Statedef 3200]
type = S
movetype = A
physics = S
anim = 3200
velset = 0,0
juggle  = 15
ctrl = 0
sprpriority = 2

[State 1000, ゲージ消費]
type = PowerAdd
trigger1 = time = 0
value = -1000

[State 1200, 汎用変数]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 3300, 無敵]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 34

[State 3300, 時間停止]
type = SuperPause
trigger1 = Time = 3
time = 24
movetime = 24
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3300, 残像]
type = AfterImage
triggerall = prevstateno != [3000,3999]
trigger1 = Time = 3
time = 60
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  50,50,150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3300, 超必演出ヘルパー]
type=helper
trigger1= animelemtime(3)=3
helpertype=normal
stateno=7501
ID=7501
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 3300, エフェクト]
type = Explod
trigger1 = time = 3
anim = 3510
ID = 3510
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 3
ID = 3510
scale = 0.5+(0.01*(time-3)), 0.5+(0.01*(time-3))

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 7
ID = 3510
scale = 0.5+(0.05*(time-7)), 0.5+(0.05*(time-7))

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 13
ID = 3510
scale = 0.5+(0.01*(time-13)), 0.5+(0.01*(time-13))

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 17
ID = 3510
scale = 0.5+0.05*(time-17), 0.5+0.05*(time-17)
pos = 0, time*2
postype = p1

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 22
ID = 3510
scale = 0.5+0.1*(time-22), 0.5+0.1*(time-22)
pos = 0, time*2
postype = p1

[State 3300, 効果音]
type = PlaySnd
trigger1 = time = 3
trigger1 = anim = 3200
value = 3000,0


[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 8
channel = 0
value = 1200,var(13)

[State 1200, セリフ]
type = PlaySnd
trigger1 = AnimElem = 8
channel = 1
value = 3200,var(13)

[State 1200, 効果音]
type = PlaySnd
trigger1 = AnimElem = 9
value = 190,2

[State 1200, 幅]
type = Width
trigger1 = 1
edge = 50,0

[State 1200, ぶつかり]
type = PlayerPush
trigger1 = animelem = 9 || animelem = 10 || animelem = 11
value = 0

[State 1200, ヒット定義]
type = HitDef
trigger1 = 1
trigger1 = movecontact = 0
attr = S, HA
animtype  = hard
priority = 6, miss
damage    = 1,1
hitflag = MAF
guardflag = M
guard.sparkno = 6
pausetime = 0,0
guard.pausetime = 0,34
getpower = 40,40
sparkno = S904
sparkxy = -10,-70
hitsound   = -1;S0,10
guardsound = S0,28
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
p2stateno = 3222
p2facing = 1
kill = 0
ID = 3200



[State 1200, ヒット定義]
type = Hitdef
trigger1 = animelem = 12 || animelem = 13
attr = S, NA
hitflag = MAF
guardflag = MA
animtype = back
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 40
pausetime = 3,5
hitsound = S1, 11
guardsound = 1, 0
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -10,-2
guard.velocity = -8.5
air.velocity = -8, -3
airguard.velocity = -6.67,-1
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 10
givepower = 35, 35               
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5

[State 1200, スタポ]
type = Varadd
trigger1 = movehit
trigger1 = animelem = 12 || animelem = 13
persistent=0
v = 58
value = ceil(1500*(1+(var(15)*0.1)-(var(14)*0.1)))



[State 1200, ヘルパー]
type = Helper
trigger1 = movehit = 1
trigger1 = p2stateno = 3222
trigger1 = numhelper(1020) = 0
ID = 3222
name = "sissou"
sprpriority = 4
pos = 0,0
postype = back
stateno = 3224
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 1200, 速度]
type = velset
trigger1 = animelemTime(8) = 0
x = 33


[State 1200, 速度]
type = velset
trigger1 = animelem = 11
x = 0

[State 1200, 画面を揺らす]
type = EnvShake
trigger1 = AnimElem = 12
time = 6
ampl = -4
freq = 120

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1205
scale = 0.5,0.3
postype = p1
pos = -145,-45
sprpriority = 0
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 12
anim = 1207
scale = 0.5,0.5
postype = p1
pos = 20,-20
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1


[State 1200, ステート変更]
type = Changestate
trigger1 = Animtime = 0
trigger1 = movehit = 0
value = 3201
ctrl = 0

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
trigger1 = movehit
value = 3202
ctrl = 0

;--------------------------------------
;DT疾走居合い納刀
[Statedef 3201]
type = S
movetype = I
physics = N
velset = 0,0
sprpriority = 1
anim = 3201


[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(1) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(2) = 1
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(3) = 1
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(2) = 3
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(3) = 3
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 2
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 10
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 15
ID = 3520
scale = 2-(0.1*(time-15)), 2-(0.1*(time-15))

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 7
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 200, 1]
type = PlaySnd
trigger1 = time = 15
value = 3500,5

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------
;DT疾走居合い納刀ヒット時2
[Statedef 3202]
type = S
movetype = I
physics = N
velset = 0,0
sprpriority = 1
anim = 3202


[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.5,0.5
postype = p1
pos = -80,-35
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 1
anim = 1201
scale = 0.6,0.3
postype = p1
pos = -180,-45
sprpriority = 0
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 1202
ID = 1202
scale = 0.5,0.5
postype = p1
pos = -190,40
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(1) = 3
anim = 1202
ID = 1203
scale = 0.5,0.5
postype = p1
pos = -140,20
supermovetime = 999
pausemovetime = 999
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 4
ID = 1202
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 7
ID = 1202
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 6
ID = 1203
scale = 0.4, 0.4
sprpriority = 1

[State 1200, エフェクト]
type = ModifyExplod
trigger1 = AnimElemTime(1) = 9
ID = 1203
scale = 0.3, 0.3
sprpriority = 1

[State 1200, エフェクト]
type = Explod
trigger1 = AnimElemTime(1) = 4
anim = 1204
scale = 0.45,0.45
postype = p1
pos = -190,-15
sprpriority = 5
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 35
ID = 3520
scale = 2-(0.1*(time-35)), 2-(0.1*(time-35))

[State 1200, エフェクト]
type = Explod
trigger1 = animelem = 7
anim = 1206
scale = 0.5,0.5
postype = p1
pos = 40,-70
sprpriority = 7
ownpal = 1
bindtime = -1
removeongethit = 1

[State 200, 1]
type = PlaySnd
trigger1 = time = 35
value = 3500,5

[State 1200, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------
;疾走居合い相手喰らい１
[Statedef 3222]
type = S
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 1222, 振り向く]
type = turn
trigger1 = p2dist X < 0

[State 1222, アニメ変更]
type = Changeanim2
trigger1 = Time = 0
value = 1222

[State 1222, ダメージ]
type = null;lifeadd
trigger1 = time = 16
value = -78

[State 1222, ステート変更]
type = ChangeState
trigger1 = AnimTime = -5
value = 3223

;--------------------------------------
;疾走居合い相手喰らい２
[Statedef 3223]
type = A
physics = N
movetype = H
ctrl = 0

[State 1223, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052) 
value = 5050

[State 1223, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052) 
value = 5052

[State 1223, ダメージ]
type = null;lifeadd
trigger1 = time = 2
value = -78

[State 1223, 速度]
type = velset
trigger1 = time = 0
trigger1 = p2dist x <= 0
x = 13
y = -4

[State 1223, 速度]
type = velset
trigger1 = time = 0
trigger1 = p2dist x > 0
x = -13
y = -4

[State 1223, 速度]
type = VelAdd
trigger1 = Time > 4
y = 1.2

[State 1223, 自分のステートへ]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;疾走居合いヒット時ヘルパー
[Statedef 3224]
type = S
physics = N
anim = 1223
ctrl = 0
velset = 0,0

[State 1224, ゲージ]
type = poweradd
trigger1 = time = 1
trigger2 = time = 9
trigger3 = time = 17
trigger4 = time = 25
trigger5 = time = 33
value = 32

[State 1224, ヒットカウント]
type = hitadd
triggerall = p2stateno = 3222
trigger1 = time = 12
trigger2 = time = 25
value = 1

[State 1224, 効果音]
type = playsnd
triggerall = p2stateno = 3222
trigger1 = time = 12
trigger2 = time = 25
value = S1,11

[State 1224, 効果音]
type = playsnd
triggerall = p2stateno = 3223
trigger1 = time = 48
value = S1,12

[State 1224, ヒットエフェクト]
type = Explod
trigger1 = time = 16
trigger2 = time = 32
trigger3 = time = 48
anim = F11
scale = 1,1
postype = p2
pos = 0,-80
sprpriority = 6
supermovetime = 999
pausemovetime = 999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1224, 消す]
type = destroyself
trigger1 = Time = 50
value = 0
;---------------------------------------------------------------------------
[Statedef 1230];ガードヘルパー
type = S
physics = N
movetype = A
anim = 9741
ctrl = 0
velset = 0,0

[State 1230, ヒット定義]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
attr = S, SA
animtype  = hard
damage    = 35,20
getpower = 40,40
hitflag = M
guardflag = M
guard.sparkno = -1
pausetime = 9,3
guard.pausetime = 9,40
;guard.hittime = 40
;guard.ctrltime = 40
sparkno = 6
sparkxy = -10,-70
hitsound   = S0,10
guardsound = S0,28
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 1.8,-9
air.velocity = 0,0
fall = 1
fall.recover = 0
;ignorehitpause = 1

[State 1230, 消す]
type = destroyself
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------

;DT兜割り
;この技は悪咲３号様製作の豪鬼の禊の記述を使わせて頂いています。
;許可を下さった悪咲３号様に感謝いたします。
[Statedef 3300]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 3300

[State 3300, ゲージ]
type = PowerAdd
trigger1 = time = 0
value = -2000

[State 3300, 超必演出ヘルパー]
type=helper
trigger1= animelemtime(3)=5
helpertype=normal
stateno=7501
ID=7501
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 3300, エフェクト]
type = Explod
trigger1 = time = 1
anim = 3510
ID = 3510
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 1
ID = 3510
scale = 0.5+(0.01*(time-1)), 0.5+(0.01*(time-1))

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 5
ID = 3510
scale = 0.5+(0.05*(time-5)), 0.5+(0.05*(time-5))

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 11
ID = 3510
scale = 0.5+(0.01*(time-11)), 0.5+(0.01*(time-11))

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 15
ID = 3510
scale = 0.5+0.05*(time-15), 0.5+0.05*(time-15)
pos = 0, time*2
postype = p1

[State 3300, エフェクト]
type = ModifyExplod
trigger1 = time >= 20
ID = 3510
scale = 0.5+0.1*(time-20), 0.5+0.1*(time-20)
pos = 0, time*2
postype = p1

[State 3300, 効果音]
type = PlaySnd
trigger1 = time = 1
trigger1 = anim = 3300
value = 3000,0

[State 3300, 効果音]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = anim = 3300
value = 3500,3
channel = 0

[State 3300, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3300, 無敵]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 63

[State 3300, 時間停止]
type = SuperPause
trigger1 = Time = 3
time = 52
movetime = 52
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3300, 残像]
type = AfterImage
triggerall = prevstateno != [3000,3999]
trigger1 = Time = 3
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1


[State 3300, アニメ変更]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = anim = 3300
value = 3304

[State 3300, 効果音]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = anim = 3304
value = 2000,0


[State 3300, セリフ]
type = PlaySnd
trigger1 = AnimElem = 1
trigger1 = anim = 3304
value = 2000,0

[State 3300, エフェクト]
type = Explod
trigger1 = animelem = 2
trigger1 = anim = 3304
anim = 2080
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = 1
removeongethit = 1

[State 3300, 移動]
type = PosAdd
trigger1 = animtime = 0
trigger1 = anim = 3304
x = (P2dist X)-20
y = -210

[State 3300, カメラ]
type = ScreenBound
trigger1 = AnimElemTime(1) >= 0
trigger1 = anim = 3304
value = 0

[State 3300, ステート変更]
type = ChangeState
trigger1 = animtime = 0
trigger1 = anim = 3304
value = 3301

;---------------------------------------------------------------------------
[Statedef 3301]
type    = A
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 3301

[State 3301, セリフ]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3300,0

[State 3301, 速度]
type = VelSet
trigger1 = time = 0
y = 15

[State 3301, 速度]
type = playerpush
trigger1 = 1
value = 0

[State 3301, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, HA
animtype  = hard
hitflag = MAF
guardflag = HA
priority = 3, Miss
pausetime = 0, 0
guard.pausetime = 10
sparkno = 12
guard.sparkno = S8105
sparkxy = -30, 20
hitsound   = S1,12
guardsound = S1,0
damage    =  330
p2facing = 1
guard.dist = 0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = 0,0
guard.velocity = -8
air.velocity =  -5,20
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
kill = 1
envshake.time = 18
envshake.ampl = 5
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
getpower = 0,0
givepower = 35,35
yaccel = .5

[State 3301, ステート変更]
type = ChangeState
triggerall = var(36) = 1 && numtarget
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3302

[State 3301, ステート変更]
type = ChangeState
triggerall = var(36) != 1 || (var(36) = 1 && !numtarget)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3303

;---------------------------------------------------------------------------
;DT兜割り（着地）（ヒット）
[Statedef 3302]
type    = S
physics = S
movetype = I
ctrl = 0
anim = 3302
velset = 0,0

[State 3302, EnvShake]
type = EnvShake
trigger1 = Time = 1
time = 20

[State 3302, スタポ]
type = Varadd
trigger1 = time = 0
v = 58
value = 2000

[State 3302,無敵]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA
time = 1

[State 3302, 効果音]
type = PlaySnd
trigger1 = time = 1
value = 1300,4

[State 3302, 効果音]
type = PlaySnd
trigger1 = time = 3
value = 1300,0

[State 3302, 効果音]
type = PlaySnd
trigger1 = animelem = 15
value = 5,1

[State 3302, エフェクト]
type = Explod
trigger1 = AnimElem = 1
anim = 7310
id = 7310
postype = p1
pos = 0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
scale = 1.5,1.5

[State 3302, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1302
ID = 1302
pos = 60, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 4
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.5, 0.5
sprpriority = 4
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 3302, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3302, アニメ変更]
type = Changeanim
trigger1 = AnimTime = 0
trigger1 = Anim = 3302
value = 1303
elem = 9
ctrl = 0

[State 3302, エフェクト]
type = Explod
trigger1 = animelem = 9
trigger1 = anim = 1303
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 3302, エフェクト]
type = ModifyExplod
trigger1 = time >= 52
ID = 3520
scale = 2-(0.1*(time-52)), 2-(0.1*(time-52))

[State 3302, 効果音]
type = PlaySnd
trigger1 = animelem = 5
trigger1 = anim = 3302
value = 3500,5

[State 3302, 残像]
type = AfterImage
trigger1 = animtime = 0
time = 0

[State 3302, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Anim = 1303
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;DT兜割り（着地）（ガード）
[Statedef 3303]
type    = S
physics = S
movetype = I
ctrl = 0
anim = 3303
velset = 0,0

[State 3303, EnvShake]
type = EnvShake
trigger1 = Time = 1
time = 20

[State 3303, 効果音]
type = PlaySnd
trigger1 = time = 1
value = 1300,4

[State 3303, 効果音]
type = PlaySnd
trigger1 = time = 3
value = 1300,0

[State 3303, 効果音]
type = PlaySnd
trigger1 = animelem = 15
value = 5,1


[State 3303, エフェクト]
type = Explod
trigger1 = time = 0
anim = 1302
ID = 1302
pos = 60, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 4
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999
pausemovetime = 999
scale = 0.5, 0.5
sprpriority = 4
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 3303, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3303, アニメ変更]
type = Changeanim
trigger1 = AnimTime = 0
trigger1 = Anim = 3303
value = 1301
elem = 9
ctrl = 0

[State 3303, エフェクト]
type = Explod
trigger1 = animelem = 9
trigger1 = anim = 1301
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 3303, エフェクト]
type = ModifyExplod
trigger1 = time >= 25
ID = 3520
scale = 2-(0.1*(time-25)), 2-(0.1*(time-25))

[State 3303, 効果音]
type = PlaySnd
trigger1 = animelem = 5
trigger1 = anim = 3303
value = 3500,5

[State 3303, 残像]
type = AfterImage
trigger1 = animtime = 0
time = 0

[State 3303, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Anim = 1301
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;DT兜割り（相手）1
[Statedef 3350]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 3350, ステート変更]
type = ChangeState
trigger1 = Pos Y < 0
value = 3351

[State 3350, 移動]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3350, 速度]
type = VelSet
trigger1 = Time = 0
x = -3

[State 3350, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3350, ChangeAnim]
type = ChangeAnim
triggerall = Time < 16 && SelfAnimExist(5950)
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5950

[State 3003, アニメ変更]
type = ChangeAnim2
trigger1 = Time < 16 && anim != 5950
value = 3350

[State 3003, アニメ変更]
type = ChangeAnim
trigger1 = anim = 3350 && animtime = 0
value = 5080

[State 3350, statetypeset]
type = statetypeset
triggerall = Anim = 5950 || Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
statetype = L

[State 3350, アニメ変更]
type = ChangeAnim
triggerall = Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
value = 5110+(SelfAnimExist(5112)*2)

[State 3350, 速度]
type = VelSet
trigger1 = Time = 16
x = 0

[State 3350, 振り向く]
type = turn
triggerall = Time >= 100
triggerall = anim = 5950
trigger1 = Name = "cvszangief" && AuthorName = "warusaki3"
trigger2 = Name = "cvszangief_normal" && AuthorName = "warusaki3"
trigger3 = Name = "cvszangief_ex" && AuthorName = "warusaki3"
trigger4 = Name = "raiden" && AuthorName = "H”"

[State 3350, アニメ変更]
type = SelfState
trigger1 = Time >= 100
value = ifelse(alive, 5120, 5150)
;---------------------------------------------------------------------------
[Statedef 3351]
movetype = H
physics = N
velset = 0,0

[State 3351, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 3351, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 3351, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3351, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 3351, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 3352

;---------------------------------------------------------------------------
;DT兜割り(相手）2
[Statedef 3352]
type    = A
movetype = H
physics = N
ctrl = 0

[State 3352, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 3352, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 3352, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0 ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 3354 ;HITA_FALL

[State 3352, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3353 ;HITA_UP (transition)
;---------------------------------------------------------------------------
[Statedef 3353]
type    = A
movetype = H
physics = N

[State 3353, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 3353, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 3353, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0 ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0  ;No transition anim
trigger4 = Anim != 5035 ;.
value = 3354 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 3354]
type    = A
movetype = H
physics = N

[State 3354, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0  ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 3354, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3354, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 3354, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 3355 ;HIT_BOUNCE
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 3355]
type    = L
movetype = H
physics = N

[State 3355, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 3355, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 3355, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 3355, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 3355, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 3355, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3355, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 3355, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 3355, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 3360 ;HIT_LIEDOWN

[State 3355, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 3355, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 3355, 11]
type = PosFreeze
trigger1 = 1

[State 3355, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 3356

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3356]
type    = L
movetype = H
physics = N

[State 3356, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 3356, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 3356, 3]
type = HitFallVel
trigger1 = Time = 0

[State 3356, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 3356, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 3356, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 3360

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 3360]
type    = L
movetype = H
physics = N

[State 3360, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 3360, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 3360, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 3360, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 3360, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3360, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 3360, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 3360, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 3360, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 3360, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 3360, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 3360, 11] ;If just died
type = SelfState
trigger1 = time = 120
value = 5120

[State 3360, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 3360, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

;---------------------------------------------------------------------------
;絶刀
[Statedef 3500]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 181+var(10)
ctrl = 0
sprpriority = 2

[state 1100, 1];フォースエッジが戻ってきた時
type = changeanim
trigger1 = anim = 10181
trigger1 = var(10) = 0
trigger1 = NumHelper(1401) = 0
value = 181
elem = animelemno(0)

[State 1000, ゲージ消費]
type = PowerAdd
trigger1 = time = 0
value = -3000

[State 1000, helper]
type = Helper
trigger1 = time = 1
helpertype = normal
name = "TB"
ID = 7100
pos = 10, -15
postype = p1
facing = 1
stateno = 7100
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.5
size.yscale = 0.55

[State 200, 1]
type = PlaySnd
trigger1 = time = 1
value = 3500,0

[State 200, 1]
type = PlaySnd
trigger1 = time = 1
value = 3500,1
channel = 0

[State 3000, ぶつかり]
type = Width
trigger1 = AnimElem = 2, >= 0
value = 15,0

[State 3000, superchargehelper]
type=helper
trigger1= animelemtime(3)=5
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 4100, superchargepause]
type=superpause
trigger1= time = 1
time=105
anim=-1
p2defmul=1
darken = 0
unhittable = 1 
movetime = 105  



[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 2, 1
time = 2

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 1 && Time < 60
time = 2

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 110

[State 3000, ステート変更]
type = ChangeState
trigger1 = Animelem = 24
value = 3501
ctrl = 0
;---------------------------------------------------------------------------
[Statedef 3501]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3500
ctrl = 0
sprpriority = 2

[State -3,Super]
type = Helper
trigger1 = time = 1
id = 7200
name = "TB"
pos = 0,0
postype = P1
stateno = 7200
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 200, 1]
type = PlaySnd
trigger1 = time = 1
value = 3000,0

[State 200, 1]
type = statetypeset
trigger1 = time = 50
movetype = I

[State 200, 1]
type = PlaySnd
trigger1 = time = 1
value = 3500,2
channel = 0

[State 1000, エフェクト]
type = Explod
trigger1 = time = 1
anim = 3510
ID = 3510
scale = 0.5,0.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 1
ID = 3510
scale = 0.5+(0.01*(time-1)), 0.5+(0.01*(time-1))

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 5
ID = 3510
scale = 0.5+(0.05*(time-5)), 0.5+(0.05*(time-5))

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 11
ID = 3510
scale = 0.5+(0.01*(time-11)), 0.5+(0.01*(time-11))

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 15
ID = 3510
scale = 0.5+0.05*(time-15), 0.5+0.05*(time-15)
pos = 0, time*2
postype = p1

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 20
ID = 3510
scale = 0.5+0.1*(time-20), 0.5+0.1*(time-20)
pos = 0, time*2
postype = p1

[State 4100, superchargepause]
type=superpause
trigger1= animelem = 36
time=60
anim=-1
p2defmul=1
darken = 0
unhittable = 1 
movetime = 60

[State 3000, superchargehelper]
type=helper
trigger1= animelem = 36
helpertype=normal
stateno=7501
ID=7501
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 3000, アニメ変更]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = anim = 3500
value = 3501

[State 3000, 透過]
type = Trans
trigger1 = anim = 3501
trigger1 = animelemtime(1) >= 0
trans = addalpha
alpha = time, time-110

[State 3000, 透過]
type = Trans
trigger1 = anim = 3501
trigger1 = animelemtime(4) >= 0
trans = addalpha
alpha = time, 116+3*(time-116)

[State 3000, 透過]
type = Trans
trigger1 = anim = 3501
trigger1 = animelemtime(5) >= 0
trans = addalpha
alpha = time, 134+4*(time-122)

[State 1000, エフェクト]
type = Explod
trigger1 = anim = 3501
trigger1 = animtime = -15
anim = 2080
scale = 0.6,0.6
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1200, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 13
range = 0,1

[State 3000, 速度]
type = veladd
trigger1 = anim = 3501
trigger1 = animelemtime(4) >= 0
x = 0.2

[State 3000, 速度]
type = veladd
trigger1 = anim = 3501
trigger1 = animelemtime(5) >= 0
x = 1


[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = anim = 3501
value = 2000,0

[State 3000, AfterImage]
type = AfterImage
trigger1 = animtime = -25
time = 9
TimeGap  = 2
FrameGap = 1
length = 5
PalContrast =  150,50,150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 200, 1]
type = PlaySnd
trigger1 = anim = 3501
trigger1 = animtime = -18
value = 3500,3+var(13)

[State 3000, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 3502
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 3502]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 7008
ctrl = 0
sprpriority = 2

[State 1000, helper]
type = Helper
trigger1 = time = 1
helpertype = normal
name = "zigen1"
ID = 7006
pos = ceil(P2BodyDist X+20), 0
postype = p1
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45


[State 1000, helper]
type = Helper
trigger1 = time = 16
trigger2 = time = 46
trigger3 = time = 76
trigger4 = time = 106
trigger5 = time = 136
trigger6 = time = 166
trigger7 = time = 196
trigger8 = time = 226
helpertype = normal
name = "zigen1"
ID = 7006
pos = ceil(random%120), -ceil(random%50)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45

[State 1000, helper]
type = Helper
trigger1 = time = 31
trigger2 = time = 61
trigger3 = time = 91
trigger4 = time = 121
trigger5 = time = 151
trigger6 = time = 181
trigger7 = time = 211
helpertype = normal
name = "zigen1"
ID = 7006
pos = -ceil(random%120), -ceil(random%50)
postype = p2
facing = 1
stateno = 7006
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 0.45
size.yscale = 0.45


[State 3000, ステート変更]
type = ChangeState
triggerall = win
trigger1 = time = 279
value = 3506

[State 3000, ステート変更]
type = ChangeState
trigger1 = time = 280
value = 3505
ctrl = 0



;---------------------------------------------------------------------------
[Statedef 3505]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3505

[State 1000, エフェクト]
type = Explod
trigger1 = time = 1
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 1
ID = 3520
scale = 2-(0.1*(time-1)), 2-(0.1*(time-1))


[State 1000, 振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2BodyDist X < 0

[State 195]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 195]
type = AngleDraw
trigger1 = animtime = 0
scale = 0.94,0.94

[State 200, 1]
type = PlaySnd
trigger1 = time = 2
value = 3500,5

[State 200, 1]
type = PlaySnd
trigger1 = time = 40
value = 5,0

[State 200, 1]
type = PlaySnd
trigger1 = time = 90
value = 190,2

[State 200, 1]
type = PlaySnd
trigger1 = time = 140
value = 5,1

[State 3000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 3506]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3506

[State 1000, エフェクト]
type = Explod
trigger1 = time = 1
anim = 3520
ID = 3520
scale = 2,2
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, エフェクト]
type = ModifyExplod
trigger1 = time >= 1
ID = 3520
scale = 2-(0.1*(time-1)), 2-(0.1*(time-1))

[State 1000, 振り向く]
type = turn
trigger1 = time = 0
trigger1 = P2BodyDist X < 0

[State 195]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 195]
type = AngleDraw
trigger1 = time = 250
scale = 0.94,0.94

[State 200, 1]
type = PlaySnd
trigger1 = time = 2
value = 3500,5

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 14
value = 5,0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 29
value = 190,2

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 44
value = 5,1

[State 200, 1]
type = PlaySnd
trigger1 = time = 190
value = 181,random%2

[State 3810,5]
type = Changestate
trigger1 = time = 250
value = 3507

;---------------------------------------------------------------------------
[Statedef 3507]
type    = S
movetype= I
physics = S
ctrl = 1

[State 195]
type = AngleDraw
trigger1 = 1
scale = 1.06,1.06

[State 195]
type = AngleDraw
trigger1 = animtime = 0
scale = 0.94,0.94

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3810,5]
type = Changestate
trigger1 = p2movetype = A
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 7100]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 3530
ctrl = 0
sprpriority = 5

[State 7100, 1]
type = varset
trigger1 = time = [0,1]
trigger1 = root,stateno = 2900
var(13) = 1
persistent = 0

[State 7100, 1]
type = varadd
trigger1 = time%10 = 0
var(58) = 1


[State 3000, 消す]
type = DestroySelf
trigger1 = time = 115
trigger2 = root,stateno != 2900
trigger2 = var(13) = 1
;---------------------------------------------------------------------------
[Statedef 7101]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 2900
ctrl = 0

[State 7101, 移動]
type = velset
time = 1
trigger1 = IsHelper(7101)
X = 3

[State 7101, 移動]
type = velset
time = 1
trigger1 = IsHelper(7102)
X = -3

[State 7101, 移動]
type = velset
time = 40
trigger1 = IsHelper(7101)
X = 2

[State 7101, 移動]
type = velset
time = 40
trigger1 = IsHelper(7102)
X = -2

[State 7101, 移動]
type = velset
time = 80
trigger1 = IsHelper(7101)
X = 1

[State 7101, 移動]
type = velset
time = 80
trigger1 = IsHelper(7102)
X = -1

[State 7101, 無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 7101, ぶつかり]
type = PlayerPush
trigger1 = 1
value = 1

[State 3000, 消す]
type = DestroySelf
trigger1 = time = 100
;---------------------------------------------------------------------------
[Statedef 7200]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7008

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projanim = 7009
Projhitanim = -1
projremanim = -1
projcancelanim = -1
projremovetime = 6
offset = 0, 0
projpriority = 1
projsprpriority = 1
velocity = 0
attr = S, HP
damage = 20
animtype = up
hitflag = MAF
guardflag = MA
pausetime = 0,9
sparkno = 2
guard.sparkno = 1
sparkxy = 20, ceil(enemy,pos Y-60)
hitsound = 5,4
guardsound = S6,0
ground.type = high
ground.slidetime = 24
ground.hittime = 24
air.hittime = 24
guard.ctrltime = 24
ground.velocity = -1, -2
guard.velocity = -8
air.velocity = -1, -2
airguard.velocity = -6.67,-1
yaccel = .5
air.juggle = 10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 12
envshake.ampl = 2
ProjID = 7009
getpower = 0,0
givepower = 30, 30
forcestand = 1
kill = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 16
projanim = 7007
Projhitanim = -1
projremanim = -1
projcancelanim = -1
projremovetime = 6
offset = 0, 0
projpriority = 1
projsprpriority = 1
velocity = 0
attr = S, HP
damage = 20
animtype = up
hitflag = MAF
guardflag = MA
pausetime = 0,9
sparkno = 2
guard.sparkno = 1
sparkxy = 20, ceil(enemy,pos Y-60)
hitsound = 5,4
guardsound = S6,0
ground.type = high
ground.slidetime = 24
ground.hittime = 24
air.hittime = 24
guard.ctrltime = 24
ground.velocity = -2, -1
guard.velocity = -8
air.velocity = -2, -1
airguard.velocity = -6.67,-1
yaccel = .35
air.juggle = 10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 12
envshake.ampl = 2
ProjID = 7009
getpower = 0,0
givepower = 30, 30
forcestand = 1
kill = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 30
projanim = 7007
Projhitanim = -1
projremanim = -1
projcancelanim = -1
projremovetime = 6
offset = 0, 0
projpriority = 1
projsprpriority = 1
velocity = 0
attr = S, HP
damage = 30
animtype = up
hitflag = MAF
guardflag = MA
pausetime = 1,9
sparkno = 2
guard.sparkno = 1
sparkxy = 20, ceil(enemy,pos Y-60)
hitsound = 5,4
guardsound = S6,0
ground.type = high
ground.slidetime = 24
ground.hittime = 24
air.hittime = 24
guard.ctrltime = 24
ground.velocity = -2, -7
guard.velocity = -8
air.velocity = -2, -7
airguard.velocity = -6.67,-1
yaccel = .40
air.juggle = 10
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 12
envshake.ampl = 2
ProjID = 7009
getpower = 0,0
givepower = 30, 30
forcestand = 1


[State 3000, 消す]
type = DestroySelf
trigger1 = time = 60
;===========================================================================
;===========================================================================
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;エネステ流星脚
[Statedef 3050]
type    = A
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1500
ctrl = 0
sprpriority = 2

[State 1000, 8]
type = varset
trigger1 = time = 0
v = 13
value = 1

[State 1000, ゲージ消費]
type = PowerAdd
trigger1 = time = 0
value = -1000


[State 3050, ぶつかり]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(16) < 0
value = 5,0

[State 3000, superchargehelper]
type=helper
trigger1= time = 5
helpertype=normal
stateno=7500
ID=7500
name="Super Charge"
postype=p1
pos=-14,-77
persistent=0
supermovetime=9999

[State 4100, superchargepause]
type=superpause
trigger1= time = 5
time=30
movetime = 5
anim=-1
sound=s3000,0
p2defmul=1
darken = 0


[State 3050, 残像]
type = AfterImage
trigger1 = time = 1
time = 999
length = 10
palbright = 1,1,30
PalContrast =  50,50,150
PalAdd = 0,0,0
PalMul = 1,1,1
timegap = 2
framegap = 4
trans = add1

[State 3050, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 6

[State 1000, 8]
type = PlaySnd
trigger1 = time = 16
value = 1500,0


[State 1000, 8]
type = velset
trigger1 = time = 19
x = 18
Y = 18

[State 3001, Explod]
type = Explod
trigger1 = time = 18
anim = 1502
ID = 1502
pos = 0, 80
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = -3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
damage = 40
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = -0, -3
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1
p1stateno = 3051

[State 1320, 9]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1510

;---------------------------------------------------------------------------
;ES流星脚
[Statedef 3051]
type = A
movetype = A
physics = N
anim = 1501
ctrl = 0
velset = 0,0
juggle = 8


[State 1000, 8]
type = varadd
trigger1 = time = 1
v = 13
value = 1

[State 1000, 8]
type = velset
trigger1 = time = 0
x = -10
Y = -18

[State 1000, 8]
type = velset
trigger1 = time = 2
trigger2 = P2BodyDist y >= 125
x = 0
Y = 0

[State 1000, 8]
type = PlaySnd
trigger1 = time = 10
value = 1500,1

[State 1000, 8]
type = velset
trigger1 = time = 14
trigger1 = P2BodyDist y > 125
x = 22
Y = 27

[State 1000, 8]
type = velset
trigger1 = time = 14
trigger1 = P2BodyDist y = [60,125]
x = 25
Y = 22

[State 1000, 8]
type = velset
trigger1 = time = 14
trigger1 = P2BodyDist y < 60
x = 25
Y = 15

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = var(13) < 6
attr = A, SA
damage = 20
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 8,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = 0, -4.3
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1
p1stateno = 3051

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = var(13) >= 6
attr = A, SA
damage = 30
animtype = diagup
guardflag = HA
hitflag = MAF
hitsound = s1,1
guardsound = S6,0
pausetime = 12,8
sparkno = 3
guard.sparkno = 3
sparkxy = -10,-22
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -8, -5.5
guard.velocity = -8
air.velocity = -8, -2
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 0, スタポ]
type = Varadd
trigger1 = time = 0
trigger1 = var(13) = [1,5]
v = 58
value = ceil(600*(1+(var(15)*0.1)-(var(14)*0.1)))

[State 3001, Explod]
type = Explod
trigger1 = time = 13
anim = 1502
ID = 1502
pos = 0, 80
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 99999
pausemovetime = 99999
scale = 0.5, 0.5
sprpriority = -3
ontop = 0
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 1320, 9]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1510
;---------------------------------------------------------------------------
;スタポヘルパー
[Statedef 6000]
anim = 6000
ownpal = 1

[State 6000, helper]
type = Helper
trigger1 = var(58) = [2000,3999]
trigger1 = !NumHelper(6010)
id = 6010
name = "dope"
pos = 0,-200
postype = back
stateno = 6010
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 6000, helper]
type = Helper
trigger1 = var(58) = [4000,6999]
trigger1 = !NumHelper(6011)
id = 6011
name = "crazy"
pos = 0,-200
postype = back
stateno = 6011
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 6000, helper]
type = Helper
trigger1 = var(58) = [7000,10999]
trigger1 = !NumHelper(6012)
id = 6012
name = "blast"
pos = 0,-200
postype = back
stateno = 6012
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 6000, helper]
type = Helper
trigger1 = var(58) = [11000,15999]
trigger1 = !NumHelper(6013)
id = 6013
name = "alright"
pos = 0,-200
postype = back
stateno = 6013
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 6000, helper]
type = Helper
trigger1 = var(58) = [16000,21999]
trigger1 = !NumHelper(6014)
id = 6014
name = "sweet"
pos = 0,-200
postype = back
stateno = 6014
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 6000, helper]
type = Helper
trigger1 = var(58) = [22000,28999]
trigger1 = !NumHelper(6015)
id = 6015
name = "showtime"
pos = 0,-200
postype = back
stateno = 6015
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 6000, helper]
type = Helper
trigger1 = var(58) >= 28999
trigger1 = !NumHelper(6016)
id = 6016
name = "stylish"
pos = 0,-200
postype = back
stateno = 6016
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 6000]
type = Varset
trigger1 = 1
v = 58
value = root,var(58)

[State -2, クリップボード（追加専用）]
type = DisplayToClipboard
trigger1 = 1
text = "%d,%d,%d,%f,%f"
params = var(58),var(14),var(2),fvar(0),fvar(1)


;---------------------------------------------------------------------------
[Statedef 6010]
anim = 6000
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6001)
trigger1 = teamside = 1
anim = 6001
id = 6001
postype = left
pos = -20,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 1
anim = 6008
id = 6008
postype = left
pos = 25,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 1
anim = 6009
id = 6009
postype = left
pos = 39,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6001)
trigger1 = teamside = 2
anim = 6001
id = 6001
postype = Right
pos = -100,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 2
anim = 6008
id = 6008
postype = Right
pos = -60,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 2
anim = 6009
id = 6009
postype = Right
pos = -48,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [2000,3999]
ID = 6001
removetime = 0

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [2000,3999]
ID = 6008
removetime = 0



[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [2000,3999]
ID = 6009
removetime = 0

[State 6000]
type = Varset
trigger1 = 1
fv = 1
value = (root,var(58)-2000)*0.00025

[State 6000, Explod]
type = ModifyExplod
trigger1 = 1
ID = 6009
scale = fvar(1), 1

[State 6000, Explod]
type = DestroySelf
trigger1 = time > 10
trigger1 = !NumExplod(6001)
trigger1 = !NumExplod(6008)
trigger1 = parent,var(58) != [2000,3999]

;---------------------------------------------------------------------------
[Statedef 6011]
anim = 6000
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !NumExplod(6002)
trigger1 = teamside = 1
anim = 6002
id = 6002
postype = left
pos = -20,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6002)
trigger1 = teamside = 2
anim = 6002
id = 6002
postype = Right
pos = -100,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 1
anim = 6008
id = 6008
postype = left
pos = 25,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [4000,6999]
ID = 6002
removetime = 0

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [4000,6999]
ID = 6008
removetime = 0

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 1
anim = 6009
id = 6009
postype = left
pos = 39,67
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 2
anim = 6008
id = 6008
postype = Right
pos = -60,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 2
anim = 6009
id = 6009
postype = Right
pos = -48,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [4000,6999]
ID = 6009
removetime = 0

[State 6000]
type = Varset
trigger1 = 1
fv = 1
value = (root,var(58)-4000)*0.0001665

[State 6000, Explod]
type = ModifyExplod
trigger1 = 1
ID = 6009
scale = fvar(1), 1

[State 6000, Explod]
type = DestroySelf
trigger1 = time > 10
trigger1 = !NumExplod(6002)
trigger1 = !NumExplod(6008)
trigger1 = parent,var(58) != [4000,6999]
;---------------------------------------------------------------------------
[Statedef 6012]
anim = 6000
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !NumExplod(6003)
trigger1 = teamside = 1
anim = 6003
id = 6003
postype = left
pos = -20,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6003)
trigger1 = teamside = 2
anim = 6003
id = 6003
postype = Right
pos = -100,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 1
anim = 6008
id = 6008
postype = left
pos = 25,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [7000,10999]
ID = 6003
removetime = 0

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [7000,10999]
ID = 6008
removetime = 0

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 1
anim = 6009
id = 6009
postype = left
pos = 39,67
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 2
anim = 6008
id = 6008
postype = Right
pos = -60,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 2
anim = 6009
id = 6009
postype = Right
pos = -48,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [7000,10999]
ID = 6009
removetime = 0

[State 6000]
type = Varset
trigger1 = 1
fv = 1
value = (root,var(58)-7000)*0.000125

[State 6000, Explod]
type = ModifyExplod
trigger1 = 1
ID = 6009
scale = fvar(1), 1

[State 6000, Explod]
type = DestroySelf
trigger1 = time > 10
trigger1 = !NumExplod(6003)
trigger1 = !NumExplod(6008)
trigger1 = parent,var(58) != [7000,10999]

;---------------------------------------------------------------------------
[Statedef 6013]
anim = 6000
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !NumExplod(6004)
trigger1 = teamside = 1
anim = 6004
id = 6004
postype = left
pos = -20,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6004)
trigger1 = teamside = 2
anim = 6004
id = 6004
postype = Right
pos = -100,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 1
anim = 6008
id = 6008
postype = left
pos = 25,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [11000,15999]
ID = 6004
removetime = 0

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [11000,15999]
ID = 6008
removetime = 0

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 1
anim = 6009
id = 6009
postype = left
pos = 39,67
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 2
anim = 6008
id = 6008
postype = Right
pos = -60,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 2
anim = 6009
id = 6009
postype = Right
pos = -48,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [11000,15999]
ID = 6009
removetime = 0

[State 6000]
type = Varset
trigger1 = 1
fv = 1
value = (root,var(58)-11000)*0.0001

[State 6000, Explod]
type = ModifyExplod
trigger1 = 1
ID = 6009
scale = fvar(1), 1

[State 6000, Explod]
type = DestroySelf
trigger1 = time > 10
trigger1 = !NumExplod(6004)
trigger1 = !NumExplod(6008)
trigger1 = parent,var(58) != [11000,15999]

;---------------------------------------------------------------------------
[Statedef 6014]
anim = 6000
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !NumExplod(6005)
trigger1 = teamside = 1
anim = 6005
id = 6005
postype = left
pos = -20,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6005)
trigger1 = teamside = 2
anim = 6005
id = 6005
postype = Right
pos = -100,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 1
anim = 6008
id = 6008
postype = left
pos = 25,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [16000,21999]
ID = 6005
removetime = 0

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [16000,21999]
ID = 6008
removetime = 0

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 1
anim = 6009
id = 6009
postype = left
pos = 39,67
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 2
anim = 6008
id = 6008
postype = Right
pos = -60,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 2
anim = 6009
id = 6009
postype = Right
pos = -48,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [16000,21999]
ID = 6009
removetime = 0

[State 6000]
type = Varset
trigger1 = 1
fv = 1
value = (root,var(58)-16000)*0.000083333

[State 6000, Explod]
type = ModifyExplod
trigger1 = 1
ID = 6009
scale = fvar(1), 1

[State 6000, Explod]
type = DestroySelf
trigger1 = time > 10
trigger1 = !NumExplod(6005)
trigger1 = !NumExplod(6008)
trigger1 = parent,var(58) != [16000,21999]

;---------------------------------------------------------------------------
[Statedef 6015]
anim = 6000
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !NumExplod(6006)
trigger1 = teamside = 1
anim = 6006
id = 6006
postype = left
pos = -20,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6006)
trigger1 = teamside = 2
anim = 6006
id = 6006
postype = Right
pos = -100,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 1
anim = 6008
id = 6008
postype = left
pos = 25,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [22000,28999]
ID = 6006
removetime = 0

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [22000,28999]
ID = 6008
removetime = 0

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 1
anim = 6009
id = 6009
postype = left
pos = 39,67
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 2
anim = 6008
id = 6008
postype = Right
pos = -60,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 2
anim = 6009
id = 6009
postype = Right
pos = -48,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) != [22000,28999]
ID = 6009
removetime = 0

[State 6000]
type = Varset
trigger1 = 1
fv = 1
value = (root,var(58)-22000)*0.0000714

[State 6000, Explod]
type = ModifyExplod
trigger1 = 1
ID = 6009
scale = fvar(1), 1

[State 6000, Explod]
type = DestroySelf
trigger1 = time > 10
trigger1 = !NumExplod(6006)
trigger1 = !NumExplod(6008)
trigger1 = parent,var(58) != [22000,28999]

;---------------------------------------------------------------------------
[Statedef 6016]
anim = 6000
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !NumExplod(6007)
trigger1 = teamside = 1
anim = 6007
id = 6007
postype = left
pos = -20,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 1
trigger1 = !NumExplod(6007)
trigger1 = teamside = 2
anim = 6007
id = 6007
postype = Right
pos = -100,40
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 1
anim = 6008
id = 6008
postype = left
pos = 25,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) < 29000
ID = 6007
removetime = 0

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) < 29000
ID = 6008
removetime = 0

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 1
anim = 6009
id = 6009
postype = left
pos = 39,67
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6008)
trigger1 = teamside = 2
anim = 6008
id = 6008
postype = Right
pos = -60,60
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = Explod
trigger1 = time = 15
trigger1 = !NumExplod(6009)
trigger1 = teamside = 2
anim = 6009
id = 6009
postype = Right
pos = -48,68
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 5
facing = 1
pausemovetime = -1
supermovetime = -1
scale = 0.5,0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = parent,var(58) < 29000
ID = 6009
removetime = 0

[State 6000]
type = Varset
trigger1 = 1
fv = 1
value = (root,var(58)-29000)*0.00005

[State 6000]
type = Varset
trigger1 = fvar(1) >= 0.5
fv = 1
value = 0.5

[State 6000, Explod]
type = ModifyExplod
trigger1 = 1
ID = 6009
scale = fvar(1), 1

[State 6000, Explod]
type = DestroySelf
trigger1 = time > 10
trigger1 = !NumExplod(6007)
trigger1 = !NumExplod(6008)
trigger1 = parent,var(58) < 70000

;---------------------------------------------------------------------------
[Statedef 7500]
physics=N
velset=0,0
anim=9741
sprpriority=5

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=40
invertall=1
add=100,100,100
sinadd=-710,-710,-450,160

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=40
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=48
invertall=1
add=100,100,100
sinadd=-710,-710,-450,192

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=48
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=55
invertall=1
add=100,100,100
sinadd=-710,-710,-450,220

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=55
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, portrait]
type=helper
trigger1= !time
helpertype=normal
stateno=7510
ID=7510
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1


[State 7500, noshadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7500, end]
type=destroyself
trigger1= time>=46
;---------------------------------------------------------------------------
[Statedef 7501]
physics=N
velset=0,0
anim=9741
sprpriority=5

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=40
invertall=1
add=100,100,100
sinadd=-710,-710,-450,160

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=40
trigger1= root,stateno != 3200
trigger2= time=20
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=48
invertall=1
add=100,100,100
sinadd=-710,-710,-450,192

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=48
trigger1= root,stateno != 3200
trigger2= time=28
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= !time
time=55
invertall=1
add=100,100,100
sinadd=-710,-710,-450,220

[State 7500, bgpalfx1]
type=bgpalfx
trigger1= time=55
trigger1= root,stateno != 3200
trigger2= time=35
trigger2= root,stateno = 3200
time=5
add=-255,-255,-255
sinadd=255,255,255,20

[State 7500, portrait]
type=helper
trigger1= !time
trigger1= root,stateno != 3200
helpertype=normal
stateno=7520
ID=7520
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1

[State 7500, portrait]
type=helper
trigger1= !time
trigger1= root,stateno = 3200
helpertype=normal
stateno=7521
ID=7521
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1


[State 7500, noshadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7500, end]
type=destroyself
trigger1= time>=46
trigger1= root,stateno != 3200
trigger2= time>=26
trigger2= root,stateno = 3200
;---------------------------------------------------------------------------

[Statedef 7510]
physics=N
anim=9741
sprpriority=5

[State 7510, assert]
type=assertspecial
trigger1= 1
flag=invisible
flag2=nobardisplay
ignorehitpause=1

[State 7510, portrait]
type=explod
trigger1= root,stateno != 3000
trigger1= !time
anim=7510
ID=7510
postype=back
pos=160,120
under=1
bindtime=-1
removetime=60
pausemovetime=300
supermovetime=300

[State 7510, portrait]
type=explod
trigger1= root,stateno = 3000
trigger1= !time
anim=7530
ID=7530
postype=back
pos=160,120
under=1
bindtime=-1
removetime=60
pausemovetime=300
supermovetime=300

[State 7510, shrink]
type=modifyexplod
trigger1= time<45
ID=7510
scale=.5,.5

[State 7510, shrink]
type=modifyexplod
trigger1= time>=45
ID=7510
scale=.5225+(.13*(time-45)),.5225+(.13*(time-45))


[State 7510, shrink]
type=modifyexplod
trigger1= 1
ID=7530
scale=.5,.5

[State 7510, shrink]
type=null;modifyexplod
trigger1= time>=45
ID=7530
scale=.5225+(.13*(time-45)),.5225+(.13*(time-45))

[State 7510, fade]
type=palfx
trigger1= time=45
time=15
sinadd=-255,-255,-255,60

[State 7510, safety]
type=removeexplod
trigger1= time>=61

[State 7510, end]
type=destroyself
trigger1= time>=61


;---------------------------------------------------------------------------

[Statedef 7520]
physics=N
anim=9741
sprpriority=5

[State 7510, assert]
type=assertspecial
trigger1= 1
flag=invisible
flag2=nobardisplay
ignorehitpause=1

[State 7510, portrait]
type=explod
trigger1= !time
anim=7520
ID=7520
postype=back
pos=160,120
under=1
bindtime=-1
removetime=60
pausemovetime=300
supermovetime=300

[State 7510, shrink]
type=modifyexplod
trigger1= time<45
ID=7520
scale=.5,.5

[State 7510, shrink]
type=modifyexplod
trigger1= time>=45
ID=7520
scale=.5225+(.13*(time-45)),.5225+(.13*(time-45))

[State 7510, fade]
type=palfx
trigger1= time=45
time=15
sinadd=-255,-255,-255,60

[State 7510, safety]
type=removeexplod
trigger1= time>=61

[State 7510, end]
type=destroyself
trigger1= time>=61

;---------------------------------------------------------------------------

[Statedef 7521]
physics=N
anim=9741
sprpriority=5

[State 7510, assert]
type=assertspecial
trigger1= 1
flag=invisible
flag2=nobardisplay
ignorehitpause=1

[State 7510, portrait]
type=explod
trigger1= !time
anim=7520
ID=7520
postype=back
pos=160,120
under=1
bindtime=-1
removetime=60
pausemovetime=300
supermovetime=300

[State 7510, shrink]
type=modifyexplod
trigger1= time<20
ID=7520
scale=.5,.5

[State 7510, shrink]
type=modifyexplod
trigger1= time>=20
ID=7520
scale=.5225+(.13*(time-20)),.5225+(.13*(time-20))

[State 7510, fade]
type=palfx
trigger1= time=20
time=15
sinadd=-255,-255,-255,60

[State 7510, safety]
type=removeexplod
trigger1= time>=35

[State 7510, end]
type=destroyself
trigger1= time>=40
;===========================================================================
;円陣幻影剣(ヘルパー)
[Statedef 8500]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8500
sprpriority = 5

[State 200, 1]
type = VarSet
trigger1 = 1
var(13) = AnimElemNo(0)

[State 0, スタポ]
type = NotHitBy
trigger1 = 1
value = , AT
time = 9999

[State 0, スタポ]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP
slot = 1
stateno = 8503
time = 999
forceair = 0

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8500)
var(55) = 0

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8501)
var(55) = 1

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8502)
var(55) = 2

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8503)
var(55) = 3

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8504)
var(55) = 4

[State 200, 1]
type = VarSet
trigger1 = IsHelper(8505)
var(55) = 5

[State 0]
type = NotHitBy
triggerall = var(55) = [0,5]
trigger1 = NumHelper(8501) > 0
trigger1 = helper(8501),stateno = 8503
trigger2 = NumHelper(8502) > 0
trigger2 = helper(8502),stateno = 8503
trigger3 = NumHelper(8503) > 0
trigger3 = helper(8503),stateno = 8503
trigger4 = NumHelper(8504) > 0
trigger4 = helper(8504),stateno = 8503
trigger5 = NumHelper(8505) > 0
trigger5 = helper(8505),stateno = 8503
trigger6 = NumHelper(8500) > 0
trigger6 = helper(8500),stateno = 8503
value = SCA
time = 12




[State 0]
type = SprPriority
trigger1 = animelem = 3
value = -5

[State 0]
type = SprPriority
trigger1 = animelem = 10
value = 5

[State 0]
type = changeanim
trigger1 = IsHelper(8500)
trigger1 = time = 0
value = 8500
elem = 1
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8501)
trigger1 = time = 0
value = 8500
elem = 4
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8502)
trigger1 = time = 0
value = 8500
elem = 7
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8503)
trigger1 = time = 0
value = 8500
elem = 10
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8504)
trigger1 = time = 0
value = 8500
elem = 13
persistent = 1

[State 0]
type = changeanim
trigger1 = IsHelper(8505)
trigger1 = time = 0
value = 8500
elem = 16
persistent = 1

[State 8500, バインド]
type = BindToRoot
trigger1 = 1
time = 9999
facing = 1
pos = 0, -50

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 1
value = 8000, 0


[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 1 || animelem = 10
attr = S, SP 
hitflag = MA
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 10,5
pausetime = 0,0
guard.pausetime = 0,0
sparkno = 2
guard.sparkno = S8000
sparkxy = -20, -20+random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = low
air.type = low
ground.slidetime = 10
ground.hittime  = 7
air.hittime = 4
guard.ctrltime = 2
ground.velocity = ifelse(animelemno(0)=1,2,-2)
guard.velocity = ifelse(animelemno(0)=1,2,-2)
air.velocity = ifelse(animelemno(0)=1,2,-2)
airguard.velocity = ifelse(animelemno(0)=1,2,-2)


[State -2, damage]
type = AttackMulSet
trigger1 = roundstate = 2
value = 1-root,fVar(10)

[State 0]
type = Helper
triggerall = enemynear,movetype = H
triggerall = movehit = 1
trigger1 = enemy,GethitVar(hitcount) >= 1
id = 7041
name = "time"
pos = 0,-200
postype = back
stateno = 7041
helpertype = normal
bindtime = -1
keyctrl = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999




[State 200, 1]
type = Varset
trigger1 = time = 0
var(57) = 0

[State 1320, 9]
type = ChangeState
trigger1 = var(57) = 2
trigger2 = moveguarded
value = 8504

[State 200, 1]
type = Varadd
trigger1 = movecontact =2
var(57) = 1

[State -2, クリップボード（追加専用）]
type = DisplayToClipboard
trigger1 = 1
text = "%d,%d,%d,%f,%f"
params = pos X,var(14),var(2),fvar(0),fvar(1)

[State 200, 消滅]
type = DestroySelf
trigger1 = NumHelper(8510) > 0
trigger2 = NumHelper(8511) > 0
trigger3 = NumHelper(8512) > 0
trigger4 = NumHelper(8513) > 0
trigger5 = NumHelper(8514) > 0
trigger6 = NumHelper(8515) > 0

;===========================================================================
;幻影剣消滅(ヘルパー)
[Statedef 8503]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8512
sprpriority = 5

[State 0]
type = BindToRoot
trigger1 = var(13) = [8,10]
time = 999
facing = 1
pos = 65, -50

[State 0]
type = BindToRoot
trigger1 = var(13) = [1,2]
trigger2 = var(13) = 18
time = 999
facing = 1
pos = -65, -50

[State 0]
type = AngleDraw
trigger1 = 1
scale = 0.7,1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 0
value = 8000, 3

[State 200, 消滅]
type = DestroySelf
trigger1 = animtime = 0

;===========================================================================
;幻影剣消滅(ヘルパー)
[Statedef 8504]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8512
sprpriority = 5

[State 0]
type = BindToRoot
trigger1 = var(13) != 1
time = 999
facing = 1
pos = 65, -50

[State 0]
type = BindToRoot
trigger1 = var(13) = 1
time = 999
facing = 1
pos = -65, -50

[State 0]
type = VelMul
trigger1 = 1
x = .1
y = .1

[State 0]
type = turn
trigger1 = time = 0


[State 0]
type = AngleDraw
trigger1 = 1
scale = 0.7,1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 0
value = 8000, 3

[State 200, 消滅]
type = DestroySelf
trigger1 = animtime = 0

;===========================================================================
;急襲幻影剣(ヘルパー)
[Statedef 8510]
type     = S
movetype = I
physics  = N
ctrl     = 0
anim     = 8510
sprpriority = 0

[State 1000, エフェクト]
type = Explod
trigger1 = time = 0
anim = 8512
scale = 0.5,0.5
postype = p1
pos = -20,0
ownpal = 1
bindtime = 60
removeongethit = 1

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
fvar(3) = 0

;角度算出
;クリエーターズJAPAN2に悪咲３号様の寄せられた追尾弾に関するコラムを参考にさせていただきました)
[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(2) = ifelse((root,P2dist x=[0,10]),11,ifelse((root,P2dist x=[-10,0]),-11,root,P2dist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
fvar(3) = ifelse((root,P2dist y=[0,10]),11,ifelse((root,P2dist y=[-10,0]),-11,root,P2dist y))+10


[State 7000, VarSet]
type = VarSet
trigger1 = time > 1
var(12) = ceil((atan(fvar(2)/fvar(3))*180)/pi)-(90*ifelse(root,P2dist Y<0,-1,1))

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)


[State 0]
type = AngleSet
trigger1 = 1
value = var(12)


[State 0]
type = SprPriority
trigger1 = IsHelper(8510)
value = 5

[State 0]
type = SprPriority
trigger1 = IsHelper(8511)
value = 4

[State 0]
type = SprPriority
trigger1 = IsHelper(8512)
value = 1

[State 0]
type = SprPriority
trigger1 = IsHelper(8513)
value = -1

[State 0]
type = SprPriority
trigger1 = IsHelper(8514)
value = -4

[State 0]
type = SprPriority
trigger1 = IsHelper(8515)
value = -5

[State 8500, バインド]
type = BindToRoot
trigger1 = IsHelper(8510)
time = 9999
facing = 1
pos = -20, -70


[State 8500, バインド]
type = BindToRoot
trigger1 = IsHelper(8511)
time = 9999
facing = 1
pos = -15, -110

[State 8500, バインド]
type = BindToRoot
trigger1 = IsHelper(8512)
time = 9999
facing = 1
pos = -10, -125

[State 8500, バインド]
type = BindToRoot
trigger1 = IsHelper(8513)
time = 9999
facing = 1
pos = -5, -120

[State 8500, バインド]
type = BindToRoot
trigger1 = IsHelper(8514)
time = 9999
facing = 1
pos = 0, -105

[State 8500, バインド]
type = BindToRoot
trigger1 = IsHelper(8515)
time = 9999
facing = 1
pos = 5, -75

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 0
value = 8000, 0

[State 702, ステート変更]
type = ChangeState
trigger1 = (IsHelper(8510)) && (Time = 60)
trigger2 = (IsHelper(8515)) && (Time = 69)
trigger3 = (IsHelper(8511)) && (Time = 78)
trigger4 = (IsHelper(8514)) && (Time = 87)
trigger5 = (IsHelper(8512)) && (Time = 96)
trigger6 = (IsHelper(8513)) && (Time = 105)
value = 8511
ctrl = 0
;===========================================================================
;急襲幻影剣(ヘルパー)
[Statedef 8511]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 8511
sprpriority = 0
movehitpersist = 1

;円陣幻影剣ヒット回数
[state buki]
type = varset
trigger1 = 1
var(57) = root,var(57)

[State 0]
type = NotHitBy
trigger1 = 1
value = , AT
time = 9999

[State 0]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP
slot = 1
stateno = 8504
time = 999
forceair = 0

[State 8500, バインド]
type = BindToRoot
trigger1 = time = 0
time = 0


;裏周りに対応
[State 0]
type = Turn
trigger1 = time = 0
trigger1 = root,p2dist x < 0

;角度算出(著:悪咲氏)
[State 7000, VarSet]
type = VarSet
trigger1 = time = 0;1
fvar(2) = ifelse((root,P2dist x=[-10,10]),11,abs(root,P2dist x))

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0;1
fvar(3) = ifelse((root,P2dist y=[0,10]),11,ifelse((root,P2dist y=[-10,0]),-11,root,P2dist y))+10


[State 7000, VarSet]
type = VarSet
trigger1 = time = 0;1
var(12) = ceil((atan(fvar(2)/fvar(3))*180)/pi)-(90*ifelse(root,P2dist Y<0,-1,1))

[State 0]
type = AngleDraw
trigger1 = 1
value = var(12)

[State 0]
type = AngleSet
trigger1 = 1
value = var(12)

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
fvar(0) = atan(fvar(2)/fvar(3))-(.5*pi*ifelse(root,P2dist Y <0,-1,1))

[State 7000, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
fvar(0) = ifelse(fvar(0)>(.33*pi),.33*pi,ifelse(fvar(0)<(-.33*pi),-.33*pi,fvar(0)))

[State 7000, VelSet]
type = VelSet
trigger1 = time = 1
x = -abs(-4*cos(fvar(0)))
y = 4*sin(fvar(0))

[State 7000, VelSet]
type = Veladd
trigger1 = time >= 6
x = abs(3.8*cos(fvar(0)))
y = -3.8*sin(fvar(0))

[State 440, エフェクト]
type = PlaySnd
trigger1 = time = 10
value = 8000, 1

[State 0]
type = Trans
trigger1 = 1
trans = add

[State 0]
type = SprPriority
trigger1 = IsHelper(8510)
value = 5

[State 0]
type = SprPriority
trigger1 = IsHelper(8511)
value = 4

[State 0]
type = SprPriority
trigger1 = IsHelper(8512)
value = 1

[State 0]
type = SprPriority
trigger1 = IsHelper(8513)
value = -1

[State 0]
type = SprPriority
trigger1 = IsHelper(8514)
value = -4

[State 0]
type = SprPriority
trigger1 = IsHelper(8515)
value = -5

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 1
attr = S, SP 
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3, Hit
damage = 20-(root,var(57)*3), 1
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = -1
sparkxy = -20, -20+random%10
hitsound = S8000, 2
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 10
ground.hittime  = 20
air.hittime = 15
guard.ctrltime = 10
ground.velocity = -3
guard.velocity = -1
air.velocity = -1.4,-3.5
airguard.velocity = -3,-.8
air.fall = 1
air.recover = 0
fall.recover = 0

[State -2, damage]
type = AttackMulSet
trigger1 = roundstate = 2
value = 1-root,fVar(10)

[State 0]
type = Helper
triggerall = enemynear,movetype = H
triggerall = movehit = 1
trigger1 = enemy,GethitVar(hitcount) >= 1
id = 7041
name = "time"
pos = 0,-200
postype = back
stateno = 7041
helpertype = normal
bindtime = -1
keyctrl = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State -2, 変数]
type = VarSet
trigger1 = movecontact = 1
var(56) = ceil(pos Y)

[State 3001, Explod]
type = Explod
trigger1 = movecontact
anim = 8513
ID = 8513
pos = 0, var(56)+10
postype = p2
facing = 1
bindtime = -1
removetime = -2
supermovetime = -1
pausemovetime = -1
scale = 0.3, 0.25
sprpriority = 3

[State 3001, Explod]
type = ModifyExplod
trigger1 = movecontact >= 12
ID = 8513
removetime = 0

[State 0, 消滅変数]
type = AssertSpecial
trigger1 = movecontact
flag = invisible


[State 200, 消滅]
type = DestroySelf
triggerall = time > 150
trigger1 = FrontEdgeBodyDist < -100
trigger2 = BackEdgeBodyDist < -100


;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;AI起動ヘルパー
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Statedef 10000]
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 10000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 10000,立ったら消失]
Type = DestroySelf
triggerAll = isHelper
Trigger1 = root,var(59)||var(59)=-1
trigger2=command="up"&&root,command="up"
trigger3=command="down"&&root,command="down"
trigger4=command="back"&&root,command="back"
trigger5=command="fwd"&&root,command="fwd"
trigger6=command="a"&&root,command="a"
trigger7=command="b"&&root,command="b"
trigger8=command="c"&&root,command="c"
trigger9=command="x"&&root,command="x"
trigger10=command="y"&&root,command="y"
trigger11=command="z"&&root,command="z"
trigger12=command="start"&&root,command="start"

[State 10000,ﾌﾗｸﾞON]
type=varset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1

;===========================================================================
; 常時監視ステート（−２）
;===========================================================================
[Statedef -2]

;モード選択
[state -2, a]
type = varset
trigger1 = palno = 1
trigger2 = palno = 2
trigger3 = palno = 3
trigger4 = palno = 4
trigger5 = palno = 5
trigger6 = palno = 6
var(51) = 0

[state -2, a]
type = varset
trigger1 = palno = 7
trigger2 = palno = 8
trigger3 = palno = 9
trigger4 = palno = 10
trigger5 = palno = 11
trigger6 = palno = 12
var(51) = 1
;---------------------------------------------------------------------------
;ヘルパーのステートを奪われた場合
[State -2]
type = SelfState
trigger1 = movetype = H
trigger1 = IsHelper
value = 7008
ctrl = 0
anim = 7008

[State -2, アーマーヘルパー]
type = helper
trigger1 = var(52)
trigger1 = numhelper(4500) = 0
stateno = 4500
ID = 4500
postype = p1
pos = 0,0
ownpal = 1
keyctrl = 0
supermovetime = 9999
pausemovetime = 9999

[State -2, 無敵]
type = nothitby
triggerall = var(52)
triggerall = numhelper(4500)
trigger1 = movetype != H
trigger1 = stateno != 4053
value = SCA
time = 1

[State -2, アーマーの食らったダメージをもらう]
type = lifeadd
trigger1 = numhelper(4500)
trigger1 = helper(4500),gethitvar(damage)
value = -helper(4500),gethitvar(damage)/2
absolute = 1

[State -2, 防御アップ]
type = DefenceMulSet
trigger1 = var(52)
trigger1 = numhelper(4500)
trigger1 = !(ishelper(4500))
value = .5

;スタイリッシュポイント
;監視ヘルパー
[State -2]
type = Helper
trigger1 = !NumHelper(6000)
trigger1 = numenemy
id = 6000
name = "sutapo"
pos = 0,-200
postype = back
stateno = 6000
helpertype = normal
bindtime = -1
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

;---------------------------------------------------------------------------
;コンボつながり・補正関係
[State -2, damage]
type = VarSet
trigger1 = roundstate = 2
trigger1 = enemy,GethitVar(hitcount) >= 2
var(15) = enemy,GethitVar(hitcount)

[State -2, damage_reset]
type = VarSet
trigger1 = p2movetype != H
trigger2 = enemy,GethitVar(hitcount) = 0
var(15) = 1


;[State -2, damage];attackmulに実際に入れる値の式
;type = VarSet
;trigger1 = roundstate = 2
;trigger1 = enemy,GethitVar(hitcount) >= 2
;fvar(10) = enemy,GethitVar(hitcount) * 0.05

;ヘルパー攻撃による補正増加
[State -2]
type = Varadd
triggerall = movetype != H
trigger1 = Numhelper(7041)
fv = 10
value = helper(7041),fvar(10)


[State -2]
type = Varadd
triggerall = movetype != H
trigger1 = Numhelper(3007)
fv = 10
value = helper(3007),fvar(10)

[State -2, damage_reset];攻撃が途切れたら値をリセット
type = VarSet
trigger1 = p2movetype != H
trigger2 = enemy,GethitVar(hitcount) = 0
fvar(10) = 0

[State -2, damage];最小値。0にするとｺﾝﾎﾞ入れまくると全く減らなくなる
type = VarSet
trigger1 = fVar(10) >= 1-(var(14)*0.1)
fvar(10) = 1-(var(14)*0.1)

[State -2, damage]
type = AttackMulSet
trigger1 = roundstate = 2
value = 1-fVar(10)


[State -2, 幻影剣コンボ];切れたら値をリセット
type = VarSet
trigger1 = p2movetype != H
trigger2 = movetype = H
var(55) = 0
;---------------------------------------------------------------------------
;飛び道具かき消し時
[State 950, ゲージ]
type = poweradd
trigger1 = numhelper(953)
trigger1 = helper(953),stateno = 954
value = 10

[State 1110, スタポ]
type = Varadd
trigger1 = numhelper(953)
trigger1 = helper(953),stateno = 954
v = 58
value = ceil(50*(1+(var(15)*0.1)-(var(14)*0.1)))

[State -2, damage]
type = VarSet
trigger1 = numhelper(953)
trigger1 = helper(953),stateno = 954
var(18) = 1

[State -2, damage]
type = VarSet
trigger1 = stateno != [950,951]
trigger2 = stateno = 951
trigger2 = time > 15
trigger3 = stateno = 950
trigger3 = numhelper(953)
trigger3 = helper(953),stateno = 954
trigger3 = helper(953),time > 15
var(18) = 0
;---------------------------------------------------------------------------
;現在のランク
[State -2]
type = Varset
trigger1 = !numhelper(6010)
trigger1 = !numhelper(6011)
trigger1 = !numhelper(6012)
trigger1 = !numhelper(6013)
trigger1 = !numhelper(6014)
trigger1 = !numhelper(6015)
trigger1 = !numhelper(6016)
var(14) = 1

[State -2]
type = Varset
trigger1 = numhelper(6010)
var(14) = 2

[State -2]
type = Varset
trigger1 = numhelper(6011)
var(14) = 3

[State -2]
type = Varset
trigger1 = numhelper(6012)
var(14) = 4

[State -2]
type = Varset
trigger1 = numhelper(6013)
var(14) = 5

[State -2]
type = Varset
trigger1 = numhelper(6014)
var(14) = 6

[State -2]
type = Varset
trigger1 = numhelper(6015)
var(14) = 7

[State -2]
type = Varset
trigger1 = numhelper(6016)
var(14) = 8
;---------------------------------------------------------------------------
;時間経過によるスタポ減少
[State -2]
type = Varadd
triggerall = var(58) > 0
triggerall = time%20 = 0
trigger1 = movetype = I
trigger2 = movetype = A
trigger2 = !movecontact
v = 58
value = -5*ceil(10+(2*var(14)))

;ヘルパー攻撃によるスタポ増加
[State -2]
type = Varadd
triggerall = movetype != H
trigger1 = Numhelper(7041)
v = 58
value = helper(7041),var(14)

;ヘルパー攻撃によるスタポ増加
[State -2]
type = Varadd
triggerall = movetype != H
trigger1 = Numhelper(3007)
v = 58
value = helper(3007),var(14)


;ヘルパー攻撃によるスタポ増加
[State -2]
type = Varadd
triggerall = movetype != H
trigger1 = Numhelper(7042)
v = 58
value = helper(7042),var(14)

;喰らいによるスタポ減少
[State -2]
type = Varadd
trigger1 = movetype = H
trigger1 = var(58) > 0
v = 58
value = -180
persistent = 1
;---------------------------------------------------------------------------

;やられボイス
[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim = 5000 || anim = 5010 || anim = 5020
trigger1 = random = [0,300]
value = 5000, 2
channel = 0
ignorehitpause = 1


[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim = 5000 || anim = 5010 || anim = 5020
trigger1 = random = [301,999]
value = 5000, 3
channel = 0
ignorehitpause = 1

[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim = 5001 || anim = 5011 || anim = 5021
trigger1 = random = [0,600]
value = 5000, 1
channel = 0
ignorehitpause = 1

[State -2]
type = playsnd
triggerall = alive
triggerall = time = 1
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = anim != [5000,5001]
trigger1 = anim != [5010,5011]
trigger1 = anim != [5020,5021]
trigger1 = random = [601,999]
value = 5000, 0
channel = 0
ignorehitpause = 1

[State 419, エフェクト]
type = RemoveExplod
trigger1 = stateno != 411
ID = 419

[State 419, エフェクト]
type = RemoveExplod
trigger1 = stateno != 950 && stateno != 194
ID = 952
;---------------------------------------------------------------------------
;魔人状態で喰らった時のしぼむＴＢ
[State -2]
type = Explod
trigger1 = time = 1
trigger1 = stateno = [5000,5999]
trigger1 = prevstateno = [3501,3502]
trigger2 = time = 1
trigger2 = stateno = [5000,5999]
trigger2 = prevstateno = [3300,3399]
trigger2 = prevstateno != 3350
anim = 3520
ID = 3520
scale = 1.5,1.5
postype = p1
pos = 0,0
sprpriority = 4
supermovetime = 99999
ownpal = 1
bindtime = -1
removeongethit = 1

[State -2]
type = ModifyExplod
trigger1 = time >= 1
ID = 3520
scale = 1.5-(0.1*(time-1)), 1.5-(0.1*(time-1))

[State -2]
type = PlaySnd
trigger1 = time = 2
trigger1 = stateno = [5000,5999]
trigger1 = prevstateno = [3501,3502]
value = 3500,5
;---------------------------------------------------------------------------
;禊
[State 901, Throw]
type = TargetState
trigger1 = stateno = 3301
trigger1 = movehit
trigger1 = time > 1
trigger1 = numtarget
value = 3350
ignorehitpause = 1
persistent = 0

[State 901, Throw]
type = TargetState
trigger1 = stateno = 4024
trigger1 = movehit
trigger1 = time > 1
trigger1 = numtarget
value = 4350
ignorehitpause = 1
persistent = 0
;---------------------------------------------------------------------------
;やられ残像消し
[State -2]
type = AfterImage
trigger1 = stateno = 0
trigger2 = stateno = [5000,5999]
time = 0
;---------------------------------------------------------------------------
歩く音
[State -2]
type = playsnd
trigger1 = animelem = 4
trigger1 = anim = 20
value = 20, 1
ignorehitpause = 1

[State -2]
type = playsnd
trigger1 = animelem = 9
trigger1 = anim = 20
value = 20, 2
ignorehitpause = 1

[State -2]
type = playsnd
trigger1 = animelem = 5
trigger1 = anim = 21
value = 20, 1
ignorehitpause = 1

[State -2]
type = playsnd
trigger1 = animelem = 11
trigger1 = anim = 21
value = 20, 2
ignorehitpause = 1
;---------------------------------------------------------------------------
[State -2, Combo]
type = VarSet
trigger1 = stateno = 0
var(36) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(36) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(36) = ifelse(moveguarded,2,4)
ignorehitpause = 1
;---------------------------------------------------------------------------

[state buki]
type = varset
trigger1 = numHelper(8510)
var(12) = helper(8510),var(12)

[state buki]
type = varset
trigger1 = numHelper(8510)
fvar(0) = helper(8510),fvar(0)


[State -2, クリップボード（追加専用）]
type = DisplayToClipboard
trigger1 = 1
text = "%d,%d,%d"
params = palno,var(51),roundstate

[State -2, 距離確認デバック]
type = AppendToClipboard
trigger1 = 1
text =  "P2X:%f,P2Y:%f,Vx%f,Vy%f,Py%f \n"
params = P2BodyDist x,P2BodyDist y,vel x,vel y,Pos y
IgnoreHitPause = 1

;-----------------------------------
[state buki];ラウンドトリップ時のフォースエッジの有無
type = varset
trigger1 = NumHelper(1401) >0
var(10) = 10000

[state buki]
type = varset
trigger1 = !NumHelper(1401)
var(10) = 0
;-----------------------------------
;円陣幻影数
[state buki]
type = varset
trigger1 = NumHelper(8500) = 0
trigger1 = NumHelper(8501) = 0
trigger1 = NumHelper(8502) = 0
trigger1 = NumHelper(8503) = 0
trigger1 = NumHelper(8504) = 0
trigger1 = NumHelper(8505) = 0
var(56) = 0
;-----------------------------------
;円陣幻数
[state buki]
type = varset
trigger1 = NumHelper(8500) > 0
trigger2 = NumHelper(8501) > 0
trigger3 = NumHelper(8502) > 0
trigger4 = NumHelper(8503) > 0
trigger5 = NumHelper(8504) > 0
trigger6 = NumHelper(8505) > 0
var(56) = 1
;-----------------------------------

;円陣幻影剣ヒット回数
[state buki]
type = varset
trigger1 =numhelper(8500) > 0
var(57) = helper(8500),var(57)

;-----------------------------------
;トリックアップリセット
[State 200, 1]
type = VarSet
trigger1 = pos y >= 0
var(16) = 0

;-----------------------------------
[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(50) = 0

[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(51) = 0

[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(52) = 0

[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(53) = 0

[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(54) = 0

[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(55) = 0

[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(56) = 0

[state -2, ラウンド持ち越し変数リセット]
type = varset
trigger1 = roundstate = 0
var(57) = 0

;-----------------------------------
[state -2, 特殊KOボイス処理]
type = varadd
trigger1 = lose
trigger1 = var(50) < 100
var(50) = 1

[state -2, 特殊KOボイス処理]
type = varadd
trigger1 = lose
trigger1 = var(50) = 1
var(49) = 1

[State -2, 特殊KOボイス処理]
type = AssertSpecial
trigger1 = !numpartner
flag = nokosnd

[State -2, 特殊KOボイス処理];通常
type = PlaySnd
trigger1 = !numpartner
trigger1 = var(50) = 1
trigger1 = loseko
trigger1 = !alive
;↓先取ラウンド数を変えてる場合は「var(49) >= ○」の部分を変える
trigger1 = !(p2name = "dante" && (var(49) >= 2 || teammode = turns))
value = 11,0

[State -2, 特殊KOボイス処理];ﾀﾞﾝﾃｪｲ
type = PlaySnd
trigger1 = !numpartner
trigger1 = var(50) = 1
trigger1 = loseko
trigger1 = !alive
;↓先取ラウンド数を変えてる場合は「var(49) >= ○」の部分を変える
trigger1 = p2name = "dante" && (var(49) >= 2 || teammode = turns)
value = 11,1

;===========================================================================
; 準常時監視ステート（−３）
;===========================================================================
[Statedef -3]
;AI記述 平成a氏のＡＩ説明書を使わせて頂きました。
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[State -3, AI起動用ヘルパー]
type=helper
trigger1=!NumHelper(10000)
trigger1=roundstate=2
trigger1=alive
trigger1=var(59)=0
Trigger1=PrevStateNo=(191)||PrevStateNo=5900
Trigger1=ctrl&&stateno=0
helpertype=normal
name="AI"
stateno=10000
ID=10000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(10000)
trigger1= stateno!=10000
value=10000

[State -3, AIフラグセット]
type = VarSet
triggerall = var(59) = 0
triggerall = RoundState = [1,2]
trigger1 = Command = "AI0"
trigger2 = Command = "AI1"
trigger3 = Command = "AI2"
trigger4 = Command = "AI3"
trigger5 = Command = "AI4"
trigger6 = Command = "AI5"
trigger7 = Command = "AI6"
trigger8 = Command = "AI7"
trigger9 = Command = "AI8"
trigger10 = Command = "AI9"
trigger11 = Command = "AI10"
trigger12 = Command = "AI11"
trigger13 = Command = "AI12"
trigger14 = Command = "AI13"
trigger15 = Command = "AI14"
trigger16 = Command = "AI15"
trigger17 = Command = "AI16"
trigger18 = Command = "AI17"
trigger19 = Command = "AI18"
trigger20 = Command = "AI19"
trigger21 = Command = "AI20"
trigger22 = Command = "AI21"
trigger23 = Command = "AI22"
trigger24 = Command = "AI23"
trigger25 = Command = "AI24"
trigger26 = Command = "AI25"
trigger27 = Command = "AI26"
trigger28 = Command = "AI27"
trigger29 = Command = "AI28"
trigger30 = Command = "AI29"
trigger31 = Command = "AI30"
trigger32 = Command = "AI31"
trigger33 = Command = "AI32"
trigger34 = Command = "AI33"
trigger35 = Command = "AI34"
trigger36 = Command = "AI35"
trigger37 = Command = "AI36"
trigger38 = Command = "AI37"
trigger39 = Command = "AI38"
trigger40 = Command = "AI39"
trigger41 = Command = "AI40"
trigger42 = Command = "AI41"
trigger43 = Command = "AI42"
trigger44 = Command = "AI43"
trigger45 = Command = "AI44"
trigger46 = Command = "AI45"
trigger47 = Command = "AI46"
trigger48 = Command = "AI47"
trigger49 = Command = "AI48"
trigger50 = Command = "AI49"
trigger51 = Command = "AI50"
Trigger52 = numhelper(10000)
Trigger52 = Helper(10000),var(59)
;Trigger53= 1;常時AI起動
var(59) = 10 ;1〜10

[State -3, 効果音]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52  ;着地ステート
value = 40, 0


[State -3, 3];
type = targetlifeadd
triggerall = NumTarget(3200) >= 1
trigger1 = target(3200),stateno = 3222
trigger1 = target(3200),time = 6
ID = 3200
value = ceil(-80*(1-(fVar(10)*0.5)))

[State -3, 3];
type = targetlifeadd
triggerall = NumTarget(3200) >= 1
trigger1 = target(3200),stateno = 3223
trigger1 = target(3200),time = 2
ID = 3200
value = ceil(-80*(1-(fVar(10)*0.5)))
;-----------------------------------
[State -3, 幻影剣展開フラグ]
type = VarSet
trigger1 = numhelper(1401)
trigger1 = helper(1401),stateno = 1402
trigger1 = power > 2000
trigger1 = random = [800,870]
trigger1 = var(59)
trigger1 = enemynear,life > 100
var(53) = 1

[State -3, 幻影剣展開フラグ]
type = VarSet
trigger1 = !numhelper(1401)
trigger2 = !(helper(1401),stateno = 1402)
trigger3 = !(power > 2000)
var(53) = 0

;円陣幻影剣
[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = var(56) = 0
triggerall = NumHelper(8510) = 0
trigger1 = command = "Enjin" && stateno != 2900 && power >= 2000
trigger1 = var(59) = 0
trigger2 = stateno = 2900 && time = 115
trigger3 = stateno = 4040 && time = 115
trigger4 = var(53)
helpertype = normal
name = "Enjin"
ID = 8500
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = var(56) = 0
triggerall = NumHelper(8511) = 0
trigger1 = command = "Enjin" && stateno != 2900 && power >= 2000
trigger1 = var(59) = 0
trigger2 = stateno = 2900 && time = 115
trigger3 = stateno = 4040 && time = 115
trigger4 = var(53)
helpertype = normal
name = "Enjin"
ID = 8501
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = var(56) = 0
triggerall = NumHelper(8512) = 0
trigger1 = command = "Enjin" && stateno != 2900 && power >= 2000
trigger1 = var(59) = 0
trigger2 = stateno = 2900 && time = 115
trigger3 = stateno = 4040 && time = 115
trigger4 = var(53)
helpertype = normal
name = "Enjin"
ID = 8502
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = var(56) = 0
triggerall = NumHelper(8513) = 0
trigger1 = command = "Enjin" && stateno != 2900 && power >= 2000
trigger1 = var(59) = 0
trigger2 = stateno = 2900 && time = 115
trigger3 = stateno = 4040 && time = 115
trigger4 = var(53)
helpertype = normal
name = "Enjin"
ID = 8503
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = var(56) = 0
triggerall = NumHelper(8514) = 0
trigger1 = command = "Enjin" && stateno != 2900 && power >= 2000
trigger1 = var(59) = 0
trigger2 = stateno = 2900 && time = 115
trigger3 = stateno = 4040 && time = 115
trigger4 = var(53)
helpertype = normal
name = "Enjin"
ID = 8504
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = var(56) = 0
triggerall = NumHelper(8515) = 0
trigger1 = command = "Enjin" && stateno != 2900 && power >= 2000
trigger1 = var(59) = 0
trigger2 = stateno = 2900 && time = 115
trigger3 = stateno = 4040 && time = 115
trigger4 = var(53)
helpertype = normal
name = "Enjin"
ID = 8505
pos = 0, -50
postype = p1
stateno = 8500
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.5
size.yscale = 0.5

[State -3, ゲージ]
type = poweradd
trigger1 = NumHelper(8500) 
trigger1 = Helper(8500),time = 2
trigger1 = stateno != 2900
trigger1 = Helper(8500),stateno = 8500
trigger2 = NumHelper(8510) 
trigger2 = Helper(8510),time = 2
trigger2 = Helper(8510),stateno = 8510
trigger2 = var(17) = 0
value = -2000

[state -3, 変数]
type = varset
trigger1 = NumHelper(8500) 
trigger1 = Helper(8500),time < 2
var(17) = 0

[state -3, 変数]
type = varset
trigger1 = NumHelper(8500) 
trigger1 = Helper(8500),time >= 2
var(17) = 1

;-----------------------------------
;急襲幻影剣
[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8500) = 1
triggerall = NumHelper(8510) = 0
trigger1 = command = "kyusyu" && var(59) = 0
trigger2 = Helper(8500),time = 2 && var(59)
trigger2 = var(52) = 0 
trigger3 = Helper(8500),time >= 200 && var(59)
trigger3 = var(52)
helpertype = normal
name = "kyusyu"
ID = 8510
pos = -20, -70
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.5
size.yscale = 0.5

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8501) = 1
triggerall = NumHelper(8511) = 0
trigger1 = command = "kyusyu" && var(59) = 0
trigger2 = Helper(8500),time = 2 && var(59)
trigger2 = var(52) = 0 
trigger3 = Helper(8500),time >= 200 && var(59)
trigger3 = var(52)
helpertype = normal
name = "kyusyu"
ID = 8511
pos = -15, -110
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.48
size.yscale = 0.48

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8502) = 1
triggerall = NumHelper(8512) = 0
trigger1 = command = "kyusyu" && var(59) = 0
trigger2 = Helper(8500),time = 2 && var(59)
trigger2 = var(52) = 0 
trigger3 = Helper(8500),time >= 200 && var(59)
trigger3 = var(52)
helpertype = normal
name = "kyusyu"
ID = 8512
pos = -10, -125
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.46
size.yscale = 0.46

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8503) = 1
triggerall = NumHelper(8513) = 0
trigger1 = command = "kyusyu" && var(59) = 0
trigger2 = Helper(8500),time = 2 && var(59)
trigger2 = var(52) = 0 
trigger3 = Helper(8500),time >= 200 && var(59)
trigger3 = var(52)
helpertype = normal
name = "kyusyu"
ID = 8513
pos = -5, -120
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.44
size.yscale = 0.44

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8504) = 1
triggerall = NumHelper(8514) = 0
trigger1 = command = "kyusyu" && var(59) = 0
trigger2 = Helper(8500),time = 2 && var(59)
trigger2 = var(52) = 0 
trigger3 = Helper(8500),time >= 200 && var(59)
trigger3 = var(52)
helpertype = normal
name = "kyusyu"
ID = 8514
pos = 0, -105
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.42
size.yscale = 0.42

[State -3, ヘルパー]
type = Helper
triggerall = stateno != [5000,5999]
triggerall = stateno != [120,155]
triggerall = NumHelper(8505) = 1
triggerall = NumHelper(8515) = 0
trigger1 = command = "kyusyu" && var(59) = 0
trigger2 = Helper(8500),time = 2 && var(59)
trigger2 = var(52) = 0 
trigger3 = Helper(8500),time >= 200 && var(59)
trigger3 = var(52)
helpertype = normal
name = "kyusyu"
ID = 8515
pos = 5, -75
postype = p1
stateno = 8510
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.4
size.yscale = 0.4

[State -3, Ｍ２０モード]
Type     = ChangeState
trigger1 = var(59) >= 1
trigger1 = var(51) = 1
trigger1 = var(52) < 1
trigger1 = matchover = 0
trigger1 = roundno >= 2
trigger1 = roundstate = 2
trigger1 = (stateno != 0 && stateno != 5900) || ctrl
trigger1 = statetype != L || (pos y < 0 && canrecover)
trigger1 = life = [1,400]
Value    = ifelse((statetype = S || statetype = C) && movetype = I,4002,4000)
